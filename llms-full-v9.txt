---
url: 'https://www.wuyunai.com/docs/docs/v9/index.md'
description: Auto.js Pro 第二代 API 文档阅读须知 - 基于 Node.js 引擎的 API 文档，包含 API 稳定性说明、使用指南和注意事项。
---
Auto.js Pro 9是Auto.js Pro的全新版本，除了编辑器、打包等新功能外，最重要的是带来了基于Node.js的引擎和全新的第二代API（第一代API仍然保留可用），伴随着庞大的npm生态（接近200万个npm包），并仍然支持和Android/Java交互（也即可在Node.js中使用Android/Java API）。。

> 本文档为Pro 9新增的基于Node.js的第二代API的文档（第一代API仍然保留可用）。如果你想查看的是旧的第一代API的文档，请在菜单栏切换

# 第二代API和第一代API的区别

Node.js（第二代API）对比Rhino（第一代API）的优势是：

* Node.js引擎的JavaScript执行性能是Rhino的100倍以上
* 使用Node.js引擎的代码**加密强度高**，目前不能被还原
* Node.js支持ES2021以上语言标准，Rhino仅支持ES5和部分ES6特性
* Node.js引擎本身的Bug基本很少，而Rhino引擎的模块系统、语言实现本身有不少Bug
* Node.js对应的第二代API设计较好、更加标准
* 可以使用第三方npm包
* Node.js的网络资料较多

Node.js（第二代API）对比Rhino（第一代API）的劣势是：

* Node.js对应的第二代API上手门槛较高，需要对Promise、异步有一定了解，尤其对新手来说
* 第二代API的文档阅读较难，并且目前正在完善中
* Rhino和第一代API的社区的源码、资料、示例较多
* 第一代API使用上比较方便

# 刚接触Auto.js Pro时如何选择引擎

如果你是：

1. 没有编程基础的新手，并且不想深入学习编程
2. 代码能跑就行，不追求可维护性、可读性
3. 不追求最新语言标准，能容忍引擎、API设计本身有不符合标准的地方和bug

那么建议你使用Rhino引擎和第一代API，上手较快。你无需特别配置，代码默认都以该引擎执行。

如果你是：

1. 计算机专业出身或者有一定开发经验
2. 第一次学习编程，但想学习行业标准和规范，为以后学习深入或学习Android/JavaScript/Web等打基础
3. 有一定的代码素养和追求
4. 有较高的软件安全、加密需求
5. 想用npm包，实现比如连接mysql等需求
6. 追求更高的JS运行性能
7. 热爱编程，或者热爱探索，热爱学习

那么建议你使用Node.js引擎和第二代API，对Rhino引擎和第一代API了解即可。

# 快速开始

## 用 node.js 引擎执行代码

为了向前兼容，Pro 9中的代码仍然默认为旧的Rhino引擎运行，要使用新的Node.js引擎可以用以下任一方式：

1. 文件头带上"nodejs";例如：

```javascript
"nodejs";
 
// 打印nodejs的版本
console.log(`Node.js版本: ${process.version}`);
```

2. 文件以.node.js或.mjs结尾。.mjs结尾则会同时启用ES Module功能，参见

## 使用Node.js内置模块

在Node.js中，你可以使用其自带的几十个模块，比如：

* fs: 文件系统，用于读写文件（类似Pro 8中的files模块）
* http, https: http(s)请求与服务，用于发送http(s)请求或者搭建http服务器
* worker\_threads: 工作线程，用于并行执行任务（类似于Pro 8中的threads模块）
* …

全部的Node.js内置模块及其文档参见Node.js 16.x文档

以下是一个使用内置的fs模块读取文本文件的例子：

```javascript
"nodejs";
 
const fs = require("fs");
 
// 使用readFile读取文件，参见https://nodejs.org/dist/latest-v16.x/docs/api/fs.html#fsreadfilepath-options-callback
fs.readFile('/sdcard/脚本/test.txt', {'encoding': 'utf-8'}, (err, data) => {
    if (err) {
        console.error("读取文件失败:", err);
    } else {
        console.log("读取文件成功:", data);
    }
});
```

## 使用Pro 9内置模块

作为对Node.js内置模块的补充，Pro 9将部分Pro 8的模块迁移到了Pro 9的API中，比如：

* app: 用于启动其他应用、获取其他应用信息，发送广播、邮件等
* ui: 用于显示自定义界面、Web界面
* accessibility: 用于使用无障碍API完成自动化任务
* …

> 在Pro 9中，所有模块均需要使用require()来导入才能使用，而不能像Pro 8一样直接使用全局变量。比如不能直接用app或$app变量，而需要用const app = require('app')来导入模块。

所有模块的列表可在本文档右侧或右上角菜单中查看。

每个模块的API可能与Pro 8有所不同，大部分API被设计为异步而非同步阻塞，一些全局函数、变量被设计为模块内函数。比如，`requestScreenCapture`函数在Pro 8版本中是一个同步函数，请求截图权限，在用户操作前会一直阻塞，因此无法在UI线程中执行，在Pro 9中则是一个异步函数，返回一个`Promise`，需要用`await`或`then`来得到结果；`setClip()`, `getClip()`在Pro 8中是全局函数，在Pro 9中则属于模块`clip_manager`的函数。

以下是一个使用`media_projection`模块请求截图权限，使用image模块寻找图片的例子：

```javascript
// 使用解构语法导入模块的部分函数和变量
// 当然也可以用const image = require("image")再使用image.readImage()，但相对繁琐
const {readImage, findImage} = require("image");
const {requestScreenCapture} = require('media_projection');
 
// 主函数，用async标记以便使用await来等待结果
async function main() {
    // 请求截图权限
    const capturer = await requestScreenCapture();
    // 读取要寻找的图片
    const template = await readImage("./template.png");
    // 获取下一帧截图图片
    const capture = await capturer.nextImage();
    // 在截图中模板匹配template
    const result = await findImage(capture, template);
    // 打印结果
    console.log('findImage: ', result);
    // 停止截图
    capturer.stop();
    // 回收图片
    template.recycle();
}
// 执行主函数
main();
```

## 使用npm安装第三方模块

在npm上有大量的第三方模块，这些模块绝大部分都能在Pro 9中使用。在使用它们之前需要用npm命令来安装模块。

1. npm包需要项目才能安装。在Pro 9文件管理中点击右下角菜单，选择项目，在模板中选择Node.js项目。
2. 在新建项目页面，填好应用名称、包名（包名需要包含英文”.”，比如`com.example`），点击确定
3. 在项目文件夹中，点击工具栏的项目图标，点击终端
4. 输入”`npm i —no-bin-links 模块名称`”来安装npm包，安装后就可以在项目的代码中使用该模块
5. 通过`require`就可以使用安装的模块

```javascript
"nodejs";
const uuid = require("uuid");
console.log("uuid:", uuid.v4());
```

后续需要安装其他模块，也都在终端中，通过cd命令进入相应的项目目录。

> 之所以要用--no-bin-links选项，是因为很多npm模块会在安装时链接一些可执行脚本到node\_modules/.bin目录，但是Android的内部存储分区(sdcard)的文件系统不支持符号链接，因此我们需要使用该选项来禁用它。但是与此同时，我们常常会在npm脚本中用到这些可执行文件，例如安装webpack后运行webpack命令，安装react后运行react-scripts命令，此时只能执行具体路径的js文件来代替，比如用node node\_modules/webpack/bin/webpack.js来代替。另外一个方案是将默认脚本文件夹迁移到app私有目录，这里的文件系统是支持符合链接的，你可以在设置中修改默认脚本文件夹为”~“，但是需要注意，私有目录会在卸载APP后被删除

## 安装npm全局模块

Pro 9内置的npm也可安装全局模块，比如typescript编译ts文件，webpack-cli打包js文件等。

在终端中执行`npm i -g typescript`即可安装typescript模块，之后就可以在终端中执行`tsc`命令来编译ts文件。

> 注意！请勿升级内置的npm版本，否则可能遇到意料之外的问题；另外安装全局模块时不能用--no-bin-links参数，否则将无法找到相应的命令。

## 调用Java/Android API

Pro 9提供了全局对象$autojs，提供一些特殊的API，比如调用Java API。

```javascript
"nodejs";
// 获取$java对象，用于和Java交互
const $java = $autojs.java;
// 加载Java/Android类
const StringBuilder = $java.findClass('java.lang.StringBuilder');
// 创建这个类的对象
const sb = new StringBuilder();
// 调用这个类的方法
sb.append("Hello");
sb.append(2);
console.log(sb.toString());
```

除了findClass外，$java提供了调用Java方法时切换线程等API，参见$java对象的文档

除了这种比较原始的方式外，Pro 9提供了rhino模块，用于提供类似Pro 8中rhino引擎类似的和Java交互的方式：

```javascript
"nodejs";
// 调用install后，可以直接java.*, android.*等来访问Java类
require('rhino').install();
 
const StringBuilder = java.lang.StringBuilder;
const sb = new StringBuilder();
sb.append(android.util.Base64.decode("YXV0b2pz", 0));
console.log(sb.toString());
```

> 暂时还不支持importClass/importPackage等函数；也不支持JavaAdapter。

有关Java/Android交互的更多信息，请等待后续单独章节展开。

# 线程与线程模型

## 单线程与多线程

Node.js使用遵循带有事件循环的单线程模型，在Pro 9中也是如此，因此你不能像Pro 8那样使用threads模块启动新线程。

大多数情况你也不必使用线程，一些耗时操作，比如findImage、click等都被封装为异步操作，完全可以并行执行；调用一些Java API时，若这些API是异步操作，也可以指定Java函数执行的线程，比如：

```javascript
"nodejs";
require('rhino').install();
const path = require('path');
 
const BitmapFactory = android.graphics.BitmapFactory;
// 当前目录下的test.png文件
const file = path.join(__dirname, "./test.png");
 
async function main() {
    // 调用 BitmapFactory.decodeFile(file)来解码图片文件为Bitmap
    // 这是一个耗时操作，我们指定在io线程执行
    const bitmap = await BitmapFactory.decodeFile.invoke(null, [file], 'io');
    console.log(bitmap);
    bitmap.recycle();
}
main();
```

如果以上均不能满足你的需求，你需要纯JavaScript计算逻辑运行于单独的线程，那么需要使用Node.js的`worker_threads`模块，参见Node.js文档和网上相关资料。`worker_thread`不像Pro 8中的`threads`子线程那样可以和主线程共享所有公共、全局变量等，需要额外的通信，这里就不展开了。

> 目前，`worker_threads`中的子线程无法访问autojs相关的API和模块，比如`$autojs`, 只能访问Node.js内置的模块和对象。

## UI线程

默认情况下，Node.js引擎运行在非UI线程，但是这样无法操作界面相关的内容；因此Pro 9提供了UI线程的选项，通过在文件头用字符串”ui-thread”或”ui”来标识，例如：

```javascript
"nodejs ui";
const {isUiThread} = require("ui");
console.log(isUiThread());
```

“ui”和”ui-thread”是有区别的：

* ui: 用于显示界面（Activity）的情况，比如启动后展示一个Web页面用于用户操作，参见UI模块的文档。
* ui-thread: 不在启动时显示一个新页面，但是代码运行在UI线程，一般用于无界面的代码中显示和控制悬浮
  窗，参见悬浮窗模块的文档。

另外，若在非UI线程中，偶尔需要操作UI元素，比如显示和控制対话框，则可以用前述的调用Java API时切换线程的方式来实现。比如view.setText.invoke(view, \["hello"], "ui")。

## 阅读模块文档的指引

模块的文档是通过代码生成的，阅读文档需要一些技巧，否则可能觉得文档晦涩难懂。

以app模块为例，打开`app`模块文档后，会看到一个列表：

* 接口: 接口，第一次看文档，直接跳过这部分内容。
* 变量: 本模块的变量。我们在这个列表中看到packageName，代表app模块有一个叫packageName的变量。可以用以下方式使用它：

```javascript
"nodejs";
const app = require("app");
console.log(app.packageName);
```

点击该变量的文档，可以看到前面有常量标记，表示这是一个常量，不能修改他的值，也即`app.packageName = "xxx"`会报错；类型是`string`，字符串。结合变量名可以知道，这是当前app的包名。当然后面会有变量的中文注释，只是目前还没写，得通过变量名去猜测。

* 函数: 本模块的函数。我们在这个列表中看到很多函数，比如`editFile`, `startActivity`。这些都是`app`模块的函数，以`startActivity`为例，点击其文档可以看到：

```javascript
startActivity(target: string | IntentOptionsWithRoot): Promise<void>
```

它有一个参数target，类似是`string`或`IntentOptionsWithRoot`。`string`我们都知道是字符串，也即类似Pro 8中的`app.startActivity("console")`的用法。那么`IntentOptionsWithRoot`呢？

点击`IntentOptionsWithRoot`可以看到`IntentOptionsWithRoot`的文档。先看Properties这一栏，是描述该接口的属性，有`root`这个boolean属性，前面有Optional标签，表示是可选属性；再看前面的继承关系，表示IntentOptionsWithRoot继承于IntentOptions，跳转到`IntentOptions`，可以看到它有很多属性，比如string类型的action。其实也可以不跳转过去，勾选右上角的Inherited，可以看到所有继承过来的属性。

综合起来，我们可以知道IntentOptionsWithRoot是要我们传入一个对象，这个对象可以有root、action等可选属性，因此我们可以这样写：

```javascript
"nodejs";
const app = require("app");
app.startActivity({
    "root": false,
    "action": "android.intent.action.VIEW",
    "data": "https://pro.autojs.org",
});
```

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/accessibility.StrokeDescription.md
---
# 类: StrokeDescription
[accessibility](/v9/generated/modules/accessibility.md).StrokeDescription

手势描述

Gesture description

## 目录

### Constructors

* [constructor](#constructor)

### 属性

* `private` [points](#points)
* `private` [duration](#duration)
* `private` [delay](#delay)

### 方法

* [toAndroidStrokeDescription](#toAndroidStrokeDescription)

## Constructors

### constructor

• **new StrokeDescription**(`points`, `duration`, `delay?`)

构造手势描述

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `value` | [Point\[\]](/v9/generated/interfaces/accessibility.Point.md)| 路径，由点的数组构成。 |
| `value` | `number` | 滑动时长，单位毫秒。 |
| `value` | `number` | 滑动开始延迟，单位毫秒。 |

## 属性

### points

• `Readonly` **points**: [Point\[\]](/v9/generated/interfaces/accessibility.Point.md)

路径，由点的数组构成。

***

### duration

• `Readonly` **duration**: `number`

滑动时长，单位毫秒。

***

### delay

• `Readonly` **ddelay**: `number`

滑动开始延迟，单位毫秒。

***

## 方法

### toAndroidStrokeDescription

▸ **toAndroidStrokeDescription**()

#### 返回值

[`StrokeDescription`](accessibility.StrokeDescription.md)

***

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/color.Color.md'
---
# 类: Color
[color](/v9/generated/modules/color.md).Color

一个32位的颜色值，以ARGB格式表示。

## 目录

### Constructors

* [constructor](/v9/generated/classes/color.Color.md#constructor)

### Accessors

* [alpha](/v9/generated/classes/color.Color.md#alpha)
* [blue](/v9/generated/classes/color.Color.md#blue)
* [green](/v9/generated/classes/color.Color.md#green)
* [opacity](/v9/generated/classes/color.Color.md#opacity)
* [red](/v9/generated/classes/color.Color.md#red)
* [value](/v9/generated/classes/color.Color.md#value)

### 方法

* [equals](/v9/generated/classes/color.Color.md#equals)
* [isSimilarTo](/v9/generated/classes/color.Color.md#issimilarto)
* [toString](/v9/generated/classes/color.Color.md#tostring)
* [withAlpha](/v9/generated/classes/color.Color.md#withalpha)
* [withBlue](/v9/generated/classes/color.Color.md#withblue)
* [withGreen](/v9/generated/classes/color.Color.md#withgreen)
* [withOpacity](/v9/generated/classes/color.Color.md#withopacity)
* [withRed](/v9/generated/classes/color.Color.md#withred)
* [fromARGB](/v9/generated/classes/color.Color.md#fromargb)
* [fromGray](/v9/generated/classes/color.Color.md#fromgray)
* [fromRGB](/v9/generated/classes/color.Color.md#fromrgb)
* [fromRGBO](/v9/generated/classes/color.Color.md#fromrgbo)
* [parse](/v9/generated/classes/color.Color.md#parse)

## Constructors

### constructor

• **new Color**(`value`)

从整数颜色值构造一个颜色。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `value` | `number` | 整数颜色值，格式为0xAARRGGBB |

## Accessors

### alpha

• `get` **alpha**(): `number`

这个颜色的alpha值，以8位整数表示。

值为0表示这个颜色完全透明，值为255表示这个颜色完全不透明。

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const color = new Color(0xFF000000); // black
console.log(color.alpha); // 255
```

#### 返回值

`number`

***

### blue

• `get` **blue**(): `number`

这个颜色的blue值，以8位整数表示。

#### 返回值

`number`

***

### green

• `get` **green**(): `number`

这个颜色的green值，以8位整数表示。

#### 返回值

`number`

***

### opacity

• `get` **opacity**(): `number`

这个颜色的alpha值，以浮点数表示。

值为0.0表示这个颜色完全透明，值为1.0表示这个颜色完全不透明。

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const color = new Color(0xFF000000); // black
console.log(color.opacity); // 1.0
```

#### 返回值

`number`

***

### red

• `get` **red**(): `number`

The red channel of this color in an 8 bit value.

#### 返回值

`number`

***

### value

• `get` **value**(): `number`

这个颜色的32位值。

* 第24-31位为alpha值
* 第16-23位为red值
* 第8-15位为green值
* 第0-7位为blue值

#### 返回值

`number`

## 方法

### equals

▸ **equals**(`obj`): `boolean`

比较两个颜色是否完全相等。

#### 参数

| 名称  | 类型                                                         |
| :---- | :----------------------------------------------------------- |
| `obj` | [`Color`](/v9/generated/classes/color.Color.md) |

#### 返回值

`boolean`

两个颜色是否完全相等

***

### isSimilarTo

▸ **isSimilarTo**(`other`, `options?`): `boolean`

比较当前颜色是否与另一个颜色相似。

**`参见`**

[CompareColorOptions](/v9/generated/interfaces/color.CompareColorOptions.md)

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const black = new Color(0xFF000000);
const white = Color.parse('#FFFFFF');
const black09 = Color.parse('#090909');
console.log(black.isSimilarTo(white)) // false
console.log(black.isSimilarTo(black09)) // true
console.log(black.isSimilarTo(black09, { threshold: 5 })) // false
```

#### 参数

| 名称       | 类型                                                         | 描述         |
| :--------- | :----------------------------------------------------------- | :----------- |
| `other`    | [`Color`](/v9/generated/classes/color.Color.md) | 要比较的颜色 |
| `options?` | [`CompareColorOptions`](/v9/generated/interfaces/color.CompareColorOptions.md) | 比较选项     |

#### 返回值

`boolean`

两个颜色是否相似

***

### toString

▸ **toString**(): `string`

#### 返回值

`string`

***

### withAlpha

▸ **withAlpha**(`a`): [`Color`](/v9/generated/classes/color.Color.md)

返回一个新的颜色，将原来的颜色的alpha通道的值设置为`a`

超出范围的值会有意外问题。

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const color = new Color(0xFF000000); // black
console.log(color.withAlpha(0x77).toString()) // 0x77000000
```

#### 参数

| 名称 | 类型     | 描述                       |
| :--- | :------- | :------------------------- |
| `a`  | `number` | alpha通道的值，范围为0-255 |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### withBlue

▸ **withBlue**(`b`): [`Color`](/v9/generated/classes/color.Color.md)

返回一个新的颜色，将原来的颜色的blue通道的值设置为`b`。

超出范围的值会有意外问题。

#### 参数

| 名称 | 类型     | 描述                      |
| :--- | :------- | :------------------------ |
| `b`  | `number` | blue通道的值，范围为0-255 |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### withGreen

▸ **withGreen**(`g`): [`Color`](/v9/generated/classes/color.Color.md)

返回一个新的颜色，将原来的颜色的green通道的值设置为`g`。

超出范围的值会有意外问题。

#### 参数

| 名称 | 类型     | 描述                       |
| :--- | :------- | :------------------------- |
| `g`  | `number` | green通道的值，范围为0-255 |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### withOpacity

▸ **withOpacity**(`opacity`): [`Color`](/v9/generated/classes/color.Color.md)

返回一个新的颜色，将原来的颜色的alpha通道的透明度值设置为`opacity`。

超出范围的值会有意外问题。

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const color = new Color(0xFF000000); // black
console.log(color.withOpacity(0.5).toString()) // 0x7F000000
```

#### 参数

| 名称      | 类型     | 描述                    |
| :-------- | :------- | :---------------------- |
| `opacity` | `number` | 透明度值，范围为0.0-1.0 |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### withRed

▸ **withRed**(`r`): [`Color`](/v9/generated/classes/color.Color.md)

返回一个新的颜色，将原来的颜色的red通道的值设置为`r`。

超出范围的值会有意外问题。

#### 参数

| 名称 | 类型     | 描述                     |
| :--- | :------- | :----------------------- |
| `r`  | `number` | red通道的值，范围为0-255 |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### fromARGB

▸ `Static` **fromARGB**(`a`, `r`, `g`, `b`): [`Color`](/v9/generated/classes/color.Color.md)

从四个颜色通道构造一个颜色。

* `a`是透明度，0表示透明，255表示完全不透明。
* `r`是\[红]，范围为0-255。
* `g`是\[绿]，范围为0-255。
* `b`是\[蓝]，范围为0-255。

超出范围的值会取255的模以保证在255范围内。

**`参见`**

[fromRGBO](/v9/generated/classes/color.Color.md#fromrgbo) which takes the alpha value as a floating point value.

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const red = Color.fromARGB(255, 255, 0, 0);
console.log(red.toString()) // Color(0xFFFF0000)
```

#### 参数

| 名称 | 类型     | 描述                       |
| :--- | :------- | :------------------------- |
| `a`  | `number` | alpha通道的值，范围为0-255 |
| `r`  | `number` | red通道的值，范围为0-255   |
| `g`  | `number` | green通道的值，范围为0-255 |
| `b`  | `number` | blue通道的值，范围为0-255  |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### fromGray

▸ `Static` **fromGray**(`gray`): [`Color`](/v9/generated/classes/color.Color.md)

根据灰度值构造颜色，alpha通道为255，R、G、B通道均为gray的值。

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const gray = Color.fromGray(128);
console.log(gray.toString()) // Color(0xFF808080)
```

#### 参数

| 名称   | 类型     | 描述   |
| :----- | :------- | :----- |
| `gray` | `number` | 灰度值 |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色对象

***

### fromRGB

▸ `Static` **fromRGB**(`r`, `g`, `b`): [`Color`](/v9/generated/classes/color.Color.md)

从RGB颜色通道构造一个不透明颜色（alpha通道为255）。

**`示例`**

```javascript
"nodejs";
const { Color } = require('color');
const red = Color.fromRGBO(255, 0, 0);
console.log(red.toString()) // Color(0xFFFF0000)
```

#### 参数

| 名称 | 类型     | 描述        |
| :--- | :------- | :---------- |
| `r`  | `number` | red value   |
| `g`  | `number` | green value |
| `b`  | `number` | blue value  |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

a new color

***

### fromRGBO

▸ `Static` **fromRGBO**(`r`, `g`, `b`, `opacity`): [`Color`](/v9/generated/classes/color.Color.md)

从红、绿、蓝和透明度通道构造一个颜色。

* `r`是\[红]，范围为0-255。
* `g`是\[绿]，范围为0-255。
* `b`是\[蓝]，范围为0-255。
* `opacity`是透明度通道的值，0表示透明，1表示完全不透明。

超出范围的值会取255的模以保证在255范围内。

**`参见`**

[fromARGB](/v9/generated/classes/color.Color.md#fromargb) which takes the opacity as an integer value.

#### 参数

| 名称      | 类型     | 描述                       |
| :-------- | :------- | :------------------------- |
| `r`       | `number` | red通道的值，范围为0-255   |
| `g`       | `number` | green通道的值，范围为0-255 |
| `b`       | `number` | blue通道的值，范围为0-255  |
| `opacity` | `number` | alpha通道的值，范围为0-1   |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

新的颜色

***

### parse

▸ `Static` **parse**(`color`): `null` | [`Color`](/v9/generated/classes/color.Color.md)

解析十六进制字符串构造一个颜色。若解析失败，则返回null。

**`示例`**

```javascript
const { Color } = require('color');
const color = Color.parse('#ff0000');
console.log(color.toString());
```

#### 参数

| 名称    | 类型     | 描述                                 |
| :------ | :------- | :----------------------------------- |
| `color` | `string` | 颜色字符串，格式为#RRGGBB或#AARRGGBB |

#### 返回值

`null` | [`Color`](/v9/generated/classes/color.Color.md)

新的颜色，或者null

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/color.HSLColor.md'
---
# 类: HSLColor
[color](/v9/generated/modules/color.md).HSLColor

A color represented using \[alpha], \[hue], \[saturation], and \[lightness].

An \[HSLColor] is represented in a parameter space that's based up human perception of colored light. The representation is useful for some color computations (e.g., combining colors of light), because interpolation and picking of colors as red, green, and blue channels doesn't always produce intuitive results.

HSL is a perceptual color model, placing fully saturated colors around a circle (conceptually) at a lightness of 0.5, with a lightness of 0.0 being completely black, and a lightness of 1.0 being completely white. As the lightness increases or decreases from 0.5, the apparent saturation decreases proportionally (even though the \[saturation] parameter hasn't changed).

See also:

* \[HSVColor], a color that uses a color space based on human perception of pigments (e.g. paint and printer's ink).
* [HSV and HSL](https://en.wikipedia.org/wiki/HSL_and_HSV) Wikipedia article, which this implementation is based upon.

## 目录

### 属性

* [alpha](/v9/generated/classes/color.HSLColor.md#alpha)
* [hue](/v9/generated/classes/color.HSLColor.md#hue)
* [lightness](/v9/generated/classes/color.HSLColor.md#lightness)
* [saturation](/v9/generated/classes/color.HSLColor.md#saturation)

### 方法

* [\_scaleAlpha](/v9/generated/classes/color.HSLColor.md#_scalealpha)
* [equals](/v9/generated/classes/color.HSLColor.md#equals)
* [toColor](/v9/generated/classes/color.HSLColor.md#tocolor)
* [toString](/v9/generated/classes/color.HSLColor.md#tostring)
* [withAlpha](/v9/generated/classes/color.HSLColor.md#withalpha)
* [withHue](/v9/generated/classes/color.HSLColor.md#withhue)
* [withLightness](/v9/generated/classes/color.HSLColor.md#withlightness)
* [withSaturation](/v9/generated/classes/color.HSLColor.md#withsaturation)
* [fromAHSL](/v9/generated/classes/color.HSLColor.md#fromahsl)
* [fromColor](/v9/generated/classes/color.HSLColor.md#fromcolor)
* [lerp](/v9/generated/classes/color.HSLColor.md#lerp)

## 属性

### alpha

• `Readonly` **alpha**: `number`

Alpha, from 0.0 to 1.0. The describes the transparency of the color. A value of 0.0 is fully transparent, and 1.0 is fully opaque.

***

### hue

• `Readonly` **hue**: `number`

Hue, from 0.0 to 360.0. Describes which color of the spectrum is represented. A value of 0.0 represents red, as does 360.0. Values in between go through all the hues representable in RGB. You can think of this as selecting which color filter is placed over a light.

***

### lightness

• `Readonly` **lightness**: `number`

Lightness, from 0.0 to 1.0. The lightness of a color describes how bright a color is. A value of 0.0 indicates black, and 1.0 indicates white. You can think of this as the intensity of the light behind the filter. As the lightness approaches 0.5, the colors get brighter and appear more saturated, and over 0.5, the colors start to become less saturated and approach white at 1.0.

***

### saturation

• `Readonly` **saturation**: `number`

Saturation, from 0.0 to 1.0. This describes how colorful the color is. 0.0 implies a shade of grey (i.e. no pigment), and 1.0 implies a color as vibrant as that hue gets. You can think of this as the purity of the color filter over the light.

## 方法

### \_scaleAlpha

▸ **\_scaleAlpha**(`factor`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

#### 参数

| 名称     | 类型     |
| :------- | :------- |
| `factor` | `number` |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### equals

▸ **equals**(`other`): `boolean`

#### 参数

| 名称    | 类型  |
| :------ | :---- |
| `other` | `any` |

#### 返回值

`boolean`

***

### toColor

▸ **toColor**(): [`Color`](/v9/generated/classes/color.Color.md)

Returns this HSL color in RGB.

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

***

### toString

▸ **toString**(): `String`

#### 返回值

`String`

***

### withAlpha

▸ **withAlpha**(`alpha`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

Returns a copy of this color with the alpha parameter replaced with the given value.

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `alpha` | `number` |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### withHue

▸ **withHue**(`hue`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

Returns a copy of this color with the \[hue] parameter replaced with the given value.

#### 参数

| 名称  | 类型     |
| :---- | :------- |
| `hue` | `number` |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### withLightness

▸ **withLightness**(`lightness`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

Returns a copy of this color with the \[lightness] parameter replaced with the given value.

#### 参数

| 名称        | 类型     |
| :---------- | :------- |
| `lightness` | `number` |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### withSaturation

▸ **withSaturation**(`saturation`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

Returns a copy of this color with the \[saturation] parameter replaced with the given value.

#### 参数

| 名称         | 类型     |
| :----------- | :------- |
| `saturation` | `number` |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### fromAHSL

▸ `Static` **fromAHSL**(`alpha`, `hue`, `saturation`, `lightness`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

Creates a color.

All the arguments must not be null and be in their respective ranges. See the fields for each parameter for a description of their ranges.

#### 参数

| 名称         | 类型     |
| :----------- | :------- |
| `alpha`      | `number` |
| `hue`        | `number` |
| `saturation` | `number` |
| `lightness`  | `number` |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### fromColor

▸ `Static` **fromColor**(`color`): [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

Creates an \[HSLColor] from an RGB \[Color].

This constructor does not necessarily round-trip with \[toColor] because of floating point imprecision.

#### 参数

| 名称    | 类型                                                         |
| :------ | :----------------------------------------------------------- |
| `color` | [`Color`](/v9/generated/classes/color.Color.md) |

#### 返回值

[`HSLColor`](/v9/generated/classes/color.HSLColor.md)

***

### lerp

▸ `Static` **lerp**(`a`, `b`, `t`): `null` | \[`HSLColor`]\(/v9/generated/classes/color.HSLColor.md)

Linearly interpolate between two HSLColors.

The colors are interpolated by interpolating the \[alpha], \[hue], \[saturation], and \[lightness] channels separately, which usually leads to a more pleasing effect than \[Color.lerp] (which interpolates the red, green, and blue channels separately).

If either color is null, this function linearly interpolates from a transparent instance of the other color. This is usually preferable to interpolating from \[Colors.transparent] (`const Color(0x00000000)`) since that will interpolate from a transparent red and cycle through the hues to match the target color, regardless of what that color's hue is.

The `t` argument represents position on the timeline, with 0.0 meaning that the interpolation has not started, returning `a` (or something equivalent to `a`), 1.0 meaning that the interpolation has finished, returning `b` (or something equivalent to `b`), and values between them meaning that the interpolation is at the relevant point on the timeline between `a` and `b`. The interpolation can be extrapolated beyond 0.0 and 1.0, so negative values and values greater than 1.0 are valid (and can easily be generated by curves such as \[Curves.elasticInOut]).

Values outside of the valid range for each channel will be clamped.

Values for `t` are usually obtained from an \[Animation\<double>], such as an \[AnimationController].

#### 参数

| 名称 | 类型                                                         |
| :--- | :----------------------------------------------------------- |
| `a`  | `null` | [`HSLColor`](/v9/generated/classes/color.HSLColor.md) |
| `b`  | `null` | [`HSLColor`](/v9/generated/classes/color.HSLColor.md) |
| `t`  | `number`                                                     |

#### 返回值

`null` | [`HSLColor`](/v9/generated/classes/color.HSLColor.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/color.HSVColor.md'
---
# 类: HSVColor
[color](/v9/generated/modules/color.md).HSVColor

A color represented using \[alpha], \[hue], \[saturation], and \[value]. An \[HSVColor] is represented in a parameter space that's based on human perception of color in pigments (e.g. paint and printer's ink). The representation is useful for some color computations (e.g. rotating the hue through the colors), because interpolation and picking of colors as red, green, and blue channels doesn't always produce intuitive results. The HSV color space models the way that different pigments are perceived when mixed. The hue describes which pigment is used, the saturation describes which shade of the pigment, and the value resembles mixing the pigment with different amounts of black or white pigment. See also:

* \[HSLColor], a color that uses a color space based on human perception of colored light.
* [HSV and HSL](https://en.wikipedia.org/wiki/HSL_and_HSV) Wikipedia article, which this implementation is based upon.

## 目录

### 属性

* [alpha](/v9/generated/classes/color.HSVColor.md#alpha)
* [hue](/v9/generated/classes/color.HSVColor.md#hue)
* [saturation](/v9/generated/classes/color.HSVColor.md#saturation)
* [value](/v9/generated/classes/color.HSVColor.md#value)

### 方法

* [\_scaleAlpha](/v9/generated/classes/color.HSVColor.md#_scalealpha)
* [equals](/v9/generated/classes/color.HSVColor.md#equals)
* [toColor](/v9/generated/classes/color.HSVColor.md#tocolor)
* [toString](/v9/generated/classes/color.HSVColor.md#tostring)
* [withAlpha](/v9/generated/classes/color.HSVColor.md#withalpha)
* [withHue](/v9/generated/classes/color.HSVColor.md#withhue)
* [withSaturation](/v9/generated/classes/color.HSVColor.md#withsaturation)
* [withValue](/v9/generated/classes/color.HSVColor.md#withvalue)
* [fromAHSV](/v9/generated/classes/color.HSVColor.md#fromahsv)
* [fromColor](/v9/generated/classes/color.HSVColor.md#fromcolor)
* [lerp](/v9/generated/classes/color.HSVColor.md#lerp)

## 属性

### alpha

• `Readonly` **alpha**: `number`

Alpha, from 0.0 to 1.0. The describes the transparency of the color. A value of 0.0 is fully transparent, and 1.0 is fully opaque.

***

### hue

• `Readonly` **hue**: `number`

Hue, from 0.0 to 360.0. Describes which color of the spectrum is represented. A value of 0.0 represents red, as does 360.0. Values in between go through all the hues representable in RGB. You can think of this as selecting which pigment will be added to a color.

***

### saturation

• `Readonly` **saturation**: `number`

Saturation, from 0.0 to 1.0. This describes how colorful the color is. 0.0 implies a shade of grey (i.e. no pigment), and 1.0 implies a color as vibrant as that hue gets. You can think of this as the equivalent of how much of a pigment is added.

***

### value

• `Readonly` **value**: `number`

Value, from 0.0 to 1.0. The "value" of a color that, in this context, describes how bright a color is. A value of 0.0 indicates black, and 1.0 indicates full intensity color. You can think of this as the equivalent of removing black from the color as value increases.

## 方法

### \_scaleAlpha

▸ **\_scaleAlpha**(`factor`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

#### 参数

| 名称     | 类型     |
| :------- | :------- |
| `factor` | `number` |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### equals

▸ **equals**(`other`): `boolean`

#### 参数

| 名称    | 类型  |
| :------ | :---- |
| `other` | `any` |

#### 返回值

`boolean`

***

### toColor

▸ **toColor**(): [`Color`](/v9/generated/classes/color.Color.md)

Returns this color in RGB.

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

***

### toString

▸ **toString**(): `string`

#### 返回值

`string`

***

### withAlpha

▸ **withAlpha**(`alpha`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Returns a copy of this color with the \[alpha] parameter replaced with the given value.

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `alpha` | `number` |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### withHue

▸ **withHue**(`hue`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Returns a copy of this color with the \[hue] parameter replaced with the given value.

#### 参数

| 名称  | 类型     |
| :---- | :------- |
| `hue` | `number` |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### withSaturation

▸ **withSaturation**(`saturation`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Returns a copy of this color with the \[saturation] parameter replaced with the given value.

#### 参数

| 名称         | 类型     |
| :----------- | :------- |
| `saturation` | `number` |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### withValue

▸ **withValue**(`value`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Returns a copy of this color with the \[value] parameter replaced with the given value.

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### fromAHSV

▸ `Static` **fromAHSV**(`alpha`, `hue`, `saturation`, `value`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Creates a color.

All the arguments must not be null and be in their respective ranges. See the fields for each parameter for a description of their ranges.

#### 参数

| 名称         | 类型     |
| :----------- | :------- |
| `alpha`      | `number` |
| `hue`        | `number` |
| `saturation` | `number` |
| `value`      | `number` |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### fromColor

▸ `Static` **fromColor**(`color`): [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Creates an \[HSVColor] from an RGB \[Color].

This constructor does not necessarily round-trip with \[toColor] because of floating point imprecision.

#### 参数

| 名称    | 类型                                                         |
| :------ | :----------------------------------------------------------- |
| `color` | [`Color`](/v9/generated/classes/color.Color.md) |

#### 返回值

[`HSVColor`](/v9/generated/classes/color.HSVColor.md)

***

### lerp

▸ `Static` **lerp**(`a`, `b`, `t`): `undefined` | [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

Linearly interpolate between two HSVColors.

The colors are interpolated by interpolating the \[alpha], \[hue], \[saturation], and \[value] channels separately, which usually leads to a more pleasing effect than \[Color.lerp] (which interpolates the red, green, and blue channels separately).

If either color is null, this function linearly interpolates from a transparent instance of the other color. This is usually preferable to interpolating from \[Colors.transparent] (`const Color(0x00000000)`) since that will interpolate from a transparent red and cycle through the hues to match the target color, regardless of what that color's hue is.

Values outside of the valid range for each channel will be clamped.

#### 参数

| 名称 | 类型                                                         |
| :--- | :----------------------------------------------------------- |
| `a`  | `null` | [`HSVColor`](/v9/generated/classes/color.HSVColor.md) |
| `b`  | `null` | [`HSVColor`](/v9/generated/classes/color.HSVColor.md) |
| `t`  | `number`                                                     |

#### 返回值

`undefined` | [`HSVColor`](/v9/generated/classes/color.HSVColor.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/device.Device.md'
---
# 类: Device
[device](/v9/generated/modules/device.md).Device

Device类提供获取设备状态、信息、调整设备亮度等方法。它是一个单例，只需要通过`const { device } = require('device')`即可获取实例。

## 继承关系

* `EventEmitter`

  ↳ **`Device`**

## 目录

### Accessors

* [androidId](/v9/generated/classes/device.Device.md#androidid)
* [battery](/v9/generated/classes/device.Device.md#battery)
* [batteryPluggedTypes](/v9/generated/classes/device.Device.md#batterypluggedtypes)
* [bootloader](/v9/generated/classes/device.Device.md#bootloader)
* [brightness](/v9/generated/classes/device.Device.md#brightness)
* [brightnessMode](/v9/generated/classes/device.Device.md#brightnessmode)
* [buildId](/v9/generated/classes/device.Device.md#buildid)
* [cpuApis](/v9/generated/classes/device.Device.md#cpuapis)
* [display](/v9/generated/classes/device.Device.md#display)
* [displayMetrics](/v9/generated/classes/device.Device.md#displaymetrics)
* [externalStorageDirectory](/v9/generated/classes/device.Device.md#externalstoragedirectory)
* [fingerprint](/v9/generated/classes/device.Device.md#fingerprint)
* [hardware](/v9/generated/classes/device.Device.md#hardware)
* [imei](/v9/generated/classes/device.Device.md#imei)
* [macAddress](/v9/generated/classes/device.Device.md#macaddress)
* [memoryInfo](/v9/generated/classes/device.Device.md#memoryinfo)
* [product](/v9/generated/classes/device.Device.md#product)
* [screenHeight](/v9/generated/classes/device.Device.md#screenheight)
* [screenWidth](/v9/generated/classes/device.Device.md#screenwidth)
* [serial](/v9/generated/classes/device.Device.md#serial)

### 方法

* [cancelVibration](/v9/generated/classes/device.Device.md#cancelvibration)
* [getVolume](/v9/generated/classes/device.Device.md#getvolume)
* [getVolumeRange](/v9/generated/classes/device.Device.md#getvolumerange)
* [setVolume](/v9/generated/classes/device.Device.md#setvolume)
* [vibrate](/v9/generated/classes/device.Device.md#vibrate)

## Accessors

### androidId

• `get` **androidId**(): `string`

Android ID。

**`参见`**

https://developer.android.google.cn/reference/android/provider/Settings.Secure#ANDROID\_ID

#### 返回值

`string`

***

### battery

• `get` **battery**(): `number`

设备的当前电量，为0~100之间的浮点数。

**`示例`**

```javascript
"nodejs";
const { device } = require('device');
console.log(device.battery);
```

#### 返回值

`number`

***

### batteryPluggedTypes

• `get` **batteryPluggedTypes**(): [`PluggedType`](/v9/generated/modules/device.md#pluggedtype)\[]

设备当前连接的电源类型，例如`["usb"]`表示连接了USB电源，`["ac"]`表示连接了交流电源，`["wireless", "usb"]`表示同时连接了无线和USB电源。如果设备没有连接电源，则返回空数组。

**`示例`**

```javascript
"nodejs";
const { device } = require('device');
console.log(device.batteryPluggedTypes);
```

#### 返回值

[`PluggedType`](/v9/generated/modules/device.md#pluggedtype)\[]

***

### bootloader

• `get` **bootloader**(): `string`

系统Bootloader的版本号。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#BOOTLOADER

#### 返回值

`string`

***

### brightness

• `get` **brightness**(): `number`

设备的亮度，范围为0-255。

```javascript
"nodejs";

const { device } = require("device");
// 打印当前的亮度
console.log(device.brightness);
// 设置亮度为255
device.brightness = 255;
```

**`参见`**

https://developer.android.google.cn/reference/android/provider/Settings.System#SCREEN\_BRIGHTNESS

#### 返回值

`number`

• `set` **brightness**(`value`): `void`

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`void`

***

### brightnessMode

• `get` **brightnessMode**(): [`BrightnessMode`](/v9/generated/enums/device.BrightnessMode.md)

设备的亮度模式。

```javascript
"nodejs";

const { device, BrightnessMode } = require("device");
// 打印当前的亮度模式
console.log(device.brightnessMode);
// 设置亮度为自动亮度
device.brightnessMode = BrightnessMode.AUTOMATIC;
```

**`参见`**

https://developer.android.google.cn/reference/android/provider/Settings.System#SCREEN\_BRIGHTNESS\_MODE

#### 返回值

[`BrightnessMode`](/v9/generated/enums/device.BrightnessMode.md)

• `set` **brightnessMode**(`value`): `void`

#### 参数

| 名称    | 类型                                                         |
| :------ | :----------------------------------------------------------- |
| `value` | [`BrightnessMode`](/v9/generated/enums/device.BrightnessMode.md) |

#### 返回值

`void`

***

### buildId

• `get` **buildId**(): `string`

设备的构建ID。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#ID

#### 返回值

`string`

***

### cpuApis

• `get` **cpuApis**(): `string`\[]

设备支持的CPU架构的数组，比如`['arm64-v8a', 'armeabi-v7a']`。

#### 返回值

`string`\[]

***

### display

• `get` **display**(): `string`

显示给用户的构建ID。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#DISPLAY

#### 返回值

`string`

***

### displayMetrics

• `get` **displayMetrics**(): [`DisplayMetrics`](/v9/generated/interfaces/device.DisplayMetrics.md)

设置的显示相关信息，比如宽度、高度、像素密度等。

**`参见`**

[DisplayMetrics](/v9/generated/interfaces/device.DisplayMetrics.md)

#### 返回值

[`DisplayMetrics`](/v9/generated/interfaces/device.DisplayMetrics.md)

***

### externalStorageDirectory

• `get` **externalStorageDirectory**(): `string`

返回主要的共享/外部存储目录路径，对于现代的Android设备里面，一般指内部存储的目录路径。

注意：不要被这里的“外部”这个词弄糊涂了。最好将此目录视为媒体/共享存储。它是一个文件系统，可以保存相对大量的数据，并且在所有应用程序之间共享（不强制执行权限）。传统上这是一张 SD 卡，但它也可以作为设备中的内置存储实现，与受保护的内部存储不同，并且可以作为文件系统安装在计算机上。

在具有多个用户的设备上（如 UserManager 所述），每个用户都有自己的隔离共享存储。应用程序只能访问它们正在运行的用户的共享存储。

在具有多个共享/外部存储目录的设备中，此目录表示用户将与之交互的主存储。可通过 Context.getExternalFilesDirs(String)、Context.getExternalCacheDirs() 和 Context.getExternalMediaDirs() 访问辅助存储。

应用程序不应该直接使用这个顶级目录，以免污染用户的根命名空间。应用程序私有的任何文件都应放置在 Context.getExternalFilesDir 返回的目录中，如果卸载应用程序，系统将负责删除该目录。其他共享文件应放置在 getExternalStoragePublicDirectory 返回的目录之一中。

写入此路径需要 Manifest.permission.WRITE\_EXTERNAL\_STORAGE 权限，从 Build.VERSION\_CODES.KITKAT 开始，读取权限需要 Manifest.permission.READ\_EXTERNAL\_STORAGE 权限，如果您拥有写入权限，则会自动授予该权限。

从 Build.VERSION\_CODES.KITKAT 开始，如果您的应用程序只需要存储内部数据，请考虑使用不需要读取或写入权限的 Context.getExternalFilesDir(String)、Context.getExternalCacheDir() 或 Context.getExternalMediaDirs()。

此路径可能会在平台版本之间发生变化，因此应用程序应该只保留相对路径。

**`参见`**

https://developer.android.google.cn/reference/android/os/Environment#getExternalStorageDirectory()

#### 返回值

`string`

***

### fingerprint

• `get` **fingerprint**(): `string`

构建的唯一标识字符串。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#FINGERPRINT

#### 返回值

`string`

***

### hardware

• `get` **hardware**(): `string`

硬件名称。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#HARDWARE

#### 返回值

`string`

***

### imei

• `get` **imei**(): `null` | `string`

设备的IMEI。若无权限获取，可能抛出异常；从Android 10开始，应用不再有权限获取IMEI。

**`参见`**

https://developer.android.google.cn/reference/android/telephony/TelephonyManager#getDeviceId()

#### 返回值

`null` | `string`

***

### macAddress

• `get` **macAddress**(): `null` | `string`

获取设备的 MAC 地址。如果无法获取（例如没有网络权限或设备不支持），则返回 `null`。

**`注意`**

从 Android 6.0 (API 23) 开始，应用无法获取设备的真实 MAC 地址。此方法可能返回 `02:00:00:00:00:00` 或类似的随机化 MAC 地址。

**`示例`**

```javascript
"nodejs";
const { device } = require('device');
const macAddress = device.macAddress;
if (macAddress) {
    console.log("MAC 地址:", macAddress);
} else {
    console.log("无法获取 MAC 地址");
}
```

#### 返回值

`null` | `string`

设备的 MAC 地址，如果无法获取则返回 `null`

***

### memoryInfo

• `get` **memoryInfo**(): [`MemoryInfo`](/v9/generated/interfaces/device.MemoryInfo.md)

获取当前设备的内存信息， 包括总内存、可用内存、是否低内存状态等。

内存单位为字节，即byte。

**`示例`**

```javascript
"nodejs";
const { device } = require('device');
console.log(`total memory: ${device.memoryInfo.totalMem / 1024 / 1024} MB`);
console.log(device.memoryInfo);
```

**`参见`**

https://developer.android.google.cn/reference/android/app/ActivityManager#getMemoryInfo(android.app.ActivityManager.MemoryInfo)

#### 返回值

[`MemoryInfo`](/v9/generated/interfaces/device.MemoryInfo.md)

***

### product

• `get` **product**(): [`Product`](/v9/generated/interfaces/device.Product.md)

设备的产品信息，包括产品名称、设备名称、设备板名、产品品牌、产品型号。

**`示例`**

```javascript
"nodejs";
const { device } = require('device');
console.log(device.product); 
// {
//  name: 'mars',
//  device: 'mars',
//  board: 'mars',
//  brand: 'Xiaomi',
//  model: 'M2102K1AC'
// }
```

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#PRODUCT

#### 返回值

[`Product`](/v9/generated/interfaces/device.Product.md)

***

### screenHeight

• `get` **screenHeight**(): `number`

设备的屏幕高度，单位为像素。

#### 返回值

`number`

***

### screenWidth

• `get` **screenWidth**(): `number`

设备的屏幕宽度，单位为像素。

#### 返回值

`number`

***

### serial

• `get` **serial**(): `string`

设备的唯一标识符。从Android10开始，应用可能没有权限获取到此值。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#getSerial()

#### 返回值

`string`

## 方法

### cancelVibration

▸ **cancelVibration**(): `void`

取消震动。

**`参见`**

https://developer.android.google.cn/reference/android/os/Vibrator.html#cancel()

#### 返回值

`void`

***

### getVolume

▸ **getVolume**(`type`): `number`

根据类型获取音量，比如获取媒体音量为`device.getVolume("music")`。

#### 参数

| 名称   | 类型                                                         | 描述                                                         |
| :----- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `type` | [`StreamType`](/v9/generated/modules/device.md#streamtype) | 音量类型，参见[StreamType](/v9/generated/modules/device.md#streamtype) |

#### 返回值

`number`

***

### getVolumeRange

▸ **getVolumeRange**(`type`): [`StreamVolumeRange`](/v9/generated/interfaces/device.StreamVolumeRange.md)

获取给定音量类型的音量范围，比如`{min: 0, max: 15}`。

#### 参数

| 名称   | 类型                                                         | 描述                                                         |
| :----- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `type` | [`StreamType`](/v9/generated/modules/device.md#streamtype) | 音量类型，参见[StreamType](https://pro.autojs.org/docs/zh/v9/generated/modules/device.md#streamtype) |

#### 返回值

[`StreamVolumeRange`](/v9/generated/interfaces/device.StreamVolumeRange.md)

***

### setVolume

▸ **setVolume**(`type`, `volume`, `flags?`): `void`

设置音量，比如设置媒体音量为`device.setVolume("music", 10)`。

#### 参数

| 名称     | 类型                                                         | 默认值      | 描述                                                         |
| :------- | :----------------------------------------------------------- | :---------- | :----------------------------------------------------------- |
| `type`   | [`StreamType`](/v9/generated/modules/device.md#streamtype) | `undefined` | 音量类型，参见[StreamType](/v9/generated/modules/device.md#streamtype) |
| `volume` | `number`                                                     | `undefined` | 要设置的音量                                                 |
| `flags`  | `string`\[]                                                   | `[]`        | 标志位，默认为空数组。比如`['SHOW_UI', 'PLAY_SOUND', 'VIBRATE']`表示调整音量时会弹出提示框，播放提示音，并震动。Flags可选的值参见[AudioManager](https://developer.android.google.cn/reference/kotlin/android/media/AudioManager#FLAG_PLAY_SOUND)。 |

#### 返回值

`void`

***

### vibrate

▸ **vibrate**(`millis`): `void`

让设备震动一段时间，需要应用在前台时才能调用此函数。

**`参见`**

https://developer.android.google.cn/reference/android/os/Vibrator.html#vibrate(long)

#### 参数

| 名称     | 类型     | 描述               |
| :------- | :------- | :----------------- |
| `millis` | `number` | 震动时间，单位毫秒 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/device.OS.md'
---
# 类: OS
[device](/v9/generated/modules/device.md).OS

OS提供获取系统相关信息，比如系统版本号、版本名称。

**`示例`**

```javascript
const { OS } = require('device');
console.log(OS.sdkName); // e.g. "7.1"
console.log(OS.sdkVersionCode); // e.g. 25
```

## 目录

### 属性

* [ANDROID\_BASE](/v9/generated/classes/device.OS.md#android_base)
* [ANDROID\_BASE\_1\_1](/v9/generated/classes/device.OS.md#android_base_1_1)
* [ANDROID\_CUPCAKE](/v9/generated/classes/device.OS.md#android_cupcake)
* [ANDROID\_DONUT](/v9/generated/classes/device.OS.md#android_donut)
* [ANDROID\_ECLAIR](/v9/generated/classes/device.OS.md#android_eclair)
* [ANDROID\_ECLAIR\_0\_1](/v9/generated/classes/device.OS.md#android_eclair_0_1)
* [ANDROID\_ECLAIR\_MR1](/v9/generated/classes/device.OS.md#android_eclair_mr1)
* [ANDROID\_FROYO](/v9/generated/classes/device.OS.md#android_froyo)
* [ANDROID\_GINGERBREAD](/v9/generated/classes/device.OS.md#android_gingerbread)
* [ANDROID\_GINGERBREAD\_MR1](/v9/generated/classes/device.OS.md#android_gingerbread_mr1)
* [ANDROID\_HONEYCOMB](/v9/generated/classes/device.OS.md#android_honeycomb)
* [ANDROID\_HONEYCOMB\_MR1](/v9/generated/classes/device.OS.md#android_honeycomb_mr1)
* [ANDROID\_HONEYCOMB\_MR2](/v9/generated/classes/device.OS.md#android_honeycomb_mr2)
* [ANDROID\_ICE\_CREAM\_SANDWICH](/v9/generated/classes/device.OS.md#android_ice_cream_sandwich)
* [ANDROID\_ICE\_CREAM\_SANDWICH\_MR1](/v9/generated/classes/device.OS.md#android_ice_cream_sandwich_mr1)
* [ANDROID\_JELLY\_BEAN](/v9/generated/classes/device.OS.md#android_jelly_bean)
* [ANDROID\_JELLY\_BEAN\_MR1](/v9/generated/classes/device.OS.md#android_jelly_bean_mr1)
* [ANDROID\_JELLY\_BEAN\_MR2](/v9/generated/classes/device.OS.md#android_jelly_bean_mr2)
* [ANDROID\_KITKAT](/v9/generated/classes/device.OS.md#android_kitkat)
* [ANDROID\_KITKAT\_WATCH](/v9/generated/classes/device.OS.md#android_kitkat_watch)
* [ANDROID\_L](/v9/generated/classes/device.OS.md#android_l)
* [ANDROID\_LOLLIPOP\_MR1](/v9/generated/classes/device.OS.md#android_lollipop_mr1)
* [ANDROID\_M](/v9/generated/classes/device.OS.md#android_m)
* [ANDROID\_N](/v9/generated/classes/device.OS.md#android_n)
* [ANDROID\_N\_MR1](/v9/generated/classes/device.OS.md#android_n_mr1)
* [ANDROID\_O](/v9/generated/classes/device.OS.md#android_o)
* [ANDROID\_O\_MR1](/v9/generated/classes/device.OS.md#android_o_mr1)
* [ANDROID\_P](/v9/generated/classes/device.OS.md#android_p)
* [ANDROID\_Q](/v9/generated/classes/device.OS.md#android_q)
* [ANDROID\_R](/v9/generated/classes/device.OS.md#android_r)
* [ANDROID\_S](/v9/generated/classes/device.OS.md#android_s)

### Accessors

* [incremental](/v9/generated/classes/device.OS.md#incremental)
* [release](/v9/generated/classes/device.OS.md#release)
* [sdkName](/v9/generated/classes/device.OS.md#sdkname)
* [sdkVersionCode](/v9/generated/classes/device.OS.md#sdkversioncode)
* [securityPatch](/v9/generated/classes/device.OS.md#securitypatch)

### 方法

* [requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

## 属性

### ANDROID\_BASE

▪ `Static` `Readonly` **ANDROID\_BASE**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 1.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_BASE\_1\_1

▪ `Static` `Readonly` **ANDROID\_BASE\_1\_1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 1.1

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_CUPCAKE

▪ `Static` `Readonly` **ANDROID\_CUPCAKE**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 1.5

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_DONUT

▪ `Static` `Readonly` **ANDROID\_DONUT**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 1.6

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_ECLAIR

▪ `Static` `Readonly` **ANDROID\_ECLAIR**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 2.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_ECLAIR\_0\_1

▪ `Static` `Readonly` **ANDROID\_ECLAIR\_0\_1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 2.0.1

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_ECLAIR\_MR1

▪ `Static` `Readonly` **ANDROID\_ECLAIR\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 2.1.x

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_FROYO

▪ `Static` `Readonly` **ANDROID\_FROYO**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 2.2.x

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_GINGERBREAD

▪ `Static` `Readonly` **ANDROID\_GINGERBREAD**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 2.3

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_GINGERBREAD\_MR1

▪ `Static` `Readonly` **ANDROID\_GINGERBREAD\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 2.3.3

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_HONEYCOMB

▪ `Static` `Readonly` **ANDROID\_HONEYCOMB**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 3.0.x

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_HONEYCOMB\_MR1

▪ `Static` `Readonly` **ANDROID\_HONEYCOMB\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 3.1.x

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_HONEYCOMB\_MR2

▪ `Static` `Readonly` **ANDROID\_HONEYCOMB\_MR2**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 3.2

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_ICE\_CREAM\_SANDWICH

▪ `Static` `Readonly` **ANDROID\_ICE\_CREAM\_SANDWICH**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_ICE\_CREAM\_SANDWICH\_MR1

▪ `Static` `Readonly` **ANDROID\_ICE\_CREAM\_SANDWICH\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.0.3

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_JELLY\_BEAN

▪ `Static` `Readonly` **ANDROID\_JELLY\_BEAN**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.1

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_JELLY\_BEAN\_MR1

▪ `Static` `Readonly` **ANDROID\_JELLY\_BEAN\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.2

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_JELLY\_BEAN\_MR2

▪ `Static` `Readonly` **ANDROID\_JELLY\_BEAN\_MR2**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.3

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_KITKAT

▪ `Static` `Readonly` **ANDROID\_KITKAT**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.4.2

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_KITKAT\_WATCH

▪ `Static` `Readonly` **ANDROID\_KITKAT\_WATCH**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 4.4W

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_L

▪ `Static` `Readonly` **ANDROID\_L**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 5.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_LOLLIPOP\_MR1

▪ `Static` `Readonly` **ANDROID\_LOLLIPOP\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 5.1

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_M

▪ `Static` `Readonly` **ANDROID\_M**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 6.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_N

▪ `Static` `Readonly` **ANDROID\_N**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 7.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_N\_MR1

▪ `Static` `Readonly` **ANDROID\_N\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 7.1

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_O

▪ `Static` `Readonly` **ANDROID\_O**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 8.0

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_O\_MR1

▪ `Static` `Readonly` **ANDROID\_O\_MR1**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 8.1

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_P

▪ `Static` `Readonly` **ANDROID\_P**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 9

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_Q

▪ `Static` `Readonly` **ANDROID\_Q**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 10

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_R

▪ `Static` `Readonly` **ANDROID\_R**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 11

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

***

### ANDROID\_S

▪ `Static` `Readonly` **ANDROID\_S**: [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md)

Android 12

**`参见`**

[requiresAndroidVersion](/v9/generated/classes/device.OS.md#requiresandroidversion)

## Accessors

### incremental

• `Static` `get` **incremental**(): `string`

系统源码版本控制的内部版本号，比如git的commit id。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.VERSION#INCREMENTAL

#### 返回值

`string`

***

### release

• `Static` `get` **release**(): `string`

用户可见的版本字符串。 例如，“1.0”或“3.4b5”或“bananas”。不要假设它的值具有任何特定的结构，或者不同版本的 RELEASE 值可以以某种方式排序。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.VERSION#RELEASE

#### 返回值

`string`

***

### sdkName

• `Static` `get` **sdkName**(): `string`

Android版本名称，例如"10"、"7.0"、"4.4W"等。对于比较新的Android版本，可能返回unknown。

#### 返回值

`string`

***

### sdkVersionCode

• `Static` `get` **sdkVersionCode**(): `number`

获取当前系统的SDK版本号，即Android API版本号。例如Android 10为29，Android 7.0为24。完整的对应表参见[SDK Platform release notes](https://developer.android.google.cn/studio/releases/platforms)。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.VERSION#SDK\_INT

#### 返回值

`number`

***

### securityPatch

• `Static` `get` **securityPatch**(): `string`

安全补丁的版本号。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.VERSION#SECURITY\_PATCH

#### 返回值

`string`

## 方法

### requiresAndroidVersion

▸ `Static` **requiresAndroidVersion**(`version`, `message?`): `void`

要求最低在给定的Android版本中运行。如果当前系统版本小于给定版本，则抛出异常，异常信息为给定的message字段。

**`示例`**

```javascript
"nodejs";

const { OS } = require('device');
OS.requiresAndroidVersion(OS.ANDROID_N);
```

#### 参数

| 名称      | 类型                                                         | 描述                                                         |
| :-------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `version` | [`AndroidVersion`](/v9/generated/interfaces/device.AndroidVersion.md) | 最小Android版本                                              |
| `message` | `string`                                                     | 异常信息，默认为Requires Android ${version.name}(API ${version.code}) to run this code |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/image.Image.md'
---
# 类: Image
[image](/v9/generated/modules/image.md).Image

代表图像对象的类，通过 opencv 的 `Mat` 构造。或者通过 `readImage`、`decodeImage` 等函数从图片文件、链接、Base64 中解析。

Image 对象创建后，在不使用时需要调用 `recycle()` 方法释放资源，以释放内存。

## 目录

### Constructors

* [constructor](/v9/generated/classes/image.Image.md#constructor)

### Accessors

* [c4mat](/v9/generated/classes/image.Image.md#c4mat)
* [height](/v9/generated/classes/image.Image.md#height)
* [mat](/v9/generated/classes/image.Image.md#mat)
* [width](/v9/generated/classes/image.Image.md#width)

### 方法

* [clip](/v9/generated/classes/image.Image.md#clip)
* [clipSync](/v9/generated/classes/image.Image.md#clipsync)
* [copy](/v9/generated/classes/image.Image.md#copy)
* [copySync](/v9/generated/classes/image.Image.md#copysync)
* [detectAndComputeFeatures](/v9/generated/classes/image.Image.md#detectandcomputefeatures)
* [grayscale](/v9/generated/classes/image.Image.md#grayscale)
* [grayscaleSync](/v9/generated/classes/image.Image.md#grayscalesync)
* [pixel](/v9/generated/classes/image.Image.md#pixel)
* [recycle](/v9/generated/classes/image.Image.md#recycle)
* [rotate](/v9/generated/classes/image.Image.md#rotate)
* [rotateSync](/v9/generated/classes/image.Image.md#rotatesync)
* [scale](/v9/generated/classes/image.Image.md#scale)
* [scaleSync](/v9/generated/classes/image.Image.md#scalesync)
* [resize](/v9/generated/classes/image.Image.md#resize)
* [resizeSync](/v9/generated/classes/image.Image.md#resizesync)
* [toBitmap](/v9/generated/classes/image.Image.md#tobitmap)
* [ofBitmap](/v9/generated/classes/image.Image.md#ofbitmap)

## Constructors

### constructor

• **new Image**(`mat`)

从 opencv 的 Mat 对象构造 Image 对象。

#### 参数

| 名称  | 类型     | 描述                    |
| :---- | :------- | :---------------------- |
| `mat` | `cv.Mat` | opencv 的 Mat 图像对象 |

## Accessors

### mat

• `get` **mat**(): `cv.Mat`

获取图像的 Mat 对象。Mat 是 opencv 中表示图像数据的基础对象。

#### 返回值

`cv.Mat`

图像的 Mat 对象。

***

### c4mat

• `get` **c4mat**(): `cv.Mat`

获取四通道（BGRA 格式）的 Mat 对象。如果原图像不是四通道，会自动转换。

#### 返回值

`cv.Mat`

四通道（BGRA 格式）的 Mat 对象。

***

### width

• `get` **width**(): `number`

获取图像的宽度（像素）。

**`示例`**

```javascript
"nodejs";
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  console.log("图像宽度:", img.width);
}
main();
```

#### 返回值

`number`

图像的宽度（像素）。

***

### height

• `get` **height**(): `number`

获取图像的高度（像素）。

**`示例`**

```javascript
"nodejs";
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  console.log("图像高度:", img.height);
}
main();
```

#### 返回值

`number`

图像的高度（像素）。

## 方法

### pixel

▸ **pixel**(`x`, `y`): [`Color`](/v9/generated/classes/color.Color.md)

获取图像在位置 (x, y) 处的颜色。若为三通道图像，则假设其为 BGR 格式；若为四通道图像，则假设其为 BGRA 格式；若为单通道图像，则假设其为灰度图。

**`示例`**

```javascript
"nodejs";
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  const color = img.pixel(0, 0);
  console.log("左上角颜色:", color);
}
main();
```

#### 参数

| 名称 | 类型     | 描述                                                         |
| :--- | :------- | :----------------------------------------------------------- |
| `x`  | `number` | X 坐标（从 0 开始，从左到右）                                |
| `y`  | `number` | Y 坐标（从 0 开始，从上到下）                                |

#### 返回值

[`Color`](/v9/generated/classes/color.Color.md)

该位置的颜色对象。

***

### clip

▸ **clip**(`rect`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

用给定的区域剪切图像，异步返回剪切后的图像。

**`示例`**

```javascript
"nodejs";
const cv = require("@autojs/opencv");
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  const clipped = await img.clip(new cv.Rect(0, 0, 100, 100));
  console.log("剪切后的图像:", clipped);
}
main();
```

#### 参数

| 名称  | 类型       | 描述                                                         |
| :---- | :--------- | :----------------------------------------------------------- |
| `rect` | `cv.Rect` | 指定剪切区域，包含 x、y、width、height 属性                 |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回剪切后的新 Image 对象。

***

### clipSync

▸ **clipSync**(`rect`): [`Image`](/v9/generated/classes/image.Image.md)

用给定的区域剪切图像，同步返回剪切后的图像。

**`示例`**

```javascript
"nodejs";
const cv = require("@autojs/opencv");
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  const clipped = img.clipSync(new cv.Rect(0, 0, 100, 100));
  console.log("剪切后的图像:", clipped);
}
main();
```

#### 参数

| 名称  | 类型       | 描述                                                         |
| :---- | :--------- | :----------------------------------------------------------- |
| `rect` | `cv.Rect` | 指定剪切区域，包含 x、y、width、height 属性                 |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回剪切后的新 Image 对象。

***

### resize

▸ **resize**(`width`, `height`, `interpolation?`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

缩放图像，异步返回缩放后的新图像。

#### 参数

| 名称            | 类型     | 默认值      | 描述                                                         |
| :-------------- | :------- | :---------- | :----------------------------------------------------------- |
| `width`         | `number` | `undefined` | 缩放后的宽度（像素）                                         |
| `height`        | `number` | `undefined` | 缩放后的高度（像素）                                         |
| `interpolation` | `number` | `cv.INTER_LINEAR` | 插值方式。可以为 `cv.INTER_AREA`、`cv.INTER_CUBIC`、`cv.INTER_LANCZOS4`、`cv.INTER_LINEAR`、`cv.INTER_NEAREST` 等 |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回缩放后的新 Image 对象。

***

### resizeSync

▸ **resizeSync**(`width`, `height`, `interpolation?`): [`Image`](/v9/generated/classes/image.Image.md)

缩放图像，同步返回缩放后的新图像。

#### 参数

| 名称            | 类型     | 默认值      | 描述                                                         |
| :-------------- | :------- | :---------- | :----------------------------------------------------------- |
| `width`         | `number` | `undefined` | 缩放后的宽度（像素）                                         |
| `height`        | `number` | `undefined` | 缩放后的高度（像素）                                         |
| `interpolation` | `number` | `cv.INTER_LINEAR` | 插值方式。可以为 `cv.INTER_AREA`、`cv.INTER_CUBIC`、`cv.INTER_LANCZOS4`、`cv.INTER_LINEAR`、`cv.INTER_NEAREST` 等 |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回缩放后的新 Image 对象。

***

### scale

▸ **scale**(`fx`, `fy?`, `interpolation?`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

缩放图像，异步返回缩放后的新图像。使用缩放比例而不是绝对尺寸。

**`示例`**

```javascript
"nodejs";
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  // 缩小到原来的一半
  const scaled = await img.scale(0.5, 0.5);
  console.log("缩放后的图像:", scaled);
}
main();
```

#### 参数

| 名称            | 类型     | 默认值      | 描述                                                         |
| :-------------- | :------- | :---------- | :----------------------------------------------------------- |
| `fx`            | `number` | `undefined` | x 方向的缩放比例（宽度）。例如 0.5 表示缩小到原来的一半，2.0 表示放大到原来的两倍 |
| `fy`            | `number` | `fx`        | y 方向的缩放比例（高度）。如果不指定，则使用与 fx 相同的值   |
| `interpolation` | `number` | `cv.INTER_LINEAR` | 插值方式。可以为 `cv.INTER_AREA`、`cv.INTER_CUBIC`、`cv.INTER_LANCZOS4`、`cv.INTER_LINEAR`、`cv.INTER_NEAREST` 等 |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回缩放后的新 Image 对象。

***

### scaleSync

▸ **scaleSync**(`fx`, `fy?`, `interpolation?`): [`Image`](/v9/generated/classes/image.Image.md)

缩放图像，同步返回缩放后的新图像。使用缩放比例而不是绝对尺寸。

#### 参数

| 名称            | 类型     | 默认值      | 描述                                                         |
| :-------------- | :------- | :---------- | :----------------------------------------------------------- |
| `fx`            | `number` | `undefined` | x 方向的缩放比例（宽度）。例如 0.5 表示缩小到原来的一半，2.0 表示放大到原来的两倍 |
| `fy`            | `number` | `fx`        | y 方向的缩放比例（高度）。如果不指定，则使用与 fx 相同的值   |
| `interpolation` | `number` | `cv.INTER_LINEAR` | 插值方式。可以为 `cv.INTER_AREA`、`cv.INTER_CUBIC`、`cv.INTER_LANCZOS4`、`cv.INTER_LINEAR`、`cv.INTER_NEAREST` 等 |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回缩放后的新 Image 对象。

***

### rotate

▸ **rotate**(`degree`, `center?`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

将图像以指定的 center 中心旋转 degree 角度。若不指定 center，则默认为图像中心。异步返回旋转后的图像。

**`示例`**

```javascript
"nodejs";
const cv = require("@autojs/opencv");
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  // 旋转 90 度
  const rotated = await img.rotate(90);
  console.log("旋转后的图像:", rotated);
}
main();
```

#### 参数

| 名称      | 类型       | 描述                                                         |
| :-------- | :--------- | :----------------------------------------------------------- |
| `degree` | `number`   | 旋转角度（度）。正数表示逆时针旋转，负数表示顺时针旋转       |
| `center` | `cv.Point2` | 旋转中心点。如果不指定，则使用图像中心                       |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回旋转后的新 Image 对象。

***

### rotateSync

▸ **rotateSync**(`degree`, `center?`): [`Image`](/v9/generated/classes/image.Image.md)

将图像以指定的 center 中心旋转 degree 角度。若不指定 center，则默认为图像中心。同步返回旋转后的图像。

#### 参数

| 名称      | 类型       | 描述                                                         |
| :-------- | :--------- | :----------------------------------------------------------- |
| `degree` | `number`   | 旋转角度（度）。正数表示逆时针旋转，负数表示顺时针旋转       |
| `center` | `cv.Point2` | 旋转中心点。如果不指定，则使用图像中心                       |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回旋转后的新 Image 对象。

***

### grayscale

▸ **grayscale**(): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

将图像灰度化，异步返回灰度化后的新图片对象。

**`示例`**

```javascript
"nodejs";
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  const gray = await img.grayscale();
  console.log("灰度化后的图像:", gray);
}
main();
```

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回灰度化后的新 Image 对象。

***

### grayscaleSync

▸ **grayscaleSync**(): [`Image`](/v9/generated/classes/image.Image.md)

将图像灰度化，同步返回灰度化后的新图片对象。

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回灰度化后的新 Image 对象。

***

### copy

▸ **copy**(): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

将图像拷贝一份，返回新的 Image 对象的 Promise。

**`示例`**

```javascript
"nodejs";
const { loadImage } = require("image");

async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  const copied = await img.copy();
  console.log("复制的图像:", copied);
}
main();
```

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回新的 Image 对象副本。

***

### copySync

▸ **copySync**(): [`Image`](/v9/generated/classes/image.Image.md)

将图像拷贝一份，并同步返回新的 Image 对象。

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回新的 Image 对象副本。

***

### toBitmap

▸ **toBitmap**(): `android.graphics.Bitmap`

将图像转换为 Android 的 Bitmap 对象。

**`参见`**

[Bitmap](https://developer.android.com/reference/android/graphics/Bitmap)

#### 返回值

`android.graphics.Bitmap`

Android Bitmap 对象。

***

### detectAndComputeFeatures

▸ **detectAndComputeFeatures**(`options?`): `Promise`<[`ImageFeatures`](/v9/generated/classes/image.ImageFeatures.md)>

检测并计算图像的特征点，用于特征匹配。

**`示例`**

```javascript
"nodejs";
const { readImage, FeatureDetectMethod } = require("image");

async function main() {
  const img = await readImage("./image.png");
  const features = await img.detectAndComputeFeatures({
    method: FeatureDetectMethod.SIFT,
    scale: 0.5, // 缩小到一半以提高速度
  });
  
  // 使用特征进行匹配...
  // 使用完毕后记得回收
  features.recycle();
}
main();
```

#### 参数

| 名称      | 类型                                                                     | 描述                                                         |
| :-------- | :----------------------------------------------------------------------- | :----------------------------------------------------------- |
| `options` | [`DetectAndComputeFeaturesOptions`](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md) | 特征检测选项，包括检测方法、缩放比例、检测区域等             |

#### 返回值

`Promise`<[`ImageFeatures`](/v9/generated/classes/image.ImageFeatures.md)>

返回一个 Promise，resolve 时返回图像特征对象。

***

### recycle

▸ **recycle**(): `void`

回收图像对象。回收后不应对本对象进行任何操作。

**`重要`**

Image 对象占用内存较大，使用完毕后应该及时调用 `recycle()` 方法释放资源，避免内存泄漏。

**`示例`**

```javascript
"nodejs";
const { readImage } = require("image");

async function main() {
  const img = await readImage("./image.png");
  
  // 对图像进行操作...
  const gray = await img.grayscale();
  
  // 使用完毕后回收原图像
  img.recycle();
  // 使用完毕后回收灰度图像
  gray.recycle();
}
main();
```

#### 返回值

`void`

***

### ofBitmap

▸ `Static` **ofBitmap**(`bitmap`): [`Image`](/v9/generated/classes/image.Image.md)

将 Android Bitmap 对象转为 Image 对象。若 Bitmap 为空或非 Bitmap 对象，则抛出异常。

**`示例`**

```javascript
"nodejs";
const { Image } = require("image");

// 假设有一个 Android Bitmap 对象
const bitmap = /* ... */;
const img = Image.ofBitmap(bitmap);
console.log("从 Bitmap 创建的图像:", img);
```

#### 参数

| 名称     | 类型                      | 描述                    |
| :------- | :------------------------ | :---------------------- |
| `bitmap` | `android.graphics.Bitmap` | Android Bitmap 对象     |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回 Image 对象。

#### 抛出

如果 Bitmap 为空或非 Bitmap 对象，则抛出异常。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/image.ImageFeatures.md'
---
# 类: ImageFeatures
[image](/v9/generated/modules/image.md).ImageFeatures

图像特征抽象类，用于存储图像的特征点信息。通过 `Image.detectAndComputeFeatures()` 方法创建。

## 目录

### 方法

* [recycle](/v9/generated/classes/image.ImageFeatures.md#recycle)

## 方法

### recycle

▸ **recycle**(): `void`

回收图像特征对象，释放相关资源。回收后不应对本对象进行任何操作。

**`示例`**

```javascript
"nodejs";
const { readImage } = require("image");

async function main() {
  const img = await readImage("./image.png");
  const features = await img.detectAndComputeFeatures();
  
  // 使用特征进行匹配...
  
  // 使用完毕后回收资源
  features.recycle();
}
main();
```

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/image.ImageFeaturesImpl.md
---
# 类: ImageFeaturesImpl
[image](/v9/generated/modules/image.md).ImageFeaturesImpl

图像特征实现类，继承自 `ImageFeatures`，是 `Image.detectAndComputeFeatures()` 方法返回的具体实现。

## 继承关系

* [`ImageFeatures`](/v9/generated/classes/image.ImageFeatures.md)

  ↳ **`ImageFeaturesImpl`**

## 目录

### Constructors

* [constructor](/v9/generated/classes/image.ImageFeaturesImpl.md#constructor)

### 属性

* [javaObject](/v9/generated/classes/image.ImageFeaturesImpl.md#javaobject)
* [onRecycled](/v9/generated/classes/image.ImageFeaturesImpl.md#onrecycled)
* [region](/v9/generated/classes/image.ImageFeaturesImpl.md#region)
* [scale](/v9/generated/classes/image.ImageFeaturesImpl.md#scale)

### 方法

* [recycle](/v9/generated/classes/image.ImageFeaturesImpl.md#recycle)

## Constructors

### constructor

• **new ImageFeaturesImpl**(`javaObject`, `scale`, `region?`)

创建图像特征实现对象。

#### 参数

| 名称        | 类型         | 描述                                                         |
| :---------- | :----------- | :----------------------------------------------------------- |
| `javaObject` | `JavaObject` | 特征检测的原始 Java 对象                                     |
| `scale`     | `number`     | 图像缩放比例                                                 |
| `region`    | `cv.Rect`    | 检测区域（如果指定了检测区域）                               |

## 属性

### javaObject

• `Readonly` **javaObject**: `JavaObject`

特征检测的原始 Java 对象。在官方实现中可能可以获取附加的额外信息。

***

### scale

• `Readonly` **scale**: `number`

图像缩放比例。用于在检测前缩放图像的比例。

***

### region

• `Optional` `Readonly` **region**: `cv.Rect`

检测区域。如果指定了检测区域，则此属性包含该区域信息。

***

### onRecycled

• `Optional` **onRecycled**: () => `void`

回收回调函数。当对象被回收时，此函数会被调用。

## 方法

### recycle

▸ **recycle**(): `void`

回收图像特征对象，释放相关资源。回收后不应对本对象进行任何操作。

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/lang.Deferred.md'
---
# 类: Deferred<T>
[lang](/v9/generated/modules/lang.md).Deferred

Deferred类，用于创建Promise的延迟对象，而无需使用`new Promise`。通过resolve或reject函数可以设置Promise的状态。

**`示例`**

```javascript
"nodejs";
const { Deferred } = require('lang');
async function main() {
    console.log(await add(1, 2));
}
main();

function add(a, b) {
    const d = new Deferred();
    setTimeout(() => {
        d.resolve(a + b);
    }, 1000);
    return d.promise();
}
```

## 类型参数

| 名称 |
| :------ |
| `T` |

## 目录

### Constructors

* [constructor](lang.Deferred.md#constructor)

### Accessors

* [value](lang.Deferred.md#value)

### 方法

* [promise](lang.Deferred.md#promise)
* [reject](lang.Deferred.md#reject)
* [resolve](lang.Deferred.md#resolve)

## Constructors

### constructor

• **new Deferred**<`T`>(`keepRunning?`)

#### 类型参数

| 名称 |
| :------ |
| `T` |

#### 参数

| 名称 | 类型 | Default value |
| :------ | :------ | :------ |
| `keepRunning` | `boolean` | `true` |

## Accessors

### value

• `get` **value**(): `undefined` | `T`

获取Deferred的值，如果为pending或rejected状态，则返回undefined。

#### 返回值

`undefined` | `T`

## 方法

### promise

▸ **promise**(): `Promise`<`T`>

#### 返回值

`Promise`<`T`>

***

### reject

▸ **reject**(`reason?`): `boolean`

使用给定的reason作为原因或异常设置Promise的状态为rejected。若已经resolved或rejected状态，则返回false。

#### 参数

| 名称 | 类型 |
| :------ | :------ |
| `reason?` | `any` |

#### 返回值

`boolean`

***

### resolve

▸ **resolve**(`value`): `boolean`

使用给定的值设置Promise的状态为fulfilled。若已经是fulfilled或rejected状态，则返回false。

#### 参数

| 名称 | 类型 |
| :------ | :------ |
| `value` | `T` |

#### 返回值

`boolean`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/lang.TimeoutError.md'
---
# 类: TimeoutError
[lang](/v9/generated/modules/lang.md).TimeoutError

## 继承关系

* `Error`

  ↳ **`TimeoutError`**

## 目录

### Constructors

* [constructor](/v9/generated/classes/lang.TimeoutError.md#constructor)

### 属性

* [cause](/v9/generated/classes/lang.TimeoutError.md#cause)
* [message](/v9/generated/classes/lang.TimeoutError.md#message)
* [name](/v9/generated/classes/lang.TimeoutError.md#name)
* [stack](/v9/generated/classes/lang.TimeoutError.md#stack)

## Constructors

### constructor

• **new TimeoutError**(`message?`)

#### 参数

| 名称       | 类型     |
| :--------- | :------- |
| `message?` | `string` |

#### Inherited from

Error.constructor

• **new TimeoutError**(`message?`, `options?`)

#### 参数

| 名称       | 类型           |
| :--------- | :------------- |
| `message?` | `string`       |
| `options?` | `ErrorOptions` |

#### Inherited from

Error.constructor

## 属性

### cause

• `Optional` **cause**: `unknown`

#### Inherited from

Error、.cause

***

### message

• **message**: `string`

#### Inherited from

Error、.message

***

### name

• **name**: `string`

#### Inherited from

Error、.name

***

### stack

• `Optional` **stack**: `string`

#### Inherited from

Error.stack

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/media_projection.ImageUnavailableError.md
---
# 类: ImageUnavailableError
[media\_projection](/v9/generated/modules/media_projection.md).ImageUnavailableError

图片不可用错误。当尝试获取截图但当前没有可用的截图时抛出。

## 继承关系

* `Error`

  ↳ **`ImageUnavailableError`**

## 目录

### Constructors

* [constructor](/v9/generated/classes/media_projection.ImageUnavailableError.md#constructor)

## Constructors

### constructor

• **new ImageUnavailableError**(`message`)

创建图片不可用错误对象。

#### 参数

| 名称      | 类型     | 描述       |
| :-------- | :------- | :--------- |
| `message` | `string` | 错误消息   |

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/media_projection.ScreenCapturer.md
---
# 类: ScreenCapturer
[media\_projection](/v9/generated/modules/media_projection.md).ScreenCapturer

屏幕截图捕获器，用于获取屏幕截图。通过 `requestScreenCapture()` 函数创建。

## 继承关系

* `EventEmitter`

  ↳ **`ScreenCapturer`**

ScreenCapturer 继承自 EventEmitter，因此可以使用所有 EventEmitter 的方法来监听事件。

## 目录

### 方法

* [awaitForImageAvailable](/v9/generated/classes/media_projection.ScreenCapturer.md#awaitforimageavailable)
* [latestImage](/v9/generated/classes/media_projection.ScreenCapturer.md#latestimage)
* [latestImageOrNull](/v9/generated/classes/media_projection.ScreenCapturer.md#latestimageornull)
* [nextImage](/v9/generated/classes/media_projection.ScreenCapturer.md#nextimage)
* [stop](/v9/generated/classes/media_projection.ScreenCapturer.md#stop)

### Events

* [image\_available](/v9/generated/classes/media_projection.ScreenCapturer.md#image_available)

## Events

### image\_available

▸ **on**(`event`, `listener`): `this`

有新的截图时触发的事件。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  
  capturer.on("image_available", () => {
    console.log("新的截图已可用");
    const img = capturer.latestImageOrNull();
    if (img) {
      console.log("截图尺寸:", img.width, "x", img.height);
    }
  });
  
  // 保持运行
  $autojs.keepRunning();
}
main();
```

#### 参数

| 名称       | 类型     | 描述                                                         |
| :--------- | :------- | :----------------------------------------------------------- |
| `event`    | `"image_available"` | 事件名称，固定为 "image\_available"                         |
| `listener` | () => `void` | 监听器函数，当有新的截图可用时被调用                       |

#### 返回值

`this`

返回 ScreenCapturer 对象本身，支持链式调用。

## 方法

### latestImage

▸ **latestImage**(): [`Image`](/v9/generated/classes/image.Image.md)

获取当前最新的截图图片对象。如果当前没有截图，则会抛出 `ImageUnavailableError`。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  
  // 等待第一张截图
  await capturer.awaitForImageAvailable();
  
  // 获取最新截图
  const img = capturer.latestImage();
  console.log("截图尺寸:", img.width, "x", img.height);
  
  capturer.stop();
}
main();
```

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

最新的截图图片对象。

#### 抛出

如果当前没有可用的截图，则抛出 `ImageUnavailableError`。

***

### latestImageOrNull

▸ **latestImageOrNull**(): [`Image`](/v9/generated/classes/image.Image.md) | `null`

获取当前最新的截图图片对象。如果当前没有截图，则会返回 `null`。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  
  // 尝试获取最新截图（可能为 null）
  const img = capturer.latestImageOrNull();
  if (img) {
    console.log("截图尺寸:", img.width, "x", img.height);
  } else {
    console.log("当前没有可用的截图");
  }
  
  capturer.stop();
}
main();
```

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md) | `null`

最新的截图图片对象，如果没有则返回 `null`。

***

### nextImage

▸ **nextImage**(): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

等待下一张截图并返回。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  
  // 等待并获取下一张截图
  const img = await capturer.nextImage();
  console.log("截图尺寸:", img.width, "x", img.height);
  
  // 获取下一张截图
  const img2 = await capturer.nextImage();
  console.log("第二张截图尺寸:", img2.width, "x", img2.height);
  
  capturer.stop();
}
main();
```

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回下一张截图图片对象。

***

### awaitForImageAvailable

▸ **awaitForImageAvailable**(): `Promise`<`void`>

等待有截图可用。仅在刚申请到截图权限，未有任何截图可用时，会等待有第一张截图到来。在第一张截图到来的任何时刻调用，会立即返回。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  
  // 等待第一张截图可用
  await capturer.awaitForImageAvailable();
  console.log("第一张截图已可用");
  
  // 现在可以安全地获取截图
  const img = capturer.latestImage();
  console.log("截图尺寸:", img.width, "x", img.height);
  
  capturer.stop();
}
main();
```

#### 返回值

`Promise`<`void`>

返回一个 Promise，当第一张截图可用时 resolve。

***

### stop

▸ **stop**(): `void`

停止截图。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  
  // 获取几张截图
  for (let i = 0; i < 5; i++) {
    const img = await capturer.nextImage();
    console.log(`第 ${i + 1} 张截图`);
  }
  
  // 停止截图
  capturer.stop();
  console.log("截图已停止");
}
main();
```

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/media_projection.ScreenCaptureRequestError.md
---
# 类: ScreenCaptureRequestError
[media\_projection](/v9/generated/modules/media_projection.md).ScreenCaptureRequestError

截图请求错误。当用户拒绝截图权限或遇到其他错误时抛出。

## 继承关系

* `Error`

  ↳ **`ScreenCaptureRequestError`**

## 目录

### Constructors

* [constructor](/v9/generated/classes/media_projection.ScreenCaptureRequestError.md#constructor)

## Constructors

### constructor

• **new ScreenCaptureRequestError**(`message`)

创建截图请求错误对象。

#### 参数

| 名称      | 类型     | 描述       |
| :-------- | :------- | :--------- |
| `message` | `string` | 错误消息   |

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/media.MediaPlayer.md'
---
# 类: MediaPlayer
[media](/v9/generated/modules/media.md).MediaPlayer

多媒体播放器。提供更丰富的音乐播放管理功能。比如播放、暂停、进度监听等。

**`示例`**

```javascript
"nodejs";
const { MediaPlayer } = require("media");
const player = new MediaPlayer();
player.play("/sdcard/Music/test.mp3");
setInterval(() => {
    console.log(player.currentPosition);
}, 1000);
```

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer

## 目录

### Constructors

* [constructor](/v9/generated/classes/media.MediaPlayer.md#constructor)

### Accessors

* [androidMediaPlayer](/v9/generated/classes/media.MediaPlayer.md#androidmediaplayer)
* [currentPosition](/v9/generated/classes/media.MediaPlayer.md#currentposition)
* [duration](/v9/generated/classes/media.MediaPlayer.md#duration)
* [isPlaying](/v9/generated/classes/media.MediaPlayer.md#isplaying)

### 方法

* [awaitForCompletion](/v9/generated/classes/media.MediaPlayer.md#awaitforcompletion)
* [pause](/v9/generated/classes/media.MediaPlayer.md#pause)
* [play](/v9/generated/classes/media.MediaPlayer.md#play)
* [prepare](/v9/generated/classes/media.MediaPlayer.md#prepare)
* [prepareSync](/v9/generated/classes/media.MediaPlayer.md#preparesync)
* [release](/v9/generated/classes/media.MediaPlayer.md#release)
* [reset](/v9/generated/classes/media.MediaPlayer.md#reset)
* [seekTo](/v9/generated/classes/media.MediaPlayer.md#seekto)
* [setDataSource](/v9/generated/classes/media.MediaPlayer.md#setdatasource)
* [setLooping](/v9/generated/classes/media.MediaPlayer.md#setlooping)
* [setScreenOnWhilePlaying](/v9/generated/classes/media.MediaPlayer.md#setscreenonwhileplaying)
* [setVolume](/v9/generated/classes/media.MediaPlayer.md#setvolume)
* [start](/v9/generated/classes/media.MediaPlayer.md#start)
* [stop](/v9/generated/classes/media.MediaPlayer.md#stop)

## Constructors

### constructor

• **new MediaPlayer**()

## Accessors

### androidMediaPlayer

• `get` **androidMediaPlayer**(): `MediaPlayer`

安卓原生播放器的对象。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer

#### 返回值

`MediaPlayer `

***

### currentPosition

• `get` **currentPosition**(): `number`

当前播放位置。单位毫秒。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#getCurrentPosition()

#### 返回值

`number`

***

### duration

• `get` **duration**(): `number`

音乐时长。单位毫秒。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#getDuration()

#### 返回值

`number`

***

### isPlaying

• `get` **isPlaying**(): `boolean`

是否正在播放

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#isPlaying()

#### 返回值

`boolean `

## 方法

### awaitForCompletion

▸ **awaitForCompletion**(): `Promise`<`void`>

等待播放完成

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener)

#### 返回值

`Promise`<`void`>

***

### pause

▸ **pause**(): `void`

暂停播放

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#pause()

#### 返回值

`void`

***

### play

▸ **play**(`uri`, `volume?`, `looping?`): `Promise`<`void`>

播放音乐。在async函数中可使用await关键字等待播放完成。

#### 参数

| 名称       | 类型      | 描述                                                     |
| :--------- | :-------- | :------------------------------------------------------- |
| `uri`      | `string`  | 音乐文件路径，或网址。                                   |
| `volume?`  | `number`  | 播放音量，为0~1的浮点数，默认为1。                       |
| `looping?` | `boolean` | 是否循环播放，如果looping为true则循环播放，默认为false。 |

#### 返回值

`Promise`<`void`>

***

### prepare

▸ **prepare**(): `Promise`<`void`>

准备播放器进行播放。手动设置数据源后，需要调用prepare()或prepareSync()后才能开始播放，用于加载或下载音乐文件。

如果直接使用paly()函数播放，则无需调用本函数，因为play()函数会自动调用prepare()。

**`示例`**

```javascript
"nodejs";
const { MediaPlayer } = require("media");
async function main() {
    const player = new MediaPlayer();
    player.setDataSource("https://www.example.com/test.mp3");
    await player.prepare();
    player.start();
    await player.awaitForCompletion();
}
main();
```

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#prepareAsync()

#### 返回值

`Promise`<`void`>

***

### prepareSync

▸ **prepareSync**(): `void`

同步准备播放器进行播放。手动设置数据源后，需要调用prepare()或prepareSync()后才能开始播放，用于加载或下载音乐文件。

如果直接使用paly()函数播放，则无需调用本函数，因为play()函数会自动调用prepare()。

**`示例`**

```javascript
"nodejs";
const { MediaPlayer } = require("media");
const player = new MediaPlayer();
player.setDataSource("/sdcard/Music/test.mp3");
player.prepareSync();
player.start();
$autojs.keepRunning();
```

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#prepare()

#### 返回值

`void`

***

### release

▸ **release**(): `void`

释放与此 MediaPlayer 对象关联的资源。推荐在使用完 MediaPlayer后立即调用此方法。尤其是在应用的UI进入后台时，应调用此方法以释放 MediaPlayer 对象，除非应用程序有特殊的需求保持对象存活。

若未能立即调用该方法释放资源，除了占用不必要的资源（例如内存和编解码器的实例）外，还可能导致移动设备持续消耗电池。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#release()

#### 返回值

`void`

***

### reset

▸ **reset**(): `void`

重置播放器

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#reset()

#### 返回值

`void`

***

### seekTo

▸ **seekTo**(`msec`): `Promise`<`void`>

跳转到指定的时间播放。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#seekTo(int)

#### 参数

| 名称   | 类型     | 描述                     |
| :----- | :------- | :----------------------- |
| `msec` | `number` | 指定的时间，单位为毫秒。 |

#### 返回值

`Promise`<`void`>

***

### setDataSource

▸ **setDataSource**(`path`): `void`

设置音乐播放的数据源，支持本地文件路径、网络音乐地址。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#setDataSource(java.lang.String)

#### 参数

| 名称   | 类型     | 描述                                                         |
| :----- | :------- | :----------------------------------------------------------- |
| `path` | `string` | 数据源路径，比如/sdcards/test.mp3, http://www.example.com/test.mp3 |

#### 返回值

`void`

***

### setLooping

▸ **setLooping**(`looping`): `void`

设置循环播放

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#setLooping(boolean)

#### 参数

| 名称      | 类型      | 描述                                                     |
| :-------- | :-------- | :------------------------------------------------------- |
| `looping` | `boolean` | 是否循环播放，如果looping为true则循环播放，默认为false。 |

#### 返回值

`void`

***

### setScreenOnWhilePlaying

▸ **setScreenOnWhilePlaying**(`keep`): `void`

设置播放时是否保持屏幕常亮

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#setScreenOnWhilePlaying(boolean)

#### 参数

| 名称   | 类型      | 描述         |
| :----- | :-------- | :----------- |
| `keep` | `boolean` | 是否保持常亮 |

#### 返回值

`void`

***

### setVolume

▸ **setVolume**(`leftVolume`, `rightVolume?`): `void`

设置音量

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#setVolume(float,%20float)

#### 参数

| 名称           | 类型     | 描述                                          |
| :------------- | :------- | :-------------------------------------------- |
| `leftVolume`   | `number` | 左声道音量，为0~1的浮点数。                   |
| `rightVolume?` | `number` | 右声道音量，为0~1的浮点数，默认等同于左声道。 |

#### 返回值

`void`

***

### start

▸ **start**(): `void`

开始播放

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#start()

#### 返回值

`void`

***

### stop

▸ **stop**(): `void`

停止播放

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaPlayer#stop()

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/ocr.OCRResult.md'
---
# 类: OCRResult
[ocr](/v9/generated/modules/ocr.md).OCRResult

`OCR.detect` 返回的数组的元素对象，包含了文字识别的可信度、文本内容、文本范围、文本旋转度以及文本旋转度的可信度等。

OCRResult 对象表示一次 OCR 识别的结果，包含了识别到的文字及其在图片中的位置、可信度等信息。可以通过 `click()` 方法直接点击识别到的文字位置。

## 目录

### Constructors

* [constructor](/v9/generated/classes/ocr.OCRResult.md#constructor)

### 属性

* [bounds](/v9/generated/classes/ocr.OCRResult.md#bounds)
* [confidence](/v9/generated/classes/ocr.OCRResult.md#confidence)
* [javaObject](/v9/generated/classes/ocr.OCRResult.md#javaobject)
* [rotation](/v9/generated/classes/ocr.OCRResult.md#rotation)
* [rotationConfidence](/v9/generated/classes/ocr.OCRResult.md#rotationconfidence)
* [text](/v9/generated/classes/ocr.OCRResult.md#text)

### 方法

* [click](/v9/generated/classes/ocr.OCRResult.md#click)

## Constructors

### constructor

• **new OCRResult**(`javaObject`, `bounds`, `text`, `confidence`, `rotation`, `rotationConfidence`)

创建 OCR 识别结果对象。

#### 参数

| 名称                 | 类型         | 描述                         |
| :------------------- | :----------- | :--------------------------- |
| `javaObject`         | `JavaObject` | OCR 识别结果的原始 Java 对象 |
| `bounds`             | `Rect`       | 该识别文字在图片中的范围     |
| `text`               | `string`     | OCR 识别的文字内容           |
| `confidence`         | `number`     | OCR 识别文字的可信度         |
| `rotation`           | `number`     | 该识别文字在图片中的旋转角度 |
| `rotationConfidence` | `number`     | 该识别文字的旋转角度可信度   |

## 属性

### javaObject

• `Readonly` **javaObject**: `JavaObject`

OCR 识别结果的原始 Java 对象。在官方 PaddleOCR 中没有什么用，在其他官方 OCR 中可能可以获取附加的额外信息，比如行、字段落、词语分割。

***

### bounds

• `Readonly` **bounds**: [`Rect`](/v9/generated/classes/ui_object.Rect.md)

该识别文字在图片中的范围。可通过 `left`、`top`、`right`、`bottom` 等属性获取它的位置，通过 `centerX`、`centerY` 获得它的中心点，通过 `width`、`height` 获取文字区域的宽度和高度。

**`属性说明`**

* `bounds.left` - 文字区域左边界的 X 坐标
* `bounds.top` - 文字区域上边界的 Y 坐标
* `bounds.right` - 文字区域右边界的 X 坐标
* `bounds.bottom` - 文字区域下边界的 Y 坐标
* `bounds.centerX` - 文字区域中心点的 X 坐标（只读属性）
* `bounds.centerY` - 文字区域中心点的 Y 坐标（只读属性）
* `bounds.width` - 文字区域的宽度（只读属性）
* `bounds.height` - 文字区域的高度（只读属性）

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");

async function main() {
  const ocr = await createOCR();
  const capturer = await requestScreenCapture();
  const img = await capturer.nextImage();
  const results = await ocr.detect(img);

  for (const result of results) {
    const bounds = result.bounds;
    console.log(`文字: ${result.text}`);
    console.log(`位置: (${bounds.left}, ${bounds.top})`);
    console.log(`大小: ${bounds.width} x ${bounds.height}`);
    console.log(`中心点: (${bounds.centerX}, ${bounds.centerY})`);
    console.log(`右下角: (${bounds.right}, ${bounds.bottom})`);
  }

  ocr.release();
  capturer.stop();
}
main();
```

***

### text

• `Readonly` **text**: `string`

OCR 识别的文字内容。

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");

async function main() {
  const ocr = await createOCR();
  const results = await ocr.detect(img);

  for (const result of results) {
    console.log(`识别到的文字: ${result.text}`);
  }

  ocr.release();
}
main();
```

***

### confidence

• `Readonly` **confidence**: `number`

OCR 识别文字的可信度，范围为 \[0, 1]，越接近 1 表示结果越准确、可信。

**`可信度说明`**

* `0.9 - 1.0`: 非常高的可信度，识别结果基本准确
* `0.7 - 0.9`: 较高的可信度，识别结果通常准确
* `0.5 - 0.7`: 中等可信度，识别结果可能包含错误
* `0.0 - 0.5`: 较低的可信度，识别结果可能不准确

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");

async function main() {
  const ocr = await createOCR();
  const capturer = await requestScreenCapture();
  const img = await capturer.nextImage();
  const results = await ocr.detect(img);

  // 只输出可信度大于 0.8 的结果
  const highConfidenceResults = results.filter((r) => r.confidence > 0.8);
  console.log(`高可信度结果数量: ${highConfidenceResults.length}`);

  for (const result of highConfidenceResults) {
    console.log(
      `文字: ${result.text}, 可信度: ${(result.confidence * 100).toFixed(1)}%`
    );
  }

  // 按可信度排序
  const sortedResults = results.sort((a, b) => b.confidence - a.confidence);
  console.log("可信度最高的文字:", sortedResults[0]?.text);

  ocr.release();
  capturer.stop();
}
main();
```

***

### rotation

• `Readonly` **rotation**: `number`

该识别文字在图片中的旋转角度，范围为 \[0, 360)，一般取值为 0 和 180 度。该字段仅在 `OCRDetectionOptions` 的 `detectRotation` 为 `true` 时有效。

**`注意`**

* 如果 `OCRDetectionOptions.detectRotation` 为 `false`（默认值），此字段的值可能不准确或为 0
* 旋转角度以度为单位，0 度表示文字正常方向，180 度表示文字倒置

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");

async function main() {
  const ocr = await createOCR();
  const capturer = await requestScreenCapture();
  const img = await capturer.nextImage();

  // 启用旋转检测
  const results = await ocr.detect(img, {
    detectRotation: true,
  });

  for (const result of results) {
    if (result.rotation !== 0) {
      console.log(`文字: ${result.text}`);
      console.log(`旋转角度: ${result.rotation} 度`);
      console.log(`旋转可信度: ${result.rotationConfidence}`);
    }
  }

  ocr.release();
  capturer.stop();
}
main();
```

***

### rotationConfidence

• `Readonly` **rotationConfidence**: `number`

该识别文字的旋转角度可信度，范围为 \[0, 1]。该字段仅在 `OCRDetectionOptions` 的 `detectRotation` 为 `true` 时有效。

**`注意`**

* 如果 `OCRDetectionOptions.detectRotation` 为 `false`（默认值），此字段的值可能不准确或为 0
* 可信度越接近 1，表示旋转角度的检测结果越可靠

## 方法

### click

▸ **click**(): `Promise`<`boolean`>

在屏幕上点击 OCR 结果在图片中范围的中点位置，返回是否点击成功。实际上相当于 `click(result.bounds.centerX, result.bounds.centerY)`。

**`注意`**

* 此方法会使用无障碍服务进行点击操作
* 点击位置是文字区域的中点，即 `(bounds.centerX, bounds.centerY)`
* 如果截图和当前屏幕内容不一致，点击位置可能不准确
* 建议在截图后立即进行识别和点击，避免屏幕内容变化

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");
const { delay } = require("lang");

async function main() {
  const ocr = await createOCR();
  const capturer = await requestScreenCapture();

  // 等待第一张截图
  await capturer.awaitForImageAvailable();

  // 获取截图并识别文字
  const img = capturer.latestImage();
  const results = await ocr.detect(img);

  // 查找包含特定文字的结果并点击
  for (const result of results) {
    if (result.text.includes("确定") || result.text.includes("OK")) {
      console.log(`找到按钮: ${result.text}`);
      console.log(`位置: (${result.bounds.centerX}, ${result.bounds.centerY})`);

      const success = await result.click();
      console.log(`点击结果: ${success ? "成功" : "失败"}`);

      if (success) {
        await delay(1000); // 等待界面响应
      }
      break;
    }
  }

  ocr.release();
  capturer.stop();
}
main();
```

**`更多使用场景`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");
const { delay } = require("lang");

async function main() {
  const ocr = await createOCR();
  const capturer = await requestScreenCapture();

  // 场景1: 查找并点击特定文字
  const img = await capturer.nextImage();
  const results = await ocr.detect(img);

  const targetText = "登录";
  const targetResult = results.find((r) => r.text === targetText);
  if (targetResult && targetResult.confidence > 0.8) {
    await targetResult.click();
  }

  // 场景2: 过滤低可信度结果后点击
  const highConfidenceResults = results.filter((r) => r.confidence > 0.9);
  for (const result of highConfidenceResults) {
    if (result.text.match(/^\d+$/)) {
      // 只点击纯数字
      await result.click();
      await delay(500);
    }
  }

  // 场景3: 按位置排序后依次点击
  const sortedResults = results.sort((a, b) => {
    if (a.bounds.top !== b.bounds.top) {
      return a.bounds.top - b.bounds.top; // 先按 Y 坐标排序
    }
    return a.bounds.left - b.bounds.left; // 再按 X 坐标排序
  });

  for (const result of sortedResults) {
    console.log(`点击: ${result.text}`);
    await result.click();
    await delay(300);
  }

  ocr.release();
  capturer.stop();
}
main();
```

#### 返回值

`Promise`<`boolean`>

返回一个 Promise，resolve 时返回是否点击成功。`true` 表示点击成功，`false` 表示点击失败。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/ui_activity.Activity.md'
---
# 类: Activity

[ui/activity](/v9/generated/modules/ui_activity.md).Activity

## 继承关系

* `AndroidActivity`

  ↳ **`Activity`**

## 目录

### Constructors

* [constructor](/v9/generated/classes/ui_activity.Activity.md#constructor)

### 属性

* [insetsController](/v9/generated/classes/ui_activity.Activity.md#insetscontroller)

### Accessors

* [contentView](/v9/generated/classes/ui_activity.Activity.md#contentview)
* [initialStatusBar](/v9/generated/classes/ui_activity.Activity.md#initialstatusbar)
* [layoutId](/v9/generated/classes/ui_activity.Activity.md#layoutid)
* [layoutXml](/v9/generated/classes/ui_activity.Activity.md#layoutxml)
* [layoutXmlFile](/v9/generated/classes/ui_activity.Activity.md#layoutxmlfile)

### 方法

* [onContentViewSet](/v9/generated/classes/ui_activity.Activity.md#oncontentviewset)
* [onCreate](/v9/generated/classes/ui_activity.Activity.md#oncreate)

## Constructors

### constructor

• **new Activity**()

#### Overrides

AndroidActivity.constructor

## 属性

### insetsController

• `Protected` **insetsController**: `any`

## Accessors

### contentView

• `get` **contentView**(): `View`

#### 返回值

`View`

***

### initialStatusBar

• `Protected` `get` **initialStatusBar**(): `null` | [`StatusBarConfig`](/v9/generated/interfaces/ui_activity.StatusBarConfig.md)

#### 返回值

`null` | [`StatusBarConfig`](/v9/generated/interfaces/ui_activity.StatusBarConfig.md)

***

### layoutId

• `Protected` `get` **layoutId**(): `null` | `number`

#### 返回值

`null` | `number`

***

### layoutXml

• `Protected` `get` **layoutXml**(): `null` | `string`

#### 返回值

`null` | `string`

***

### layoutXmlFile

• `Protected` `get` **layoutXmlFile**(): `null` | `string`

#### 返回值

`null` | `string`

## 方法

### onContentViewSet

▸ `Protected` **onContentViewSet**(`contentView`): `void`

#### 参数

| 名称          | 类型   |
| :------------ | :----- |
| `contentView` | `View` |

#### 返回值

`void`

***

### onCreate

▸ **onCreate**(`savedInstanceState?`): `void`

#### 参数

| 名称                  | 类型  |
| :-------------------- | :---- |
| `savedInstanceState?` | `any` |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/ui_object.Rect.md'
---
# 类: Rect
[ui\_object](/v9/generated/modules/ui_object.md).Rect

矩形类。表示一个矩形范围。通常用于表示 UI 控件的位置和大小，或 OCR 识别结果的位置范围。

## 目录

### Constructors

* [constructor](/v9/generated/classes/ui_object.Rect.md#constructor)

### Properties

* [bottom](/v9/generated/classes/ui_object.Rect.md#bottom)
* [left](/v9/generated/classes/ui_object.Rect.md#left)
* [right](/v9/generated/classes/ui_object.Rect.md#right)
* [top](/v9/generated/classes/ui_object.Rect.md#top)

### Accessors

* [centerX](/v9/generated/classes/ui_object.Rect.md#centerx)
* [centerY](/v9/generated/classes/ui_object.Rect.md#centery)
* [height](/v9/generated/classes/ui_object.Rect.md#height)
* [width](/v9/generated/classes/ui_object.Rect.md#width)

### 方法

* [fromJava](/v9/generated/classes/ui_object.Rect.md#fromjava)
* [sort](/v9/generated/classes/ui_object.Rect.md#sort)

## Constructors

### constructor

• **new Rect**(`left`, `top`, `right`, `bottom`): [`Rect`](/v9/generated/classes/ui_object.Rect.md)

构造矩形对象。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

// 创建一个矩形，表示从 (10, 20) 到 (100, 200) 的区域
const rect = new Rect(10, 20, 100, 200);
console.log(`矩形宽度: ${rect.width}, 高度: ${rect.height}`);
console.log(`中心点: (${rect.centerX}, ${rect.centerY})`);
```

#### 参数

| 名称     | 类型     | 描述                |
| :------- | :------- | :------------------ |
| `left`   | `number` | 矩形左上角的 X 坐标 |
| `top`    | `number` | 矩形左上角的 Y 坐标 |
| `right`  | `number` | 矩形右下角的 X 坐标 |
| `bottom` | `number` | 矩形右下角的 Y 坐标 |

#### 返回值

[`Rect`](/v9/generated/classes/ui_object.Rect.md)

返回创建的矩形对象。

## Properties

### left

• **left**: `number`

矩形左上角的 X 坐标。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`左边距: ${rect.left}`); // 输出: 左边距: 10
```

***

### top

• **top**: `number`

矩形左上角的 Y 坐标。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`上边距: ${rect.top}`); // 输出: 上边距: 20
```

***

### right

• **right**: `number`

矩形右下角的 X 坐标。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`右边距: ${rect.right}`); // 输出: 右边距: 100
```

***

### bottom

• **bottom**: `number`

矩形右下角的 Y 坐标。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`下边距: ${rect.bottom}`); // 输出: 下边距: 200
```

## Accessors

### width

• `get` **width**(): `number`

获取矩形的宽度。计算方式为 `right - left`。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`宽度: ${rect.width}`); // 输出: 宽度: 90
```

#### 返回值

`number`

矩形的宽度（像素）。

***

### height

• `get` **height**(): `number`

获取矩形的高度。计算方式为 `bottom - top`。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`高度: ${rect.height}`); // 输出: 高度: 180
```

#### 返回值

`number`

矩形的高度（像素）。

***

### centerX

• `get` **centerX**(): `number`

获取矩形的中心点 X 坐标。计算方式为 `(left + right) / 2`。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`中心 X: ${rect.centerX}`); // 输出: 中心 X: 55
```

#### 返回值

`number`

矩形中心点的 X 坐标。

***

### centerY

• `get` **centerY**(): `number`

获取矩形的中心点 Y 坐标。计算方式为 `(top + bottom) / 2`。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

const rect = new Rect(10, 20, 100, 200);
console.log(`中心 Y: ${rect.centerY}`); // 输出: 中心 Y: 110
```

#### 返回值

`number`

矩形中心点的 Y 坐标。

## 方法

### sort

▸ **sort**(): [`Rect`](/v9/generated/classes/ui_object.Rect.md)

排序矩形属性。当 `left` 值大于 `right` 值，或者 `top` 值大于 `bottom` 值时，将其交换。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

// 创建一个坐标顺序错误的矩形
const rect = new Rect(100, 200, 10, 20);
console.log(`排序前: left=${rect.left}, right=${rect.right}`); // left=100, right=10

// 排序矩形
const sortedRect = rect.sort();
console.log(`排序后: left=${sortedRect.left}, right=${sortedRect.right}`); // left=10, right=100
```

#### 返回值

[`Rect`](/v9/generated/classes/ui_object.Rect.md)

排序后的矩形对象。

***

### fromJava

▸ `Static` **fromJava**(`javaRect`): [`Rect`](/v9/generated/classes/ui_object.Rect.md)

从 Java 矩形对象构造矩形。

**`示例`**

```javascript
"nodejs";
const { Rect } = require("ui_object");

// 假设有一个 Java Rect 对象
const javaRect = /* ... */;
const rect = Rect.fromJava(javaRect);
console.log(`矩形: (${rect.left}, ${rect.top}) - (${rect.right}, ${rect.bottom})`);
```

#### 参数

| 名称       | 类型  | 描述                                   |
| :--------- | :---- | :------------------------------------- |
| `javaRect` | `any` | Java 矩形对象（android.graphics.Rect） |

#### 返回值

[`Rect`](/v9/generated/classes/ui_object.Rect.md)

返回创建的矩形对象。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/ui_object.UiObject.md'
---
# 类: UiObject
[ui\_object](/v9/generated/modules/ui_object.md).UiObject

## 目录

### 构造函数

* [constructor](#constructor)

### Properties

* [depth](#depth)
* [indexInParent](#indexInParent)
* [javaObject](#javaObject)
* [parent](#parent)
* [root](#root)

### Accessors

* [accessibilityFocused](#accessibilityfocused)
* [availableExtraData](#availableextradata)
* [boundsInScreen](#boundsinscreen)
* [canOpenPopup](#canopenpopup)
* [checkable](#checkable)
* [checked](#checked)
* [childCount](#childcount)
* [children](#children)
* [className](#classname)
* [clickable](#clickable)
* [contentInvalid](#contentinvalid)
* [contextClickable](#contextclickable)
* [desc](#desc)
* [dismissable](#dismissable)
* [drawingOrder](#drawingorder)
* [editable](#editable)
* [enabled](#enabled)
* [error](#error)
* [focusable](#focusable)
* [focused](#focused)
* [fullId](#fullid)
* [hintText](#hinttext)
* [id](#id)
* [inputType](#inputtype)
* [isHeading](#isheading)
* [isImportantForAccessibility](#isimportantforaccessibility)
* [isMultiLine](#ismultiline)
* [isPassword](#ispassword)
* [isTextEntryKey](#istextentrykey)
* [liveRegion](#liveregion)
* [longClickable](#longclickable)
* [maxTextLength](#maxtextlength)
* [originalText](#originaltext)
* [packageName](#packagename)
* [paneTitle](#panetitle)
* [screenReaderFocusable](#screenreaderfocusable)
* [scrollable](#scrollable)
* [selected](#selected)
* [showingHintText](#showinghinttext)
* [text](#text)
* [textSelectionEnd](#textselectionend)
* [textSelectionStart](#textselectionstart)
* [tooltipText](#tooltiptext)
* [visibleToUser](#visibletouser)
* [windowId](#windowid)

### 方法

* [accessibilityFocus](#accessibilityfocus)
* [clearAccessibilityFocus](#clearaccessibilityfocus)
* [clearFocus](#clearfocus)
* [clearSelection](#clearselection)
* [click](#click)
* [collapse](#collapse)
* [contextClick](#contextclick)
* [copy](#copy)
* [cut](#cut)
* [dismiss](#dismiss)
* [expand](#expand)
* [focus](#focus)
* [longClick](#longclick)
* [pageDown](#pagedown)
* [pageLeft](#pageleft)
* [pageRight](#pageright)
* [pageUp](#pageup)
* [paste](#paste)
* [recycle](#recycle)
* [refresh](#refresh)
* [scrollBackward](#scrollbackward)
* [scrollDown](#scrolldown)
* [scrollForward](#scrollforward)
* [scrollLeft](#scrollleft)
* [scrollRight](#scrollright)
* [scrollToPosition](#scrolltoposition)
* [scrollUp](#scrollup)
* [select](#select)
* [setSelection](#setselection)
* [setText](#settext)
* [showOnScreen](#showonscreen)
* [tree](#tree)

## 构造函数

### constructor

• **new UiObject**(`javaObject`, `depth`, `indexInParent`, `root?`, `parent?`): [UiObject](/v9/generated/classes/ui_object.UiObject.md)

构造UI控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `javaObject` | `any` | Java中的控件对象。 |
| `depth` | `number` | 获取控件的深度。 |
| `indexInParent` | `number` | 获取控件在父控件中的索引。从0开始。 |
| `root` | `undefined` | [`UiObject`](/v9/generated/classes/ui_object.UiObject.md) |  获取控件所在布局的根布局控件。 |
| `parent` | `undefined` | [`UiObject`](/v9/generated/classes/ui_object.UiObject.md) | 获取控件的父控件。最外层控件的父控件为null。 |

#### 返回值

`UiObject`

## Properties

### depth

• `Readonly` **depth**: `number`

***

### indexInParent

• `Readonly` **indexInParent**: `number`

***

### javaObject

• `Protected` **javaObject**: `any`

***

### parent

• `Optional` `Readonly` **parent**: [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)

***

### root

• `Readonly` **root**: [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)

## Accessors

### accessibilityFocused

* `get` **accessibilityFocused**(): `boolean`

控件是否处于无障碍焦点。

#### 返回值

`boolean`

***

### availableExtraData

* `get` **availableExtraData**(): `string`\[]

控件可用的额外数据。

#### 返回值

`string`\[]

***

### boundsInScreen

* `get` **boundsInScreen**(): [`Rect`](/v9/generated/classes/ui_object.Rect.md)

控件在屏幕中的边框位置。

#### 返回值

[`Rect`](/v9/generated/classes/ui_object.Rect.md)

***

### canOpenPopup

* `get` **canOpenPopup**(): `boolean`

控件是否可打开弹窗。

#### 返回值

`boolean`

***

### checkable

* `get` **checkable**(): `boolean`

控件是否可被勾选。

#### 返回值

`boolean`

***

### checked

* `get` **checked**(): `boolean`

控件是否已被勾选。

#### 返回值

`boolean`

***

### childCount

* `get` **childCount**(): `number`

子控件的数量

#### 返回值

`number`

***

### children

* `get` **children()**: [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]

子控件的列表。

#### 返回值

[`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]

***

### className

* `get` **className**(): `string`

控件的类名

#### 返回值

`string`

***

### clickable

* `get` **clickable**(): `boolean`

控件是否可被点击。

#### 返回值

`boolean`

***

### contentInvalid

* `get` **contentInvalid**(): `boolean`

控件的内容是否无效。例如，日期格式不正确。

#### 返回值

`boolean`

***

### contextClickable

* `get` **contextClickable**(): `boolean`

控件是否可在上下文中点击

#### 返回值

`boolean`

***

### desc

* `get` **desc**(): `string`

控件的描述信息

#### 返回值

`string`

***

### dismissable

* `get` **dismissable**(): `boolean`

控件是否可以关闭。

#### 返回值

`boolean`

***

### drawingOrder

* `get` **drawingOrder**(): `number`

控件在父控件中的绘制顺序。通常可用于区分同一个层次的控件。

#### 返回值

`number`

***

### editable

* `get` **editable**(): `boolean`

控件是否可编辑。

#### 返回值

`boolean`

***

### enabled

* `get` **enabled**(): `boolean`

控件是否已启用。大多数控件都是启用的状态(enabled为true)，处于“禁用”状态通常是灰色并且不可点击。

#### 返回值

`boolean`

***

### error

* `get` **error**(): `string`

控件的错误信息文本。

#### 返回值

`string`

***

### focusable

* `get` **focusable**(): `boolean`

控件是否可获取焦点。

#### 返回值

`boolean`

***

### focused

* `get` **focused**(): `boolean`

控件是否已获取焦点。

#### 返回值

`boolean`

***

### fullId

* `get` **fullId**(): `string`
  控件的完整id。在前方会有应用的页面信息。

#### 返回值

`string`

***

### hintText

* `get` **hintText**(): `string`

控件的提示文本。

#### 返回值

`string`

***

### id

* `get` **id**(): `string`

控件的id。

#### 返回值

`string`

***

### inputType

* `get` **inputType**(): `number`

控件的输入类型。

#### 参见

[inputType](https://developer.android.com/reference/android/text/InputType)

#### 返回值

`number`

***

### isHeading

* `get` **isHeading**(): `boolean`

控件是否代表标题

#### 返回值

`boolean`

***

### isImportantForAccessibility

* `get` **isImportantForAccessibility**(): `boolean`

控件自认为是否关键。

#### 返回值

`boolean`

***

### isMultiLine

* `get` **isMultiLine**(): `boolean`

控件是否为多行可编辑文本。

#### 返回值

`boolean`

***

### isPassword

* `get` **isPassword**(): `boolean`

输入类型是否为密码。密码输入框中内容会用星号代替。

#### 返回值

`boolean`

***

### isTextEntryKey

* `get` **isTextEntryKey**(): `boolean`

控件是否为键盘或小键盘中的文本输入键。

#### 返回值

`boolean`

***

### liveRegion

* `get` **liveRegion**(): `number`

获取节点的活动区域模式。

* 活动区域是包含用户重要信息的区域，当它发生变化时，会通知用户。
* 例如，在带有显示“密码错误”通知的 TextView 的登录屏幕中，控件会标记活动区域为 View#ACCESSIBILITY\_LIVE\_REGION\_POLITE

#### 返回值

`number`

***

### longClickable

* `get` **longClickable**(): `boolean`

控件是否可被长按

#### 返回值

`boolean`

***

### maxTextLength

* `get` **maxTextLength**(): `number`

控件的最大文本长度。

#### 返回值

`number`

***

### originalText

* `get` **originalText**(): `string`

控件的原始文本

#### 返回值

`string`

***

### packageName

* `get` **packageName**(): `string`

控件所在应用的包名

#### 返回值

`string`

***

### paneTitle

* `get` **paneTitle**(): `boolean`

控件所在窗口的标题。

#### 返回值

`boolean`

***

### screenReaderFocusable

* `get` **screenReaderFocusable**(): `boolean`

屏幕阅读器是否应将该控件视为可聚焦单元。

#### 返回值

`boolean`

***

### scrollable

* `get` **scrollable**(): `boolean`

控件是否可滑动。

#### 返回值

`boolean`

***

### selected

* `get` **selected**(): `boolean`

控件是否选中。被选中指的是，例如QQ聊天界面点击下方的"表情按钮"时，会出现自己收藏的表情，这时"表情按钮"便处于选中状态，其selected属性为true。

#### 返回值

`boolean`

***

### showingHintText

* `get` **showingHintText**(): `boolean`

控件是否正显示提示文本。

#### 返回值

`boolean`

***

### text

* `get` **text**(): `string`

控件的文本内容

#### 返回值

`string`

***

### textSelectionEnd

* `get` **textSelectionEnd**(): `number`

控件中选中文本的结束位置。

#### 返回值

`number`

***

### textSelectionStart

* `get` **textSelectionStart**(): `number`

控件中选中文本的起始位置。

#### 返回值

`number`

***

### tooltipText

* `get` **tooltipText**(): `string`

控件的工具提示文本。

#### 返回值

`string`

***

### visibleToUser

* `get` **visibleToUser**(): `boolean`

控件是否可见。

#### 返回值

`boolean`

***

### windowId

* `get` **windowId**(): `number`

控件所在的窗口id。

#### 返回值

`number`

***

## 方法

### accessibilityFocus

* **accessibilityFocus**(): *boolean*

获取无障碍焦点。

#### 返回值

`boolean` 是否获取成功。

***

### clearAccessibilityFocus

* **clearAccessibilityFocus**(): *boolean*

清除无障碍焦点

#### 返回值

`boolean` 是否清除成功。

***

### clearFocus

* **clearFocus**(): *boolean*

清除焦点。

#### 返回值

`boolean` 是否清除成功。

***

### clearSelection

* **clearSelection**(): *boolean*

取消选用该控件

#### 返回值

`boolean` 是否取消选中成功。

***

### click

* **click**(): *boolean*

点击该控件。

如果该函数返回false，可能是该控件不可点击(clickable为false)，当前界面无法响应该点击等（这种情况下可以使用clickCenter()代替）。

#### 返回值

`boolean` 是否点击成功。

***

### collapse

* **collapse**(): *boolean*

折叠控件

#### 返回值

`boolean` 是否折叠成功。

***

### contextClick

* **contextClick**(): *boolean*

点击上下文。

#### 返回值

`boolean` 是否点击成功。

***

### copy

* **copy**(): *boolean*

将当选选中文本复制到剪贴板。

#### 返回值

`boolean` 是否复制成功。

***

### cut

* **cut**(): *boolean*

将当前选中文本剪切到剪贴板。

#### 返回值

`boolean` 是否剪切成功。

***

### dismiss

* **dismiss**(): *boolean*

关闭控件。

#### 返回值

`boolean` 是否关闭成功。

***

### expand

* **expand**(): *boolean*

展开控件。

#### 返回值

`boolean` 是否展开成功。

***

### focus

* **focus**(): *boolean*

获取焦点。

#### 返回值

`boolean` 是否获取成功。

***

### longClick

* **longClick**(): *boolean*

长按该控件。

#### 返回值

`boolean` 是否长按成功。

***

### pageDown

* **pageDown**(): *boolean*

向下翻页。

#### 返回值

`boolean` 是否翻页成功。

***

### pageLeft

* **pageLeft**(): *boolean*

向左翻页。

#### 返回值

`boolean` 是否翻页成功。

***

### pageRight

* **pageRight**(): *boolean*

向右翻页。

#### 返回值

`boolean` 是否翻页成功。

***

### pageUp

* **pageUp**(): *boolean*

向上翻页。

#### 返回值

`boolean` 是否翻页成功。

***

### paste

* **paste**(): *boolean*

粘贴内容到该控件。

#### 返回值

`boolean` 是否粘贴成功。

***

### recycle

* **recycle**(): *void*

回收控件。

#### 返回值

`void`

***

### refresh

* **refresh**(): *void*

刷新控件

#### 返回值

`void`

***

### scrollBackward

* **scrollBackward**(): *boolean*

向后滚动。(一般为向上或向左)

#### 返回值

`boolean` 是否滚动成功。

***

### scrollDown

* **scrollDown**(): *boolean*

向下滚动

#### 返回值

`boolean` 是否滚动成功。

***

### scrollForward

* **scrollForward**(): *boolean*

向前滚动。(一般为向下或向右)

#### 返回值

`boolean` 是否滚动成功。

***

### scrollLeft

* **scrollLeft**(): *boolean*

向左滚动

#### 返回值

`boolean` 是否滚动成功。

***

### scrollRight

* **scrollRight**(): *boolean*

向右滚动

#### 返回值

`boolean` 是否滚动成功。

***

### scrollToPosition

* **scrollToPosition**(position: *number*): *boolean*

滚动到指定位置。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `position` | `number` | 需滚动到的位置 |

#### 返回值

`boolean` 是否滚动成功。

***

### scrollUp

* **scrollUp**(): *boolean*

向上滚动

#### 返回值

`boolean` 是否滚动成功。

***

### select

* **select**(): *boolean*

选用该控件

#### 返回值

`boolean` 是否选中成功。

***

### setSelection

* **setSelection**(start: *number*, end: *number*): *boolean*

选中文本

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `start` | `number` | 选中的开始位置 |
| `end` | `number` | 选中的结束位置 |

#### 返回值

`boolean` 是否选中成功。

***

### setText

* **setText**(text: *string*): *boolean*

输入文本。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `text` | `string` | 要输入的文本内容。 |

#### 返回值

`boolean` 是否输入成功。

### showOnScreen

* **showOnScreen**(): *boolean*

显示到屏幕上。

#### 返回值

`boolean` 是否显示成功。

***

### tree

* **tree**(): [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]

#### 返回值

[`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/ui_selector.NotFoundError.md
---
# 类: NotFoundError
[ui\_object](/v9/generated/modules/ui_object.md).NotFoundError

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/classes/ui_selector.UiSelector.md
---
# 类: UiSelector
[ui\_object](/v9/generated/modules/ui_object.md).UiSelector

控件选择器类。

## 目录

### 构造函数

* [constructor](#constructor)

### 属性

* [defaultUiObjectProvider](#defaultuiobjectprovider)

### 方法

* [all](#all)
* [atLeast](#atleast)
* [atLeastOne](#atleastone)
* [atMost](#atmost)
* [first](#first)
* [firstOrNull](#first)
* [findFirst](#first)
* [findFirstOrNull](#first)
* [from](#from)
* [last](#last)
* [lastOrNull](#lastornull)
* [findLast](#findlast)
* [findLastOrNull](#findlastornull)
* [maxretries](#maxretries)
* [takeAt](#takeat)
* [takeAtOrNull](#takeatornull)
* [findAt](#findat)
* [findAtOrNull](#findatornull)
* [timeout](#timeout)
* [where](#where)

## 构造函数

### constructor

* new UiSelector(): [`UiSelector`](ui_selector.UiSelector.md)

#### 返回值

[`UiSelector`](ui_selector.UiSelector.md)

## 属性

### defaultUiObjectProvider

`静态` defaultUiObjectProvider: [UiObjectProvider](../modules/ui_selector.html#UiObjectProvider) = ...

## 方法

### all

* all(): *Promise*<[UiObject](ui_object.UiObject.md)\[]>

获取全部符合条件的控件。

#### 返回

*Promise*<[UiObject](ui_object.UiObject.md)\[]> 返回控件列表的Promise

***

### atLeast

* atLeast(min: *number*): [UiSelector]()

设置最少返回的控件数量。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `min` | `number` | 最小数量 |

#### 返回

[`UiSelector`]() 自身

***

### atLeastOne

* atLeastOne(): [UiSelector]()

设置最少返回一个的控件。

#### 返回

[`UiSelector`]() 自身

***

### atMost

* atMost(max: *number*): [`UiSelector`]()

设置最多返回的控件数量。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `max` | `number` | 最大数量 |

#### 返回

[`UiSelector`]() 自身

***

### first

* first(): *Promise*<*undefined* | [`UiObject`](ui_object.UiObject.md)>

获取第一个符合条件的控件。

#### 返回

Promise<[`UiObject`](ui_object.UiObject.md)> 返回控件的Promise

***

### firstOrNull

* firstOrNull(): *Promise*<*undefined* | [`UiObject`](ui_object.UiObject.md)>

获取第一个符合条件的控件。找不到返回null

#### 返回

Promise<[`UiObject`](ui_object.UiObject.md) | null> 返回控件的Promise

***

### findFirst

* findFirst(`options?`): Promise<[`UiObject`](ui_object.UiObject.md)>

....

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `options` | [`FindOptions`](../interfaces/ui_selector.FindOptions.md) |  |

#### 返回

Promise<[`UiObject`](ui_object.UiObject.md)> 返回控件的Promise

***

### findFirstOrNull

* findFirstOrNull(`options?`): Promise<[`UiObject`](ui_object.UiObject.md) | null>

....

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `options` | [`FindOptions`](../interfaces/ui_selector.FindOptions.md) |  |

#### 返回

Promise<[`UiObject`](ui_object.UiObject.md) | null> 返回控件的Promise

***

### from

* from(target: [UiSelector]() | [UiObject](ui_object.UiObject.md) | [UiObject](ui_object.UiObject.md)\[] | [UiObjectProvider](../modules/ui_selector.html#UiObjectProvider)): [UiSelector]()

设置选择控件的来源

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `target` | [UiSelector]() | [UiObject](ui_object.UiObject.md) | [UiObject](ui_object.UiObject.md)\[] | [UiObjectProvider](../modules/ui_selector.html#UiObjectProvider) | 目标 |

#### 返回

[UiSelector]() 自身

***

### last

* last(): *Promise*<[`UiObject`](ui_object.UiObject.md)>

获取最后一个符合条件的控件。

#### 返回

*Promise*<[`UiObject`](ui_object.UiObject.md)> 返回控件的Promise

***

### lastOrNull

* lastOrNull(): *Promise*<*undefined* | *Promise*<*undefined* | [UiObject](ui_object.UiObject.md)>

获取最后一个符合条件的控件。

#### 返回

*Promise*<*undefined* | [UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### findLast

* findLast(`options?`): *Promise*<[UiObject](ui_object.UiObject.md)>

获取最后一个符合条件的控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `options` | [`FindOptions`](../interfaces/ui_selector.FindOptions.md) |  |

#### 返回

*Promise*<[UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### findLastOrNull

* findLastOrNull(`options?`): *Promise*<*undefined* | [UiObject](ui_object.UiObject.md)>

获取最后一个符合条件的控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `options` | [`FindOptions`](../interfaces/ui_selector.FindOptions.md) |  |

#### 返回

*Promise*<*undefined* | [UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### maxRetries

* maxRetries(max: *number*): [UiSelector]()

设置查询重试次数。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `max` | `number` | 重试次数 |

#### 返回

[UiSelector]() 自身

***

### takeAt

* takeAt(i: *number*): *Promise*<[UiObject](ui_object.UiObject.md)>

获取第i个符合条件的控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `i` | `number` | 第几个控件 |

#### 返回

*Promise*<[UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### takeAtOrNull

* takeAtOrNull(i: *number*): *Promise*<*undefined* | [UiObject](ui_object.UiObject.md)>

获取第i个符合条件的控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `i` | `number` | 第几个控件 |

#### 返回

*Promise*<*undefined* | [UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### findAt

* findAt(`i`, `options?`): *Promise*<[UiObject](ui_object.UiObject.md)>

获取第i个符合条件的控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `i` | `number` | 第几个控件 |
| `options` | [`FindOptions`](../interfaces/ui_selector.FindOptions.md) |  |

#### 返回

*Promise*<[UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### findAtOrNull

* findAtOrNull(`i`, `options?`): *Promise*<*undefined* | [UiObject](ui_object.UiObject.md)>

获取第i个符合条件的控件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `i` | `number` | 第几个控件 |
| `options` | [`FindOptions`](../interfaces/ui_selector.FindOptions.md) |  |

#### 返回

*Promise*<*undefined* | [UiObject](ui_object.UiObject.md)> 返回控件的Promise

***

### timeout

* timeout(timeout: *number*): [UiSelector]()

设置查询超时时间。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `timeout` | `number` | 超时时间 |

#### 返回

[UiSelector]()

***

### where

* where(filter: [SelectorQuery](../interfaces/ui_selector.SelectorQuery.html) | [UiObjectFilter](../modules/ui_selector.html#UiObjectFilter)): [UiSelector]()

设置选择控件的条件。

#### 参数

| 名称    | 类型     | 描述                         |
| :------ | :------- | :--------------------------- |
| `filter` | [`SelectorQuery`](../interfaces/ui_selector.SelectorQuery.md) | [UiObjectFilter](../modules/ui_selector.md#uiobjectfilter) | 选择条件 |

#### 返回

[`UiSelector`]() 自身

***

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/classes/ui_view.Widget.md'
---
# 类: Widget
[ui/view](/v9/generated/modules/ui_view.md).Widget

1. created
2. render
3. rootViewCreated: root view created but children are not inflated
4. inflated: children inflated and internal and initial attributes are applied, but external attributes are not applied
5. mounted: external attributes applied

## 目录

### Constructors

* [constructor](/v9/generated/classes/ui_view.Widget.md#constructor)

### 属性

* [attrs](/v9/generated/classes/ui_view.Widget.md#attrs)

### Accessors

* [initialAttributes](/v9/generated/classes/ui_view.Widget.md#initialattributes)
* [view](/v9/generated/classes/ui_view.Widget.md#view)

### 方法

* [created](/v9/generated/classes/ui_view.Widget.md#created)
* [getAttribute](/v9/generated/classes/ui_view.Widget.md#getattribute)
* [hasAttribute](/v9/generated/classes/ui_view.Widget.md#hasattribute)
* [inflated](/v9/generated/classes/ui_view.Widget.md#inflated)
* [mounted](/v9/generated/classes/ui_view.Widget.md#mounted)
* [render](/v9/generated/classes/ui_view.Widget.md#render)
* [rootViewCreated](/v9/generated/classes/ui_view.Widget.md#rootviewcreated)
* [setAttribute](/v9/generated/classes/ui_view.Widget.md#setattribute)
* [create](/v9/generated/classes/ui_view.Widget.md#create)
* [of](/v9/generated/classes/ui_view.Widget.md#of)
* [register](/v9/generated/classes/ui_view.Widget.md#register)

## Constructors

### constructor

• **new Widget**()

## 属性

### attrs

• **attrs**: [`WidgetAttributes`](/v9/generated/interfaces/ui_view.WidgetAttributes.md) = `{}`

## Accessors

### initialAttributes

• `get` **initialAttributes**(): [`WidgetAttributes`](/v9/generated/interfaces/ui_view.WidgetAttributes.md)

#### 返回值

[`WidgetAttributes`](/v9/generated/interfaces/ui_view.WidgetAttributes.md)

***

### view

• `get` **view**(): `any`

#### 返回值

`any`

## 方法

### created

▸ **created**(): `void`

#### 返回值

`void`

***

### getAttribute

▸ **getAttribute**(`name`, `def`): [`AttributeValue`](/v9/generated/modules/ui_view.md#attributevalue)

#### 参数

| 名称   | 类型                                                         |
| :----- | :----------------------------------------------------------- |
| `name` | `string`                                                     |
| `def`  | () => [`AttributeValue`](/v9/generated/modules/ui_view.md#attributevalue) |

#### 返回值

[`AttributeValue`](/v9/generated/modules/ui_view.md#attributevalue)

***

### hasAttribute

▸ **hasAttribute**(`name`): `boolean`

#### 参数

| 名称   | 类型     |
| :----- | :------- |
| `name` | `string` |

#### 返回值

`boolean`

***

### inflated

▸ **inflated**(): `void`

#### 返回值

`void`

***

### mounted

▸ **mounted**(): `void`

#### 返回值

`void`

***

### render

▸ `Abstract` **render**(`context`, `parent`): `any`

#### 参数

| 名称      | 类型        |
| :-------- | :---------- |
| `context` | `Context`   |
| `parent`  | `ViewGroup` |

#### 返回值

`any`

***

### rootViewCreated

▸ **rootViewCreated**(`view`): `void`

#### 参数

| 名称   | 类型  |
| :----- | :---- |
| `view` | `any` |

#### 返回值

`void`

***

### setAttribute

▸ **setAttribute**(`name`, `value`, `def`): `void`

#### 参数

| 名称    | 类型                                                         |
| :------ | :----------------------------------------------------------- |
| `name`  | `string`                                                     |
| `value` | [`AttributeValue`](/v9/generated/modules/ui_view.md#attributevalue) |
| `def`   | (`value`: [`AttributeValue`](/v9/generated/modules/ui_view.md#attributevalue)) => `void` |

#### 返回值

`void`

***

### create

▸ `Static` **create**(`name`): `undefined` | [`Widget`](/v9/generated/classes/ui_view.Widget.md)

#### 参数

| 名称   | 类型     |
| :----- | :------- |
| `name` | `string` |

#### 返回值

`undefined` | [`Widget`](/v9/generated/classes/ui_view.Widget.md)

***

### of

▸ `Static` **of**<`W`>(`view`): `undefined` | `W`

#### 类型参数

| 名称 | 类型                                                         |
| :--- | :----------------------------------------------------------- |
| `W`  | extends [`Widget`](/v9/generated/classes/ui_view.Widget.md)<`W`> |

#### 参数

| 名称   | 类型   |
| :----- | :----- |
| `view` | `View` |

#### 返回值

`undefined` | `W`

***

### register

▸ `Static` **register**(`name`, `widget`): `void`

#### 参数

| 名称     | 类型                                                         |
| :------- | :----------------------------------------------------------- |
| `name`   | `string`                                                     |
| `widget` | [`WidgetClass`](/v9/generated/modules/ui_view.md#widgetclass) |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/enums/device.BrightnessMode.md'
---
# 枚举: BrightnessMode
[device](/v9/generated/modules/device.md).BrightnessMode

亮度模式，Manual为手动亮度，Automatic为自动亮度。

**`参见`**

https://developer.android.google.cn/reference/android/provider/Settings.System#SCREEN\_BRIGHTNESS\_MODE\_AUTOMATIC

## 目录

### 枚举项

* [Automatic](/v9/generated/enums/device.BrightnessMode.md#automatic)
* [Manual](/v9/generated/enums/device.BrightnessMode.md#manual)

## 枚举项

### Automatic

• **Automatic** = `1`

***

### Manual

• **Manual** = `0`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/enums/image.FeatureDetectMethod.md
---
# 枚举: FeatureDetectMethod
[image](/v9/generated/modules/image.md).FeatureDetectMethod

特征检测方法枚举，用于指定图像特征检测时使用的算法。

## 目录

### 枚举项

* [ORB](/v9/generated/enums/image.FeatureDetectMethod.md#orb)
* [SIFT](/v9/generated/enums/image.FeatureDetectMethod.md#sift)

## 枚举项

### SIFT

• **SIFT** = `1`

SIFT（Scale-Invariant Feature Transform）特征检测方法。SIFT 是一种经典的特征检测算法，对尺度、旋转、光照变化具有较好的鲁棒性。

**`参见`**

* [SIFT 算法](https://en.wikipedia.org/wiki/Scale-invariant_feature_transform)

***

### ORB

• **ORB** = `2`

ORB（Oriented FAST and Rotated BRIEF）特征检测方法。ORB 是一种快速的特征检测算法，是 FAST 关键点检测器和 BRIEF 描述符的结合，速度比 SIFT 快，但精度略低。

**`参见`**

* [ORB 算法](https://en.wikipedia.org/wiki/Oriented_FAST_and_rotated_BRIEF)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/enums/image.FeatureMatcher.md'
---
# 枚举: FeatureMatcher
[image](/v9/generated/modules/image.md).FeatureMatcher

特征匹配器枚举，用于指定图像特征匹配时使用的算法。

## 目录

### 枚举项

* [BRUTEFORCE](/v9/generated/enums/image.FeatureMatcher.md#bruteforce)
* [BRUTEFORCE\_HAMMING](/v9/generated/enums/image.FeatureMatcher.md#bruteforce_hamming)
* [BRUTEFORCE\_HAMMINGLUT](/v9/generated/enums/image.FeatureMatcher.md#bruteforce_hamminglut)
* [BRUTEFORCE\_L1](/v9/generated/enums/image.FeatureMatcher.md#bruteforce_l1)
* [BRUTEFORCE\_SL2](/v9/generated/enums/image.FeatureMatcher.md#bruteforce_sl2)
* [FLANNBASED](/v9/generated/enums/image.FeatureMatcher.md#flannbased)

## 枚举项

### FLANNBASED

• **FLANNBASED** = `1`

基于 FLANN（Fast Library for Approximate Nearest Neighbors）的匹配器。FLANN 是一种快速近似最近邻搜索算法，适合大规模特征匹配。

***

### BRUTEFORCE

• **BRUTEFORCE** = `2`

暴力匹配器，使用穷举法进行特征匹配。对所有特征点进行一一比较，精度高但速度较慢。

***

### BRUTEFORCE\_L1

• **BRUTEFORCE\_L1** = `3`

使用 L1 距离（曼哈顿距离）的暴力匹配器。

***

### BRUTEFORCE\_HAMMING

• **BRUTEFORCE\_HAMMING** = `4`

使用汉明距离的暴力匹配器。适用于二进制描述符（如 ORB）。

***

### BRUTEFORCE\_HAMMINGLUT

• **BRUTEFORCE\_HAMMINGLUT** = `5`

使用汉明距离查找表的暴力匹配器。比 `BRUTEFORCE_HAMMING` 更快，适用于二进制描述符。

***

### BRUTEFORCE\_SL2

• **BRUTEFORCE\_SL2** = `6`

使用 L2 距离（欧几里得距离）的暴力匹配器。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/enums/media_projection.Orientation.md
---
# 枚举: Orientation
[media\_projection](/v9/generated/modules/media_projection.md).Orientation

截图方向。

## 目录

### 枚举项

* [AUTO](/v9/generated/enums/media_projection.Orientation.md#auto)
* [CURRENT](/v9/generated/enums/media_projection.Orientation.md#current)
* [LANDSCAPE](/v9/generated/enums/media_projection.Orientation.md#landscape)
* [PORTRAIT](/v9/generated/enums/media_projection.Orientation.md#portrait)

## 枚举项

### CURRENT

• **CURRENT** = `0`

当前屏幕方向，也即请求截图权限时，设备的屏幕方向。

***

### AUTO

• **AUTO** = `1`

根据设备方向动态调整截图方向。

***

### LANDSCAPE

• **LANDSCAPE** = `2`

横屏截图。

***

### PORTRAIT

• **PORTRAIT** = `3`

竖屏截图。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/enums/sensors.SensorDelay.md'
---
# 枚举: SensorDelay
[sensors](/v9/generated/modules/sensors.md).SensorDelay

传感器事件的更新频率。

作为函数[enableSensorEvent](/v9/generated/interfaces/sensors.SensorExt.md#enablesensorevent)的参数，决定`change`事件的频率。

## 目录

### 枚举项

* [Fastest](/v9/generated/enums/sensors.SensorDelay.md#fastest)
* [Game](/v9/generated/enums/sensors.SensorDelay.md#game)
* [Normal](/v9/generated/enums/sensors.SensorDelay.md#normal)
* [Ui](/v9/generated/enums/sensors.SensorDelay.md#ui)

## 枚举项

### Fastest

• **Fastest** = `0`

尽可能快地获取传感器数据。

***

### Game

• **Game** = `1`

适合游戏的传感器频率。

***

### Normal

• **Normal** = `3`

默认传感器事件频率。

***

### Ui

• **Ui** = `2`

适合UI的传感器频率。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/enums/ui_selector.TraversalOrder.md
---
# 枚举: TraversalOrder
[ui\_selector](/v9/generated/modules/ui_selector.md).TraversalOrder

遍历顺序。0为正序，1为倒序。

## 目录

### 枚举项

* [Normal](#normal)
* [Reverse](#reverse)

## 枚举项

### Normal

• **Normal** = `0`

***

### Reverse

• **Reverse** = `1`

***

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.Accessibility.md
---
# 接口: Accessibility
[accessibility](/v9/generated/modules/accessibility.md).Accessibility

无障碍服务

## 继承关系

* `unknown`

  ↳ **`EventEmitter`**

## 目录

### 属性

* [service](#service)
* [enabled](#enabled)

### 方法

* [root](#root)
* [rootOrNull](#rootOrNull)
* [windows](#windows)
* [enableService](#enableService)
* [enableKeyEvents](#enableKeyEvents)
* [disableKeyEvents](#disableKeyEvents)
* [clearCache](#clearCache)

## 属性

### service

安卓无障碍服务实例

• `readonly` **service**: `android.accessibilityservice.AccessibilityService | null`

***

### enabled

无障碍服务是否启用

• `readonly` **enabled**: `boolean`

## 方法

### root

获取当前活跃窗口的根节点。若无障碍服务未启动，则会等待服务启动；若无法获取到根节点，则返回 `null`的Promise。

• **root**: `Promise<UiObject | null>`

***

### rootOrNull

直接获取当前活跃窗口的根节点。若无障碍服务未启动，或无法获取到根节点，则返回 null。

• **rootOrNull**: `UiObject | null`

***

### windows

• `get` **windows**: `Array<AccessibilityWindow>`

***

### enableService

启用无障碍服务，若无权限将申请权限并等待用户授予权限

• **enableService(`options?`)**: `Promise<android.accessibilityservice.AccessibilityService>`

#### 参数

| 名称       | 类型             |
| :--------- | :--------------- |
| `options?`    | `"EnableServiceOptions"` |

#### 返回值

`Promise<android.accessibilityservice.AccessibilityService>;`

***

### on

监听Toast事件，当其他应用发出Toast时，会触发该事件。

• **enableService(`"toast"`)**: `this`

#### 参数

| 名称       | 类型             |
| :--------- | :--------------- |
| `event`    | `"toast"` |
| `listener`    | `(event: ToastEvent) => void` |

#### 返回值

`this`

***

### enableKeyEvents

启用按键监听，启用后可以通过`key_event`, `key_down`, `key_up`等事件监听按键。

• **enableKeyEvents()**: `this`

#### 返回值

`this`

***

```
 定 制   Q Q:  6 8 1 0 7 8 0 8            .__ 
__  _  ____ __ ___.__.__ __  ____ _____  |__|
\ \/ \/ /  |  <   |  |  |  \/    \\__  \ |  |
 \     /|  |  /\___  |  |  /   |  \/ __ \|  |
  \/\_/ |____/ / ____|____/|___|  (____  /__|
               \/               \/     \/    
```

### disableKeyEvents

禁用按键监听。

• **disableKeyEvents()**: `this`

#### 返回值

`this`

***

### on

按键事件，参考[KeyEvent](https://developer.android.com/reference/android/view/KeyEvent)

• **on(`"key_event"`)**: `this`

#### 参数

| 名称       | 类型             |
| :--------- | :--------------- |
| `event`    | `"key_event"` |
| `listener`    | `(keyCode: number, event: android.view.KeyEvent) => void` |

#### 返回值

`this`

***

### on

按键按下事件，任意按键按下时触发

• **on(`"key_down"`)**: `this`

#### 参数

| 名称       | 类型             | 备注             |
| :--------- | :--------------- |:--------------- |
| `event`    | `"key_down"` |固定值为 `"key_down"`|
| `listener`    | `(keyCode: number, event: android.view.KeyEvent) => void` |回调函数 |

#### 返回值

`this`

***

### on

按键弹起事件，任意按键弹起时触发

• **on(`"key_up"`)**: `this`

#### 参数

| 名称       | 类型             | 备注             |
| :--------- | :--------------- |:--------------- |
| `event`    | `"key_up"` |固定值为 `"key_up"`|
| `listener`    | `(keyCode: number, event: android.view.KeyEvent) => void` |回调函数 |

#### 返回值

`this`

***

### clearCache

清除无障碍控件缓存。

• **clearCache()**: `this`

#### 返回值

`this`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.AccessibilityEvent.md
---
# 接口: AccessibilityEvent
[accessibility](/v9/generated/modules/accessibility.md).AccessibilityEvent

## 继承关系

* `unknown`

  ↳ **`android.view.accessibility.AccessibilityEvent`**
  ↳ **`Q Q ：6 810 7808 定制`**

## 目录

### 方法

* [source](#source)
* [packageName](#packageName)
* [className](#className)
* [eventType](#eventType)
* [eventTime](#eventTime)
* [action](#action)
* [contentChangeTypes](#contentChangeTypes)
* [windowChangeTypes](#windowChangeTypes)

## 方法

***

### source

• `get` **source**: `UiObject|null`

***

### packageName

• `get` **packageName**: `string`

***

### className

• `get` **className**: `string`

***

### eventType

• `get` **eventType**: `string`

***

### eventTime

• `get` **eventTime**: `number`

***

### action

• `get` **action**: `number`

***

### contentChangeTypes

• `get` **contentChangeTypes**: `Array<string>`

***

### windowChangeTypes

• `get` **windowChangeTypes**: `Array<string>`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.AccessibilityWindow.md
---
# 接口: AccessibilityWindow
[accessibility](/v9/generated/modules/accessibility.md).AccessibilityWindow

## 继承关系

* `unknown`

  ↳ **`android.view.accessibility.AccessibilityWindowInfo`**

## 目录

### 方法

* [root](#root)
* [id](#id)
* [root](#root)
* [active](#active)
* [title](#title)
* [type](#type)
* [bounds](#bounds)
* [bounds](#layer)

## 方法

***

### root

• `get` **root**: `UiObject|null`

***

### id

• `get` **id**: `number`

***

### active

• `get` **active**: `boolean`

***

### title

• `get` **title**: `string | null`

***

### type

• `get` **type**: `number`

***

### bounds

• `get` **bounds**: `Rect`

***

### layer

• `get` **layer**: `number`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.EnableServiceOptions.md
---
# 接口: EnableServiceOptions
[accessibility](/v9/generated/modules/accessibility.md).EnableServiceOptions

无障碍服务 启用配置

## 目录

### 属性

* [toast](#toast)
* [timeout](#timeout)

## 属性

### toast

是否启用气泡提示

• **toast?**: `string|boolean`

***

### timeout

• **timeout?**: `number`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.NextEventOptions.md
---
# 接口: NextEventOptions
[accessibility](/v9/generated/modules/accessibility.md).NextEventOptions

## 目录

### 属性

* [timeout](#timeout)

## 属性

### timeout

• **timeout**: `string|null`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.Point.md
---
# 接口: Point
[accessibility](/v9/generated/modules/accessibility.md).Point

* 一个点。表示屏幕上的一个坐标点。以左上角为原点，右下角为最大值，一般等同于屏幕分辨率。

## 目录

### 属性

* [x](#x)
* [y](#y)

## 属性

### x

• `Readonly` **x**: `number`

X坐标

***

### y

• `Readonly` **y**: `number`

Y坐标

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/accessibility.ToastEvent.md
---
# 接口: ToastEvent
[accessibility](/v9/generated/modules/accessibility.md).ToastEvent

气泡事件

## 目录 Q-Q: ⑥⑧①0️⑦⑧〇⑧ 定制

### 属性

* [text](#text)
* [packageName](#packageName)

## 属性

### text

• `Readonly` **text**: `string`

气泡提示文本

***

### packageName

• `Readonly` **packageName**: `string`

发出该气泡的包名

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/app.
  IntentOptionsWithRoot.md
---
# 接口: IntentOptionsWithRoot
[app](/v9/generated/modules/app.md).IntentOptionsWithRoot

允许使用Root权限的Intent选项。Intent选项用于构建一个Intent来启动一个Activity或者发送广播等。

有关Intent的详细信息，参见[Intent](https://developer.android.google.cn/reference/android/content/Intent)。

**`参见`**

* [startActivity](/v9/generated/modules/app.md#startactivity)
* [sendBroadcast](/v9/generated/modules/app.md#sendbroadcast)

## 继承关系

* [`IntentOptions`](/v9/generated/interfaces/app.IntentOptions.md)

  ↳ **`IntentOptionsWithRoot`**

## 目录

### 属性

* [action](#action)
* [category](#category)
* [className](#classname)
* [data](#data)
* [extras](#extras)
* [flags](#flags)
* [packageName](#packagename)
* [root](#root)
* [type](#type)

## 属性

### action

• `Optional` **action**: `string`

意图的Action，指意图要完成的动作，是一个字符串常量，比如"android.intent.action.SEND"。当action以"android.intent.action"开头时，可以省略前缀，直接用"SEND"代替。参见[Actions](https://developer.android.google.cn/reference/android/content/Intent.html#standard-activity-actions)。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[action](/v9/generated/interfaces/app.IntentOptions.md#action)

***

### category

• `Optional` **category**: `string` | `string`\[]

意图的类别。比较少用。参见[Categories](https://developer.android.google.cn/reference/android/content/Intent.html#standard-categories)

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[category](/v9/generated/interfaces/app.IntentOptions.md#category)

***

### className

• `Optional` **className**: `string`

启动Activity、发送广播的目标组件的类名。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[className](/v9/generated/interfaces/app.IntentOptions.md#classname)

***

### data

• `Optional` **data**: `any`

意图的Data，表示和该意图直接相关的数据，是一个Uri, 可以是文件径或者Url等。例如要打开一个文件, action为"android.intent.action.VIEW", data为"file:///sdcard/1.txt"。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[data](/v9/generated/interfaces/app.IntentOptions.md#data)

***

### extras

• `Optional` **extras**: `any`

以键值对构成的这个Intent的Extras(额外信息)。提供该意图的其他信息，例如发送邮件时的邮件标题、邮件正文。参见[Extras](https://developer.android.google.cn/reference/android/content/Intent.html#standard-extra-data)。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[extras](/v9/generated/interfaces/app.IntentOptions.md#extras)

***

### flags

• `Optional` **flags**: (`string` | `number`)\[]

intent的额外标识，字符串或number数组，例如`["activity_new_task", "grant_read_uri_permission"]`。参见[Flags](https://developer.android.google.cn/reference/android/content/Intent.html#setFlags\(int\))。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[flags](/v9/generated/interfaces/app.IntentOptions.md#flags)

***

### packageName

• `Optional` **packageName**: `string`

目标包名。 设置一个显式的应用程序包名，该包名将限制该Intent可解析的组件。如果设置为默认值null，则所有组件都将被视为可解析。如果不为null，则Intent只能解析到给定应用程序包名中的组件。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[packageName](/v9/generated/interfaces/app.IntentOptions.md#packagename)

***

### root

• `Optional` **root**: `boolean`

是否使用Root权限，用于启动Service、Activity等。

***

### type

• `Optional` **type**: `string`

意图的MimeType，表示和该意图直接相关的数据的类型，表示比如"text/plain"为纯文本类型。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[type](/v9/generated/interfaces/app.IntentOptions.md#type)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/app.BroadcastReceiver.md
---
# 接口: BroadcastReceiver
[app](/v9/generated/modules/app.md).BroadcastReceiver

广播接收器接口，继承自 EventEmitter。用于接收系统或应用发送的广播消息。

通过 `registerBroadcastReceiver()` 函数创建 BroadcastReceiver 实例，然后使用 `on("receive", listener)` 监听接收到的广播。

## 继承关系

* `EventEmitter`

  ↳ **`BroadcastReceiver`**

## 方法

### on

▸ **on**(`event`, `listener`): [`BroadcastReceiver`](/v9/generated/interfaces/app.BroadcastReceiver.md)

监听广播接收事件。当有匹配的广播被接收时，会触发 "receive" 事件并调用监听器函数。

**`示例`**

```javascript
"nodejs";
const { registerBroadcastReceiver } = require("app");

const receiver = registerBroadcastReceiver("android.intent.action.SCREEN_ON");

receiver.on("receive", (intent) => {
    console.log("收到广播:", intent.getAction());
    // 可以访问 Intent 对象的其他属性和方法
    console.log("Extras:", intent.getExtras());
});
```

#### 参数

| 名称       | 类型                           | 描述                                                         |
| :--------- | :----------------------------- | :----------------------------------------------------------- |
| `event`    | `"receive"`                    | 事件名称，固定为 "receive"                                   |
| `listener` | (`intent`: `Intent`) => `void` | 监听器函数。当接收到匹配的广播时被调用，参数为接收到的 Intent 对象 |

#### 返回值

[`BroadcastReceiver`](/v9/generated/interfaces/app.BroadcastReceiver.md)

返回 BroadcastReceiver 对象本身，支持链式调用。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/app.EmailOptions.md'
---
# 接口: EmailOptions
[app](/v9/generated/modules/app.md).EmailOptions

发送邮件的选项

**`参见`**

[sendEmail](/v9/generated/modules/app.md#sendemail)

## 目录

### 属性

* [attachment](/v9/generated/interfaces/app.EmailOptions.md#attachment)
* [bcc](/v9/generated/interfaces/app.EmailOptions.md#bcc)
* [cc](/v9/generated/interfaces/app.EmailOptions.md#cc)
* [chooserTitle](/v9/generated/interfaces/app.EmailOptions.md#choosertitle)
* [email](/v9/generated/interfaces/app.EmailOptions.md#email)
* [subject](/v9/generated/interfaces/app.EmailOptions.md#subject)
* [text](/v9/generated/interfaces/app.EmailOptions.md#text)

## 属性

### attachment

• `Optional` **attachment**: `string`

附件的路径。

***

### bcc

• `Optional` **bcc**: `string` | `string`\[]

密送收件人的邮件地址。如果有多个密送收件人，则用字符串数组表示

***

### cc

• `Optional` **cc**: `string` | `string`\[]

抄送收件人的邮件地址。如果有多个抄送收件人，则用字符串数组表示

***

### chooserTitle

• `Optional` **chooserTitle**: `string`

若有多个邮件应用，该标题会在用户选择界面显示。

***

### email

• **email**: `string` | `string`\[]

收件人的邮件地址。如果有多个收件人，则用字符串数组表示

***

### subject

• `Optional` **subject**: `string`

邮件主题(标题)

***

### text

• `Optional` **text**: `string`

邮件正文

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/app.IntentOptions.md'
---
# 接口: IntentOptions
[app](/v9/generated/modules/app.md).IntentOptions

Intent选项，用于构建一个Intent来启动一个Activity或者发送广播等。

有关Intent的详细信息，参见[Intent](https://developer.android.google.cn/reference/android/content/Intent)。

## 继承关系

* **`IntentOptions`**

  ↳ [`IntentOptionsWithRoot`](/v9/generated/interfaces/app.IntentOptionsWithRoot.md)

## 目录

### 属性

* [action](/v9/generated/interfaces/app.IntentOptions.md#action)
* [category](/v9/generated/interfaces/app.IntentOptions.md#category)
* [className](/v9/generated/interfaces/app.IntentOptions.md#classname)
* [data](/v9/generated/interfaces/app.IntentOptions.md#data)
* [extras](/v9/generated/interfaces/app.IntentOptions.md#extras)
* [flags](/v9/generated/interfaces/app.IntentOptions.md#flags)
* [packageName](/v9/generated/interfaces/app.IntentOptions.md#packagename)
* [type](/v9/generated/interfaces/app.IntentOptions.md#type)

## 属性

### action

• `Optional` **action**: `string`

意图的Action，指意图要完成的动作，是一个字符串常量，比如"android.intent.action.SEND"。当action以"android.intent.action"开头时，可以省略前缀，直接用"SEND"代替。参见[Actions](https://developer.android.google.cn/reference/android/content/Intent.html#standard-activity-actions)。

***

### category

• `Optional` **category**: `string` | `string`\[]

意图的类别。比较少用。参见[Categories](https://developer.android.google.cn/reference/android/content/Intent.html#standard-categories)

***

### className

• `Optional` **className**: `string`

启动Activity、发送广播的目标组件的类名。

***

### data

• `Optional` **data**: `any`

意图的Data，表示和该意图直接相关的数据，是一个Uri, 可以是文件径或者Url等。例如要打开一个文件, action为"android.intent.action.VIEW", data为"file:///sdcard/1.txt"。

***

### extras

• `Optional` **extras**: `any`

以键值对构成的这个Intent的Extras(额外信息)。提供该意图的其他信息，例如发送邮件时的邮件标题、邮件正文。参见[Extras](https://developer.android.google.cn/reference/android/content/Intent.html#standard-extra-data)。

***

### flags

• `Optional` **flags**: (`string` | `number`)\[]

intent的额外标识，字符串或number数组，例如`["activity_new_task", "grant_read_uri_permission"]`。参见[Flags](https://developer.android.google.cn/reference/android/content/Intent.html#setFlags\(int\))。

***

### packageName

• `Optional` **packageName**: `string`

目标包名。 设置一个显式的应用程序包名，该包名将限制该Intent可解析的组件。如果设置为默认值null，则所有组件都将被视为可解析。如果不为null，则Intent只能解析到给定应用程序包名中的组件。

***

### type

• `Optional` **type**: `string`

意图的MimeType，表示和该意图直接相关的数据的类型，表示比如"text/plain"为纯文本类型。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/app.IntentOptionsWithRoot.md
---
# 接口: IntentOptionsWithRoot

[app](/v9/generated/modules/app.md).IntentOptionsWithRoot

允许使用 Root 权限的 Intent 选项。Intent 选项用于构建一个 Intent 来启动一个 Activity 或者发送广播等。

有关 Intent 的详细信息，参见[Intent](https://developer.android.google.cn/reference/android/content/Intent)。

**`参见`**

* [startActivity](/v9/generated/modules/app.md#startactivity)
* [sendBroadcast](/v9/generated/modules/app.md#sendbroadcast)

## 继承关系

* [`IntentOptions`](/v9/generated/interfaces/app.IntentOptions.md)

  ↳ **`IntentOptionsWithRoot`**
  ↳ **`Q Q ：𝟲 𝟴𝟭𝟬 𝟽𝟾𝟶𝟴 定制`**

## 目录

### 属性

* [action](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#action)
* [category](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#category)
* [className](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#classname)
* [data](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#data)
* [extras](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#extras)
* [flags](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#flags)
* [packageName](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#packagename)
* [root](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#root)
* [type](/v9/generated/interfaces/app.IntentOptionsWithRoot.md#type)

## 属性

### action

• `Optional` **action**: `string`

意图的 Action，指意图要完成的动作，是一个字符串常量，比如"android.intent.action.SEND"。当 action 以"android.intent.action"开头时，可以省略前缀，直接用"SEND"代替。参见[Actions](https://developer.android.google.cn/reference/android/content/Intent.html#standard-activity-actions)。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[action](/v9/generated/interfaces/app.IntentOptions.md#action)

***

### category

• `Optional` **category**: `string` | `string`\[]

意图的类别。比较少用。参见[Categories](https://developer.android.google.cn/reference/android/content/Intent.html#standard-categories)

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[category](/v9/generated/interfaces/app.IntentOptions.md#category)

***

### className

• `Optional` **className**: `string`

启动 Activity、发送广播的目标组件的类名。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[className](/v9/generated/interfaces/app.IntentOptions.md#classname)

***

### data

• `Optional` **data**: `any`

意图的 Data，表示和该意图直接相关的数据，是一个 Uri, 可以是文件径或者 Url 等。例如要打开一个文件, action 为"android.intent.action.VIEW", data 为"file:///sdcard/1.txt"。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[data](/v9/generated/interfaces/app.IntentOptions.md#data)

***

### extras

• `Optional` **extras**: `any`

以键值对构成的这个 Intent 的 Extras(额外信息)。提供该意图的其他信息，例如发送邮件时的邮件标题、邮件正文。参见[Extras](https://developer.android.google.cn/reference/android/content/Intent.html#standard-extra-data)。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[extras](/v9/generated/interfaces/app.IntentOptions.md#extras)

***

### flags

• `Optional` **flags**: (`string` | `number`)\[]

intent 的额外标识，字符串或 number 数组，例如`["activity_new_task", "grant_read_uri_permission"]`。参见[Flags](https://developer.android.google.cn/reference/android/content/Intent.html#setFlags\(int\))。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[flags](/v9/generated/interfaces/app.IntentOptions.md#flags)

***

### packageName

• `Optional` **packageName**: `string`

目标包名。 设置一个显式的应用程序包名，该包名将限制该 Intent 可解析的组件。如果设置为默认值 null，则所有组件都将被视为可解析。如果不为 null，则 Intent 只能解析到给定应用程序包名中的组件。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[packageName](/v9/generated/interfaces/app.IntentOptions.md#packagename)

***

### root

• `Optional` **root**: `boolean`

是否使用 Root 权限，用于启动 Service、Activity 等。

***

### type

• `Optional` **type**: `string`

意图的 MimeType，表示和该意图直接相关的数据的类型，表示比如"text/plain"为纯文本类型。

#### Inherited from

[IntentOptions](/v9/generated/interfaces/app.IntentOptions.md).[type](/v9/generated/interfaces/app.IntentOptions.md#type)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/app.PMOptions.md'
---
# 接口: PMOptions
[app](/v9/generated/modules/app.md).PMOptions

QQ：６８１０７８０８

获取已安装的应用列表的过滤选项。

**`参见`**

[getInstalledApps](/v9/generated/modules/app.md#getinstalledapps)

## 目录

### 属性

* [get](/v9/generated/interfaces/app.PMOptions.md#get)
* [match](/v9/generated/interfaces/app.PMOptions.md#match)

## 属性

### get

• `Optional` **get**: `string`\[]

指定返回的应用信息中包含的信息，例如`["activities", "meta_data"]`。

可能的值包括：

* `"activities"` 应用的Activity组件信息
* `"configurations"` 应用的硬件配置
* `"gids"` 应用的group id
* `"instrumentation"` 应用的Instrumentation信息
* `"intent_filters"` 应用的意图过滤
* `"meta_data"` 应用的元信息（默认）
* `"permissions"` 应用的权限信息
* `"providers"` 应用的ContentProvider组件信息
* `"receivers"` 应用的BroadcastReceiver组件信息
* `"services"` 应用的Service组件信息
* `"shared_library_files"` 应用的动态链接库文件信息
* `"signatures"` 应用的签名信息（已弃用
* `"signing_certificates"` 应用的签名信息
* `"uri_permission_patterns"`
* `"disabled_components"` 被卸载的但保留了数据的应用
* `"disabled_until_used_components"` 禁用直到被使用的组件
* `"uninstalled_packages"` 被卸载的但保留了数据的应用

**`参见`**

[PackageManager.GET\_\*](https://developer.android.google.cn/reference/android/content/pm/PackageManager#GET_ACTIVITIES)

***

### match

• `Optional` **match**: `string`\[]

指定要匹配的应用列表，例如`["disabled_components", "uninstalled_packages"]`。

* `"uninstalled_packages"` 被卸载的但保留了数据的应用
* `"disabled_components"` 被禁用的组件
* `"disabled_until_used_components"` 禁用直到被使用的组件
* `"system_only"` 只匹配系统应用
* `"factory_only"` 只匹配预装应用
* `"apex"` APEX应用

**`参见`**

[PackageManager.MATCH\_\*](https://developer.android.google.cn/reference/android/content/pm/PackageManager#MATCH_SYSTEM_ONLY)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/clip_manager.ClipboardManager.md
---
# 接口: ClipboardManager
[clip\_manager](/v9/generated/modules/clip_manager.md).ClipboardManager

剪贴板管理器。用于获取、设置、监听剪贴板内容

要使用它，请用`const { clipboardManager } = require('clip_manager')`导入。

## 继承关系

* `unknown`

  ↳ **`ClipboardManager`**

## 目录

### 方法

* [clearClip](/v9/generated/interfaces/clip_manager.ClipboardManager.md#clearclip)
* [getClip](/v9/generated/interfaces/clip_manager.ClipboardManager.md#getclip)
* [hasClip](/v9/generated/interfaces/clip_manager.ClipboardManager.md#hasclip)
* [on](/v9/generated/interfaces/clip_manager.ClipboardManager.md#on)
* [setClip](/v9/generated/interfaces/clip_manager.ClipboardManager.md#setclip)

## 方法

### clearClip

▸ **clearClip**(): `void`

清除剪贴板内容。

#### 返回值

`void`

***

### getClip

▸ **getClip**(): `null` | `string`

获取剪贴板内容。

#### 返回值

`null` | `string`

文本内容。

***

### hasClip

▸ **hasClip**(): `boolean`

判断剪贴板是否有内容。

#### 返回值

`boolean`

如果有内容，返回true，否则返回false。

***

### on

▸ **on**(`event`, `listener`): [`ClipboardManager`](/v9/generated/interfaces/clip_manager.ClipboardManager.md)

剪贴板变化事件。当前剪贴板内容发生变化时触发。

#### 参数

| 名称       | 类型             |
| :--------- | :--------------- |
| `event`    | `"clip_changed"` |
| `listener` | () => `void`     |

#### 返回值

[`ClipboardManager`](/v9/generated/interfaces/clip_manager.ClipboardManager.md)

***

### setClip

▸ **setClip**(`text`): `void`

设置剪贴板内容。

#### 参数

| 名称   | 类型     | 描述     |
| :----- | :------- | :------- |
| `text` | `string` | 文本内容 |

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/color.CompareColorOptions.md
---
# 接口: ClipboardManager
[color](/v9/generated/modules/color.md).CompareColorOptions

比较颜色的选项。

**`参见`**

{@lin Color.isSimilarTo}

## 目录

### 属性

* [ignoreAlphaChannel](/v9/generated/interfaces/color.CompareColorOptions.md#ignorealphachannel)
* [threshold](/v9/generated/interfaces/color.CompareColorOptions.md#threshold)

## 属性

### ignoreAlphaChannel

• `Optional` `Readonly` **ignoreAlphaChannel**: `boolean`

是否忽略alpha通道，默认为true。

***

### threshold

• `Optional` `Readonly` **threshold**: `number`

允许的比较误差，默认为16。比较算法是将每个颜色通道单独比较，如果每个颜色通道的差值都小于该值，则认为两个颜色相等。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/datastore.Datastore.md
---
# 接口: Datastore
[datastore](/v9/generated/modules/datastore.md).Datastore

本地存储对象，用[createDatastore](/v9/generated/modules/datastore.md#createdatastore)方法创建。

## 目录

### 方法

* [clear](/v9/generated/interfaces/datastore.Datastore.md#clear)
* [clearSync](/v9/generated/interfaces/datastore.Datastore.md#clearsync)
* [contains](/v9/generated/interfaces/datastore.Datastore.md#contains)
* [containsSync](/v9/generated/interfaces/datastore.Datastore.md#containssync)
* [edit](/v9/generated/interfaces/datastore.Datastore.md#edit)
* [editSync](/v9/generated/interfaces/datastore.Datastore.md#editsync)
* [get](/v9/generated/interfaces/datastore.Datastore.md#get)
* [getSync](/v9/generated/interfaces/datastore.Datastore.md#getsync)
* [remove](/v9/generated/interfaces/datastore.Datastore.md#remove)
* [removeSync](/v9/generated/interfaces/datastore.Datastore.md#removesync)
* [set](/v9/generated/interfaces/datastore.Datastore.md#set)
* [setSync](/v9/generated/interfaces/datastore.Datastore.md#setsync)

## 方法

### clear

▸ **clear**(): `Promise`<`void`>

异步删除当前本地存储以及它的全部数据。此过程是异步的，返回一个`Promise`，当Promise resolve时表示操作完成。

#### 返回值

`Promise`<`void`>

***

### clearSync

▸ **clearSync**(): `void`

同步删除当前本地存储以及它的全部数据。大多数情况下不需要使用同步方法，使用异步的[clear](/v9/generated/interfaces/datastore.Datastore.md#clear)方法即可，尤其是在UI线程中。

#### 返回值

`void`

***

### contains

▸ **contains**(`key`): `Promise`<`boolean`>

判断该本地存储是否包含键值为key的数据并返回Promise，若包含是则该Promise的值为`true`，否则为`false`。

#### 参数

| 名称  | 类型     | 描述 |
| :---- | :------- | :--- |
| `key` | `string` | 键值 |

#### 返回值

`Promise`<`boolean`>

是否包含该键值的Promise

***

### containsSync

▸ **containsSync**(`key`): `boolean`

判断该本地存储是否包含键值为key的数据，若包含是则`true`，否则为`false`。

#### 参数

| 名称  | 类型     | 描述 |
| :---- | :------- | :--- |
| `key` | `string` | 键值 |

#### 返回值

`boolean`

是否包含该键值

***

### edit

▸ **edit**(`block`): `Promise`<`void`>

批量编辑数据。

**`示例`**

```javascript
const { createDatastore } = require('datastore');
// 创建本地存储，其名称为example.test
const datastore = createDatastore('example.test');

async function main() {
    // 批量写入多个值，相比依次写入效率更高
    await datastore.edit(editor => {
        editor.set('boolKey', true)
            .set('arrayKey', [1, '2', false])
            .remove('versions');
    });
}

main().catch(console.error);
```

#### 参数

| 名称    | 类型                                                         |
| :------ | :----------------------------------------------------------- |
| `block` | (`editor`: [`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)) => `void` |

#### 返回值

`Promise`<`void`>

***

### editSync

▸ **editSync**(`block`): `void`

同步批量编辑数据。

#### 参数

| 名称    | 类型                                                         |
| :------ | :----------------------------------------------------------- |
| `block` | (`editor`: [`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)) => `void` |

#### 返回值

`void`

***

### get

▸ **get**<`T`>(`key`): `Promise`<`undefined` | `T`>

从本地存储中异步获取键值为key的数据并返回Promise。

如果该存储中不包含该数据，这时若指定了默认值参数则返回默认值，否则返回undefined。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称  | 类型     | 描述 |
| :---- | :------- | :--- |
| `key` | `string` | 键值 |

#### 返回值

`Promise`<`undefined` | `T`>

***

### getSync

▸ **getSync**<`T`>(`key`): `undefined` | `T`

从本地存储中同步获取键值为key的数据并返回。大多数情况下不需要使用同步方法，使用异步的[get](/v9/generated/interfaces/datastore.Datastore.md#get)方法即可，尤其是在UI线程中。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称  | 类型     | 描述 |
| :---- | :------- | :--- |
| `key` | `string` | 键值 |

#### 返回值

`undefined` | `T`

***

### remove

▸ **remove**<`T`>(`key`): `Promise`<`undefined` | `T`>

异步移除键值为key的数据，并返回被移除的值的Promise。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称  | 类型     | 描述           |
| :---- | :------- | :------------- |
| `key` | `string` | 要移除的值的键 |

#### 返回值

`Promise`<`undefined` | `T`>

被移除的值的Promise，若本身key没有对应的数据，则会得到`undefined`（的Promise）。

***

### removeSync

▸ **removeSync**<`T`>(`key`): `undefined` | `T`

同步移除键值为key的数据，并返回移除的值。大多数情况下不需要使用同步方法，使用异步的[remove](/v9/generated/interfaces/datastore.Datastore.md#remove)方法即可，尤其是在UI线程中。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称  | 类型     | 描述           |
| :---- | :------- | :------------- |
| `key` | `string` | 要移除的值的键 |

#### 返回值

`undefined` | `T`

被移除的值，若本身key没有对应的数据，则返回`undefined`。

***

### set

▸ **set**<`T`>(`key`, `value`): `Promise`<`void`>

把键值对key和value保存到本地存储中。此过程是异步的，返回一个`Promise`，当Promise resolve时表示操作完成。

存储的过程实际上是使用`JSON.stringify()`把value转换为字符串再保存，因此value必须是可JSON化的才能被接受。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称    | 类型     | 描述 |
| :------ | :------- | :--- |
| `key`   | `string` | 键值 |
| `value` | `T`      | 值   |

#### 返回值

`Promise`<`void`>

***

### setSync

▸ **setSync**<`T`>(`key`, `value`): `void`

把键值对key和value同步保存到本地存储中。大多数情况下不需要使用同步方法，使用异步的[set](/v9/generated/interfaces/datastore.Datastore.md#set)方法即可，尤其是在UI线程中。

存储的过程实际上是使用`JSON.stringify()`把value转换为字符串再保存，因此value必须是可JSON化的才能被接受。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称    | 类型     | 描述 |
| :------ | :------- | :--- |
| `key`   | `string` | 键值 |
| `value` | `T`      | 值   |

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/datastore.DatastoreEditor.md
---
# 接口: DatastoreEditor
[datastore](/v9/generated/modules/datastore.md).DatastoreEditor

本地存储编辑器。

## 目录

### 方法

* [clear](/v9/generated/interfaces/datastore.DatastoreEditor.md#clear)
* [remove](/v9/generated/interfaces/datastore.DatastoreEditor.md#remove)
* [set](/v9/generated/interfaces/datastore.DatastoreEditor.md#set)

## 方法

### clear

▸ **clear**(): [`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)

清空本地存储，将在随后被批量写回文件。

#### 返回值

[`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)

***

### remove

▸ **remove**(`key`): [`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)

移除键值，将在随后被批量写回文件。

#### 参数

| 名称  | 类型     |
| :---- | :------- |
| `key` | `string` |

#### 返回值

[`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)

***

### set

▸ **set**<`T`>(`key`, `value`): [`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)

设置键值，将在随后被批量写回文件。

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `key`   | `string` |
| `value` | `T`      |

#### 返回值

[`DatastoreEditor`](/v9/generated/interfaces/datastore.DatastoreEditor.md)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/datastore.DatastoreOptions.md
---
# 接口: DatastoreOptions
[datastore](/v9/generated/modules/datastore.md).DatastoreOptions

创建本地存储的选项。

**`参见`**

[createDatastore](/v9/generated/modules/datastore.md#createdatastore)

## 目录

### 属性

* [encryptionKey](/v9/generated/interfaces/datastore.DatastoreOptions.md#encryptionkey)
* [serializer](/v9/generated/interfaces/datastore.DatastoreOptions.md#serializer)

## 属性

### encryptionKey

• `Optional` **encryptionKey**: `any`

指定对本地存储的数据进行加密的Key，需要是为长度16, 32或64的字符串或二进制数据（分别对应AES128, AES256和AES512）

***

### serializer

• `Optional` **serializer**: [`Serializer`](/v9/generated/interfaces/datastore.Serializer.md)

自定义本地存储的序列化器，默认是使用JSON进行序列化。以下是默认的JSON序列化器的代码，若要自定义序列化器可参数：

**`示例`**

```javascript
const jsonSerializer = {
  valueToString(data) {
      if (typeof (data) === 'undefined') {
          return '';
      }
      return JSON.stringify(data);
  },
  valueFromString: function (data) {
      if (data === null || data.length === 0) {
          return undefined;
      }
      return JSON.parse(data);
  },
}
```

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/datastore.Serializer.md
---
# 接口: Serializer
[datastore](/v9/generated/modules/datastore.md).Serializer

本地存储序列化器。

## 目录

### 方法

* [valueFromString](/v9/generated/interfaces/datastore.Serializer.md#valuefromstring)
* [valueToString](/v9/generated/interfaces/datastore.Serializer.md#valuetostring)

## 方法

### valueFromString

▸ **valueFromString**(`data`): `any`

将本地存储中保存的字符串数据反序列化，转化为实际的数据。

#### 参数

| 名称   | 类型     |
| :----- | :------- |
| `data` | `string` |

#### 返回值

`any`

***

### valueToString

▸ **valueToString**(`value`): `string`

将要保存的`value`类型数据进行序列化。

#### 参数

| 名称    | 类型  | 描述                                   |
| :------ | :---- | :------------------------------------- |
| `value` | `any` | 此序列化器支持的可序列化类型的任意数据 |

#### 返回值

`string`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/device.AndroidVersion.md
---
# 接口: AndroidVersion
[device](/v9/generated/modules/device.md).AndroidVersion

Android版本信息。

## 目录

### 属性

* [code](/v9/generated/interfaces/device.AndroidVersion.md#code)
* [name](/v9/generated/interfaces/device.AndroidVersion.md#name)

## 属性

### code

• `Readonly` **code**: `number`

API版本，比如Android 10为29。

***

### name

• `Readonly` **name**: `string`

版本名称，比如 `4.4.2`, "12"。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/device.DisplayMetrics.md
---
# 接口: DisplayMetrics
[device](/v9/generated/modules/device.md).DisplayMetrics

设备的显示相关信息。

**`参见`**

https://developer.android.google.cn/reference/android/util/DisplayMetrics

## 目录

### 属性

* [density](/v9/generated/interfaces/device.DisplayMetrics.md#density)
* [densityDpi](/v9/generated/interfaces/device.DisplayMetrics.md#densitydpi)
* [heightPixels](/v9/generated/interfaces/device.DisplayMetrics.md#heightpixels)
* [scaledDensity](/v9/generated/interfaces/device.DisplayMetrics.md#scaleddensity)
* [widthPixels](/v9/generated/interfaces/device.DisplayMetrics.md#widthpixels)
* [xdpi](/v9/generated/interfaces/device.DisplayMetrics.md#xdpi)
* [ydpi](/v9/generated/interfaces/device.DisplayMetrics.md#ydpi)

## 属性

### density

• **density**: `number`

显示器的逻辑密度。这是一个独立像素密度单位的比例系数，在大约160dpi的屏幕上，一个DIP就是一个像素（例如240x320，1.5 "x2 "屏幕），提供系统显示的基线。因此，在160dpi屏幕上，这个密度值将是1；在120dpi屏幕上，它将是0.75；等等。

这个值并不完全遵循真实的屏幕尺寸（由xdpi和ydpi给出），而是用来根据显示dpi的粗略变化，按步骤缩放整个UI的尺寸。例如，一个240x320的屏幕，即使其宽度为1.8"、1.3 "等，其密度也为1。然而，如果屏幕分辨率增加到320x480，但屏幕尺寸仍然是1.5 "x2"，那么密度将增加（可能是1.5）。

**`参见`**

https://developer.android.google.cn/reference/android/util/DisplayMetrics#density

***

### densityDpi

• **densityDpi**: `number`

屏幕中每英寸的像素数。

**`参见`**

https://developer.android.google.cn/reference/android/util/DisplayMetrics#densityDpi

***

### heightPixels

• **heightPixels**: `number`

显示高度，单位像素。

***

### scaledDensity

• **scaledDensity**: `number`

显示器上显示的字体的比例因子。这与密度相同，只是它可以在运行时根据用户对字体大小的偏好以较小的增量进行调整。

**`参见`**

https://developer.android.google.cn/reference/android/util/DisplayMetrics#scaledDensity

***

### widthPixels

• **widthPixels**: `number`

显示宽度，单位像素。

***

### xdpi

• **xdpi**: `number`

屏幕中x方向每英寸的像素数。

**`参见`**

https://developer.android.google.cn/reference/android/util/DisplayMetrics#xdpi

***

### ydpi

• **ydpi**: `number`

屏幕中y方向每英寸的像素数。

**`参见`**

https://developer.android.google.cn/reference/android/util/DisplayMetrics#ydpi

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/device.MemoryInfo.md'
---
# 接口: MemoryInfo
[device](/v9/generated/modules/device.md).MemoryInfo

通过[memoryInfo](/v9/generated/classes/device.Device.md#memoryinfo)获取的内存信息。

## 目录

### 属性

* [availMem](/v9/generated/interfaces/device.MemoryInfo.md#availmem)
* [lowMemory](/v9/generated/interfaces/device.MemoryInfo.md#lowmemory)
* [threshold](/v9/generated/interfaces/device.MemoryInfo.md#threshold)
* [totalMem](/v9/generated/interfaces/device.MemoryInfo.md#totalmem)

## 属性

### availMem

• **availMem**: `number`

当前的系统可用内存，以字节为单位。

***

### lowMemory

• **lowMemory**: `boolean`

如果为true，则表示系统内存不足。

Set to true if the system considers itself to currently be in a low memory situation.

***

### threshold

• **threshold**: `number`

当系统的可用内存达到此内存阈值时，被认为是低内存。

***

### totalMem

• **totalMem**: `number`

当前的系统总内存，以字节为单位。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/device.Product.md'
---
# 接口: Product
[device](/v9/generated/modules/device.md).Product

## 目录

### 属性

* [board](/v9/generated/interfaces/device.Product.md#board)
* [brand](/v9/generated/interfaces/device.Product.md#brand)
* [device](/v9/generated/interfaces/device.Product.md#device)
* [model](/v9/generated/interfaces/device.Product.md#model)
* [name](/v9/generated/interfaces/device.Product.md#name)

## 属性

### board

• **board**: `string`

设备的主板名称。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#BOARD

***

### brand

• **brand**: `string`

设备的产品名称。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#PRODUCT

***

### device

• **device**: `string`

设备的工业设计名称。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#DEVICE

***

### model

• **model**: `string`

设备型号。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#MODEL

***

### name

• **name**: `string`

设备的产品名称。

**`参见`**

https://developer.android.google.cn/reference/android/os/Build.html#PRODUCT

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/device.StreamVolumeRange.md
---
# 接口: StreamVolumeRange
[device](/v9/generated/modules/device.md).StreamVolumeRange

## 目录

### 属性

* [max](/v9/generated/interfaces/device.StreamVolumeRange.md#max)
* [min](/v9/generated/interfaces/device.StreamVolumeRange.md#min)

## 属性

### max

• **max**: `number`

***

### min

• **min**: `number`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/dialogs.DialogExt.md'
---
# 接口: DialogExt
[dialogs](/v9/generated/modules/dialogs.md).DialogExt

对话框类型，基于Android原生[Dialog类](https://developer.android.google.cn/reference/android/app/Dialog.html)拓展了一些事件，由[buildDialog](/v9/generated/modules/dialogs.md#builddialog)和[showDialog](https://pro.autojs.org/docs/zh/v9/generated/modules/dialogs.md#showdialog)创建。

对话框的事件列表参见[on](/v9/generated/interfaces/dialogs.DialogExt.md#on)。

## 继承关系

* `unknown`

  ↳ **`DialogExt`**

## 目录

### 方法

* [on](/v9/generated/interfaces/dialogs.DialogExt.md#on)

## 方法

### on

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

确定按钮点击事件。

#### 参数

| 名称       | 类型                        |
| :--------- | :-------------------------- |
| `event`    | `"positive"`                |
| `listener` | (`dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

中立按钮点击事件。

#### 参数

| 名称       | 类型                        |
| :--------- | :-------------------------- |
| `event`    | `"neutral"`                 |
| `listener` | (`dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

取消按钮点击事件。

#### 参数

| 名称       | 类型                        |
| :--------- | :-------------------------- |
| `event`    | `"negative"`                |
| `listener` | (`dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

带单选框的对话框确认或取消时通过此事件回调选择结果。`index`参数为选择的菜单项的索引，若用户取消选择则为`-1`；`text`参数为选择的菜单项的文本，若用户取消选择为`null`。

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `event`    | `"single_choice"`                                            |
| `listener` | (`index`: `number`, `text`: `null` | `string`, `dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

带多选框的对话框确认或取消时通过此事件回调选择结果。`indices`参数为选择的菜单项的索引数组，若用户取消选择则为空数组；`texts`参数为选择的菜单项的文本数组，若用户取消选择为空数组。

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `event`    | `"multi_choice"`                                             |
| `listener` | (`indices`: `number`\[], `texts`: `string`\[], `dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

带选择菜单的对话框确认或取消时通过此事件回调选择结果。`index`参数为选择的菜单项的索引，若用户取消选择则为`-1`；`text`参数为选择的菜单项的文本，若用户取消选择为`null`。

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `event`    | `"item_select"`                                              |
| `listener` | (`index`: `number`, `text`: `null` | `string`, `dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

带输入框的对话框文本变化时触发该事件。

#### 参数

| 名称       | 类型                                          |
| :--------- | :-------------------------------------------- |
| `event`    | `"input_change"`                              |
| `listener` | (`text`: `string`, `dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

带输入框的对话框确认或取消时，会将输入框的内容通过此事件回调。如果用户取消了输入，`text`参数会为`null`。

#### 参数

| 名称       | 类型                                          |
| :--------- | :-------------------------------------------- |
| `event`    | `"input"`                                     |
| `listener` | (`text`: `string`, `dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

对话框消失事件。

#### 参数

| 名称       | 类型                        |
| :--------- | :-------------------------- |
| `event`    | `"dismiss"`                 |
| `listener` | (`dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

▸ **on**(`event`, `listener`): [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

对话框取消事件，比如点击外部区域触发。

#### 参数

| 名称       | 类型                        |
| :--------- | :-------------------------- |
| `event`    | `"cancel"`                  |
| `listener` | (`dialog`: `any`) => `void` |

#### 返回值

[`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/dialogs.DialogProperties.md
---
# 接口: DialogProperties
[dialogs](/v9/generated/modules/dialogs.md).DialogProperties

对话框的配置属性。

**`参见`**

[buildDialog](/v9/generated/modules/dialogs.md#builddialog)

## 目录

### 属性

* [cancelable](/v9/generated/interfaces/dialogs.DialogProperties.md#cancelable)
* [canceledOnTouchOutside](/v9/generated/interfaces/dialogs.DialogProperties.md#canceledontouchoutside)
* [checkBoxChecked](/v9/generated/interfaces/dialogs.DialogProperties.md#checkboxchecked)
* [checkBoxPrompt](/v9/generated/interfaces/dialogs.DialogProperties.md#checkboxprompt)
* [content](/v9/generated/interfaces/dialogs.DialogProperties.md#content)
* [contentColor](/v9/generated/interfaces/dialogs.DialogProperties.md#contentcolor)
* [contentLineSpacing](/v9/generated/interfaces/dialogs.DialogProperties.md#contentlinespacing)
* [customView](/v9/generated/interfaces/dialogs.DialogProperties.md#customview)
* [icon](/v9/generated/interfaces/dialogs.DialogProperties.md#icon)
* [inputHint](/v9/generated/interfaces/dialogs.DialogProperties.md#inputhint)
* [inputPrefill](/v9/generated/interfaces/dialogs.DialogProperties.md#inputprefill)
* [items](/v9/generated/interfaces/dialogs.DialogProperties.md#items)
* [itemsColor](/v9/generated/interfaces/dialogs.DialogProperties.md#itemscolor)
* [itemsSelectMode](/v9/generated/interfaces/dialogs.DialogProperties.md#itemsselectmode)
* [itemsSelectedIndex](/v9/generated/interfaces/dialogs.DialogProperties.md#itemsselectedindex)
* [negative](/v9/generated/interfaces/dialogs.DialogProperties.md#negative)
* [negativeColor](/v9/generated/interfaces/dialogs.DialogProperties.md#negativecolor)
* [neutral](/v9/generated/interfaces/dialogs.DialogProperties.md#neutral)
* [neutralColor](/v9/generated/interfaces/dialogs.DialogProperties.md#neutralcolor)
* [positive](/v9/generated/interfaces/dialogs.DialogProperties.md#positive)
* [positiveColor](/v9/generated/interfaces/dialogs.DialogProperties.md#positivecolor)
* [progress](/v9/generated/interfaces/dialogs.DialogProperties.md#progress)
* [title](/v9/generated/interfaces/dialogs.DialogProperties.md#title)
* [type](/v9/generated/interfaces/dialogs.DialogProperties.md#type)
* [wrapInScrollView](/v9/generated/interfaces/dialogs.DialogProperties.md#wrapinscrollview)

## 属性

### cancelable

• `Optional` `Readonly` **cancelable**: `boolean`

对话框是否可取消，如果为`false`，则对话框只能用代码手动取消。默认为\`false·。

***

### canceledOnTouchOutside

• `Optional` `Readonly` **canceledOnTouchOutside**: `boolean`

对话框是否在点击对话框以外区域时自动取消，默认为`true`

***

### checkBoxChecked

• `Optional` `Readonly` **checkBoxChecked**: `boolean`

勾选框是否勾选

***

### checkBoxPrompt

• `Optional` `Readonly` **checkBoxPrompt**: `string`

勾选框文字内容

***

### content

• `Optional` `Readonly` **content**: `string`

对话框文字内容

***

### contentColor

• `Optional` `Readonly` **contentColor**: [`Color`](/v9/generated/classes/color.Color.md)

对话框文字内容的颜色

***

### contentLineSpacing

• `Optional` `Readonly` **contentLineSpacing**: `number`

对话框文字内容的行高倍数，1.0为一倍行高

***

### customView

• `Optional` `Readonly` **customView**: `any`

对话框的自定义视图，可使用inflateXml创建。**使用自定义视图后，大部分对话框内的配置项，比如内容、进度条、输入框等将不再有效，需在自定义View中实现**

***

### icon

• `Optional` `Readonly` **icon**: `string`

对话框的图标，是一个URL或者图片对象

***

### inputHint

• `Optional` `Readonly` **inputHint**: `string`

对话框的输入框的输入提示

***

### inputPrefill

• `Optional` `Readonly` **inputPrefill**: `string`

对话框输入框的默认输入内容

***

### items

• `Optional` `Readonly` **items**: `string`\[]

对话框列表的选项

***

### itemsColor

• `Optional` `Readonly` **itemsColor**: [`Color`](/v9/generated/classes/color.Color.md)

对话框列表的选项的文字颜色

***

### itemsSelectMode

• `Optional` `Readonly` **itemsSelectMode**: `"multi"` | `"single"` | `"select"`

对话框列表的选项选择模式，可以为:`multi`、`single`、`select`，分别代表多选框、单选框、选择列表

***

### itemsSelectedIndex

• `Optional` `Readonly` **itemsSelectedIndex**: `number` | `number`\[]

对话框列表中预先选中的项目索引，如果是单选模式为一个索引；多选模式则为数组

***

### negative

• `Optional` `Readonly` **negative**: `string`

对话框取消按钮的文字内容(确定按钮左边的按钮)

***

### negativeColor

• `Optional` `Readonly` **negativeColor**: [`Color`](/v9/generated/classes/color.Color.md)

对话框取消按钮的文字颜色(确定按钮左边的按钮)

***

### neutral

• `Optional` `Readonly` **neutral**: `string`

对话框中立按钮的文字内容(最左边按钮)

***

### neutralColor

• `Optional` `Readonly` **neutralColor**: [`Color`](/v9/generated/classes/color.Color.md)

对话框中立按钮的文字颜色(最左边按钮)

***

### positive

• `Optional` `Readonly` **positive**: `string`

对话框确定按钮的文字内容(最右边按钮)

***

### positiveColor

• `Optional` `Readonly` **positiveColor**: [`Color`](/v9/generated/classes/color.Color.md)

对话框确定按钮的文字颜色(最右边按钮)

***

### progress

• `Optional` `Readonly` **progress**: `Object`

对话框进度条配置项

#### Type declaration

| 名称          | 类型      | 描述                                           |
| :------------ | :-------- | :--------------------------------------------- |
| `horizontal?` | `boolean` | 是否显示为横向进度条，默认为false              |
| `max`         | `number`  | 进度条的最大值                                 |
| `progress?`   | `number`  | 进度条的当前数值                               |
| `showMinMax?` | `boolean` | 是否显示进度条的最小指及最大值指示，默认为true |

***

### title

• `Optional` `Readonly` **title**: `string`

对话框的标题。

***

### type

• `Optional` `Readonly` **type**: [`DialogType`](/v9/generated/modules/dialogs.md#dialogtype)

对话框类型，参考[DialogType](/v9/generated/modules/dialogs.md#dialogtype)。默认为[defaultDialogType](https://pro.autojs.org/docs/zh/v9/generated/modules/dialogs.md#defaultdialogtype)，若未修改`defaultDialogType`则默认为`app`。

***

### wrapInScrollView

• `Optional` `Readonly` **wrapInScrollView**: `boolean`

对话框是否使用滚动视图包裹内容，默认为`true`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.EngineEventTarget.md
---
# 接口: EngineEventTarget
[engines](/v9/generated/modules/engines.md).EngineEventTarget

## 继承关系

* **`EngineEventTarget`**

  ↳ [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

## 目录

### 方法

* [addListener](/v9/generated/interfaces/engines.EngineEventTarget.md#addlistener)
* [eventNames](/v9/generated/interfaces/engines.EngineEventTarget.md#eventnames)
* [getMaxListeners](/v9/generated/interfaces/engines.EngineEventTarget.md#getmaxlisteners)
* [listenerCount](/v9/generated/interfaces/engines.EngineEventTarget.md#listenercount)
* [listeners](/v9/generated/interfaces/engines.EngineEventTarget.md#listeners)
* [off](/v9/generated/interfaces/engines.EngineEventTarget.md#off)
* [on](/v9/generated/interfaces/engines.EngineEventTarget.md#on)
* [once](/v9/generated/interfaces/engines.EngineEventTarget.md#once)
* [prependListener](/v9/generated/interfaces/engines.EngineEventTarget.md#prependlistener)
* [prependOnceListener](/v9/generated/interfaces/engines.EngineEventTarget.md#prependoncelistener)
* [rawListeners](/v9/generated/interfaces/engines.EngineEventTarget.md#rawlisteners)
* [removeAllListeners](/v9/generated/interfaces/engines.EngineEventTarget.md#removealllisteners)
* [removeListener](/v9/generated/interfaces/engines.EngineEventTarget.md#removelistener)
* [setMaxListeners](/v9/generated/interfaces/engines.EngineEventTarget.md#setmaxlisteners)

## 方法

### addListener

▸ **addListener**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### eventNames

▸ **eventNames**(): `string`\[]

#### 返回值

`string`\[]

***

### getMaxListeners

▸ **getMaxListeners**(): `number`

#### 返回值

`number`

***

### listenerCount

▸ **listenerCount**(`event`): `number`

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `event` | `string` |

#### 返回值

`number`

***

### listeners

▸ **listeners**(`event`): `Function`\[]

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `event` | `string` |

#### 返回值

`Function`\[]

***

### off

▸ **off**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### on

▸ **on**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### once

▸ **once**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### prependListener

▸ **prependListener**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### prependOnceListener

▸ **prependOnceListener**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### rawListeners

▸ **rawListeners**(`event`): `Function`\[]

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `event` | `string` |

#### 返回值

`Function`\[]

***

### removeAllListeners

▸ **removeAllListeners**(`event?`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称     | 类型     |
| :------- | :------- |
| `event?` | `string` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### removeListener

▸ **removeListener**(`event`, `listener`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

***

### setMaxListeners

▸ **setMaxListeners**(`n`): [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

#### 参数

| 名称 | 类型     |
| :--- | :------- |
| `n`  | `number` |

#### 返回值

[`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.ExecutionConfig.md
---
# 接口: ExecutionConfig

***

[engines](/v9/generated/modules/engines.md).ExecutionConfig

运行配置。用于启动新的引擎执行脚本或项目时，指定其运行目录、运行参数等。

## 目录

### 属性

* [arguments](/v9/generated/interfaces/engines.ExecutionConfig.md#arguments)
* [path](/v9/generated/interfaces/engines.ExecutionConfig.md#path)
* [workingDirectory](/v9/generated/interfaces/engines.ExecutionConfig.md#workingdirectory)

## 属性

### arguments

• `Optional` **arguments**: `any`

执行参数。该参数可以通过`execArgv`属性获取。参数必须是可序列化（可转换为JSON）的对象。

***

### path

• `Optional` **path**: `string`\[]

脚本的require()时的搜索路径。类似于[module.paths](https://nodejs.org/docs/latest-v16.x/api/modules.html#modulepaths)。

该值暂时对Node.js引擎无效。

***

### workingDirectory

• `Optional` **workingDirectory**: `string`

工作目录。默认为脚本的父目录或项目的根目录。其值会决定脚本执行时的相对路径等。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md
---
# 接口: ReadOnlyExecutionConfig
[engines](/v9/generated/modules/engines.md).ReadOnlyExecutionConfig

## 目录

### 属性

* [path](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md#path)
* [projectConfig](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md#projectconfig)
* [workingDirectory](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md#workingdirectory)

## 属性

### path

• `Readonly` **path**: `String`\[]

***

### projectConfig

• `Optional` `Readonly` **projectConfig**: `any`

***

### workingDirectory

• `Readonly` **workingDirectory**: `string`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.ScriptEngine.md
---
# 接口: ScriptEngine
[engines](/v9/generated/modules/engines.md).ScriptEngine

脚本引擎对象，表示一次脚本或项目执行的引擎示例。可以通过引擎和跨脚本通信，获取引擎的状态，停止引擎运行等。

## 继承关系

* **`ScriptEngine`**

  ↳ [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

## 目录

### 属性

* [executionConfig](/v9/generated/interfaces/engines.ScriptEngine.md#executionconfig)
* [id](/v9/generated/interfaces/engines.ScriptEngine.md#id)
* [source](/v9/generated/interfaces/engines.ScriptEngine.md#source)
* [sourceFile](/v9/generated/interfaces/engines.ScriptEngine.md#sourcefile)
* [workingDirectory](/v9/generated/interfaces/engines.ScriptEngine.md#workingdirectory)

### 方法

* [emit](/v9/generated/interfaces/engines.ScriptEngine.md#emit)
* [forceStop](/v9/generated/interfaces/engines.ScriptEngine.md#forcestop)
* [getTag](/v9/generated/interfaces/engines.ScriptEngine.md#gettag)

## 属性

### executionConfig

• `Readonly` **executionConfig**: [`ReadOnlyExecutionConfig`](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md)

获取本次运行指定的运行配置。

***

### id

• `Readonly` **id**: `number`

引擎的唯一id，不同引擎的id必不相同。

***

### source

• `Readonly` **source**: `any`

引擎源文件的对象。

***

### sourceFile

• `Readonly` **sourceFile**: `string`

引擎的源文件路径。

***

### workingDirectory

• `Readonly` **workingDirectory**: `string`

引擎运行的所在目录。一般是项目的根目录或者脚本文件的父目录。

## 方法

### emit

▸ **emit**(`event`, ...`args`): `void`

发送事件给引擎。对于nodejs引擎，可以用`require("engines").myEngine().on("event_name", () => {})`来监听事件；对于pro8引擎，则可以用`$events.on("event_name", () => {})`来监听事件。

#### 参数

| 名称      | 类型     | 描述                                 |
| :-------- | :------- | :----------------------------------- |
| `event`   | `string` | 事件名称                             |
| `...args` | `any`\[]  | 事件参数，必须是可以转换为JSON的数据 |

#### 返回值

`void`

***

### forceStop

▸ **forceStop**(): `void`

强制停止引擎运行。

#### 返回值

`void`

***

### getTag

▸ **getTag**(`key`): `any`

获取与此引擎关联的标签值。标签是引擎的元数据，可以用于存储引擎相关的信息。

**`示例`**

```javascript
"nodejs";
const { myEngine } = require("engines");

// 获取标签（如果之前设置过）
const tag = myEngine().getTag("myTag");
console.log("标签值:", tag);
```

#### 参数

| 名称  | 类型     | 描述       |
| :---- | :------- | :--------- |
| `key` | `string` | 标签的键名 |

#### 返回值

`any`

与此引擎和指定键关联的标签值。如果标签不存在，则返回 `undefined`。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.ScriptExecution.md
---
# 接口: ScriptExecution
[engines](/v9/generated/modules/engines.md).ScriptExecution

[execScriptFile](/v9/generated/modules/engines.md#execscriptfile)返回的对象。表示一次代码执行，记录执行的文件路径，可以监听其开始运行、停止运行事件，也可以获取执行引擎以便和其通信或停止引擎。

## 继承关系

* `EventEmitter`

  ↳ **`ScriptExecution`**

ScriptExecution 接口继承自 EventEmitter，因此可以使用所有 EventEmitter 的方法来监听事件。

## 目录

### 属性

* [source](/v9/generated/interfaces/engines.ScriptExecution.md#source)
* [sourceFile](/v9/generated/interfaces/engines.ScriptExecution.md#sourcefile)

### Accessors

* [engineOrNull](/v9/generated/interfaces/engines.ScriptExecution.md#engineornull)
* [executionConfig](/v9/generated/interfaces/engines.ScriptExecution.md#executionconfig)

### 方法

* [engine](/v9/generated/interfaces/engines.ScriptExecution.md#engine)

### Events

* [on](/v9/generated/interfaces/engines.ScriptExecution.md#on)

## 属性

### source

• `Readonly` **source**: `any`

运行的源文件的对象。

***

### sourceFile

• `Readonly` **sourceFile**: `string`

运行的源文件路径。

## Accessors

### engineOrNull

• `get` **engineOrNull**(): `null` | [`ScriptEngine`](/v9/generated/interfaces/engines.ScriptEngine.md)

获取本次执行的引擎对象，如果引擎还没有准备好，则返回`null`。

#### 返回值

`null` | [`ScriptEngine`](/v9/generated/interfaces/engines.ScriptEngine.md)

***

### executionConfig

• `get` **executionConfig**(): [`ReadOnlyExecutionConfig`](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md)

获取本次运行指定的运行配置。

#### 返回值

[`ReadOnlyExecutionConfig`](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md)

## 方法

### engine

▸ **engine**(): `any`

异步获取本次执行的引擎对象。返回一个 Promise，当引擎准备好时会被 resolve。

**`示例`**

```javascript
"nodejs";
const { execScriptFile } = require("engines");

const execution = execScriptFile("/sdcard/script.js");

// 异步获取引擎对象
execution.engine().then((engine) => {
    console.log("引擎 ID:", engine.id);
    console.log("工作目录:", engine.workingDirectory);
    
    // 可以向引擎发送事件
    engine.emit("custom_event", "data");
});
```

#### 返回值

`any`

返回一个 Promise，resolve 时返回 ScriptEngine 对象。如果引擎还未准备好，Promise 会等待直到引擎准备好。

## Events

### on

▸ **on**(`event`, `listener`): [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

开始执行事件。本事件代表本次执行需要的线程和引擎对象已创建好，正准备执行代码。

start

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `event`    | `"start"`                                                    |
| `listener` | (`execution`: [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)) => `void` |

#### 返回值

[`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

▸ **on**(`event`, `listener`): [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

执行成功事件。本事件代表脚本已执行成功。 success

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `event`    | `"success"`                                                  |
| `listener` | (`execution`: [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)) => `void` |

#### 返回值

[`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

▸ **on**(`event`, `listener`): [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

执行异常事件。本事件代表脚本执行过程遇到了未捕获的异常。 exception

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `event`    | `"exception"`                                                |
| `listener` | (`execution`: [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md), `exception`: `Throwable`) => `void` |

#### 返回值

[`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.SelfScriptEngine.md
---
# 接口: SelfScriptEngine
[engines](/v9/generated/modules/engines.md).SelfScriptEngine

当前代码的自身引擎的对象。

## 继承关系

* [`ScriptEngine`](/v9/generated/interfaces/engines.ScriptEngine.md)

* [`EngineEventTarget`](/v9/generated/interfaces/engines.EngineEventTarget.md)

  ↳ **`SelfScriptEngine`**

## 目录

### 属性

* [execArgv](/v9/generated/interfaces/engines.SelfScriptEngine.md#execargv)
* [executionConfig](/v9/generated/interfaces/engines.SelfScriptEngine.md#executionconfig)
* [id](/v9/generated/interfaces/engines.SelfScriptEngine.md#id)
* [source](/v9/generated/interfaces/engines.SelfScriptEngine.md#source)
* [sourceFile](/v9/generated/interfaces/engines.SelfScriptEngine.md#sourcefile)
* [workingDirectory](/v9/generated/interfaces/engines.SelfScriptEngine.md#workingdirectory)

### 方法

* [addListener](/v9/generated/interfaces/engines.SelfScriptEngine.md#addlistener)
* [emit](/v9/generated/interfaces/engines.SelfScriptEngine.md#emit)
* [eventNames](/v9/generated/interfaces/engines.SelfScriptEngine.md#eventnames)
* [forceStop](/v9/generated/interfaces/engines.SelfScriptEngine.md#forcestop)
* [getMaxListeners](/v9/generated/interfaces/engines.SelfScriptEngine.md#getmaxlisteners)
* [getTag](/v9/generated/interfaces/engines.SelfScriptEngine.md#gettag)
* [listenerCount](/v9/generated/interfaces/engines.SelfScriptEngine.md#listenercount)
* [listeners](/v9/generated/interfaces/engines.SelfScriptEngine.md#listeners)
* [off](/v9/generated/interfaces/engines.SelfScriptEngine.md#off)
* [on](/v9/generated/interfaces/engines.SelfScriptEngine.md#on)
* [once](/v9/generated/interfaces/engines.SelfScriptEngine.md#once)
* [prependListener](/v9/generated/interfaces/engines.SelfScriptEngine.md#prependlistener)
* [prependOnceListener](/v9/generated/interfaces/engines.SelfScriptEngine.md#prependoncelistener)
* [rawListeners](/v9/generated/interfaces/engines.SelfScriptEngine.md#rawlisteners)
* [removeAllListeners](/v9/generated/interfaces/engines.SelfScriptEngine.md#removealllisteners)
* [removeListener](/v9/generated/interfaces/engines.SelfScriptEngine.md#removelistener)
* [setMaxListeners](/v9/generated/interfaces/engines.SelfScriptEngine.md#setmaxlisteners)

## 属性

### execArgv

• `Readonly` **execArgv**: `any`

执行参数。包括其他脚本启动本引擎时指定的参数，或者定时任务触发时的参数。比如由定时任务触发，则参数为`{intent: ...}`。

***

### executionConfig

• `Readonly` **executionConfig**: [`ReadOnlyExecutionConfig`](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md)

获取本次运行指定的运行配置。

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[executionConfig](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#executionconfig)

***

### id

• `Readonly` **id**: `number`

引擎的唯一id，不同引擎的id必不相同。

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[id](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#id)

***

### source

• `Readonly` **source**: `any`

引擎源文件的对象。

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[source](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#source)

***

### sourceFile

• `Readonly` **sourceFile**: `string`

引擎的源文件路径。

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[sourceFile](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#sourcefile)

***

### workingDirectory

• `Readonly` **workingDirectory**: `string`

引擎运行的所在目录。一般是项目的根目录或者脚本文件的父目录。

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[workingDirectory](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#workingdirectory)

## 方法

### addListener

▸ **addListener**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[addListener](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#addlistener)

***

### emit

▸ **emit**(`event`, ...`args`): `void`

发送事件给引擎。对于nodejs引擎，可以用`require("engines").myEngine().on("event_name", () => {})`来监听事件；对于pro8引擎，则可以用`$events.on("event_name", () => {})`来监听事件。

#### 参数

| 名称      | 类型     | 描述                                 |
| :-------- | :------- | :----------------------------------- |
| `event`   | `string` | 事件名称                             |
| `...args` | `any`\[]  | 事件参数，必须是可以转换为JSON的数据 |

#### 返回值

`void`

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[emit](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#emit)

***

### eventNames

▸ **eventNames**(): `string`\[]

#### 返回值

`string`\[]

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[eventNames](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#eventnames)

***

### forceStop

▸ **forceStop**(): `void`

强制停止引擎运行。

#### 返回值

`void`

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[forceStop](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#forcestop)

***

### getMaxListeners

▸ **getMaxListeners**(): `number`

#### 返回值

`number`

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[getMaxListeners](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#getmaxlisteners)

***

### getTag

▸ **getTag**(`key`): `any`

获取与此引擎关联的标签值。标签是引擎的元数据，可以用于存储引擎相关的信息。

**`示例`**

```javascript
"nodejs";
const { myEngine } = require("engines");

// 获取标签（如果之前设置过）
const tag = myEngine().getTag("myTag");
console.log("标签值:", tag);
```

#### 参数

| 名称  | 类型     | 描述       |
| :---- | :------- | :--------- |
| `key` | `string` | 标签的键名 |

#### 返回值

`any`

与此引擎和指定键关联的标签值。如果标签不存在，则返回 `undefined`。

#### Inherited from

[ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.html).[getTag](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.ScriptEngine.md#gettag)

***

### listenerCount

▸ **listenerCount**(`event`): `number`

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `event` | `string` |

#### 返回值

`number`

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[listenerCount](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#listenercount)

***

### listeners

▸ **listeners**(`event`): `Function`\[]

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `event` | `string` |

#### 返回值

`Function`\[]

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[listeners](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#listeners)

***

### off

▸ **off**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[off](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#off)

***

### on

▸ **on**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[on](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#on)

***

### once

▸ **once**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[once](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#once)

***

### prependListener

▸ **prependListener**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[prependListener](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#prependlistener)

***

### prependOnceListener

▸ **prependOnceListener**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[prependOnceListener](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#prependoncelistener)

***

### rawListeners

▸ **rawListeners**(`event`): `Function`\[]

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `event` | `string` |

#### 返回值

`Function`\[]

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[rawListeners](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#rawlisteners)

***

### removeAllListeners

▸ **removeAllListeners**(`event?`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称     | 类型     |
| :------- | :------- |
| `event?` | `string` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[removeAllListeners](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#removealllisteners)

***

### removeListener

▸ **removeListener**(`event`, `listener`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- |
| `event`    | `string`                       |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[removeListener](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#removelistener)

***

### setMaxListeners

▸ **setMaxListeners**(`n`): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### 参数

| 名称 | 类型     |
| :--- | :------- |
| `n`  | `number` |

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

#### Inherited from

[EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.html).[setMaxListeners](https://pro.autojs.org/docs/zh/v9/generated/interfaces/engines.EngineEventTarget.md#setmaxlisteners)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/engines.StopAllOptions.md
---
# 接口: StopAllOptions
[engines](/v9/generated/modules/engines.md).StopAllOptions

## 目录

### 属性

* [toast](/v9/generated/interfaces/engines.StopAllOptions.md#toast)

## 属性

### toast

• `Optional` **toast**: `boolean`

停止所有引擎运行时是否显示Toast提示。默认为false。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/floating_window.CreateWindowOptions.md
---
# 接口: CreateWindowOptions
[floating\_window](/v9/generated/modules/floating_window.md).CreateWindowOptions

创建悬浮窗的选项，用于指定悬浮窗的大小和位置。

## 目录

### 属性

* [context](/v9/generated/interfaces/floating_window.CreateWindowOptions.md#context)
* [initialPosition](/v9/generated/interfaces/floating_window.CreateWindowOptions.md#initialposition)
* [initialSize](/v9/generated/interfaces/floating_window.CreateWindowOptions.md#initialsize)
* [layoutNoLimit](/v9/generated/interfaces/floating_window.CreateWindowOptions.md#layoutnolimit)

## 属性

### context

• `Optional` **context**: `any`

用于创建悬浮窗的context，若指定为`accessibility.service`，则设置悬浮窗类型为无障碍悬浮窗，可显示在状态栏上方。默认为全局ApplictionContext，即`$autojs.androidContext`。

**`参见`**

[TYPE\_ACCESSIBILITY\_OVERLAY](https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#TYPE_ACCESSIBILITY_OVERLAY)

***

### initialPosition

• `Optional` **initialPosition**: [`Point`](/v9/generated/interfaces/ui.Point.md)

悬浮窗的初始位置，比如{x: 100, y: 200}。默认为{x: 0, y: 0}。

***

### initialSize

• `Optional` **initialSize**: [`Size`](/v9/generated/interfaces/ui.Size.md)

悬浮窗的初始大小，比如{width: 100, height: 200}。默认为自适应大小。

***

### layoutNoLimit

• `Optional` **layoutNoLimit**: `boolean`

悬浮窗内容是否可以超出屏幕之外。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/floating_window.DragGesture.md
---
# 接口: DragGesture
[floating\_window](/v9/generated/modules/floating_window.md).DragGesture

[enableDrag](/v9/generated/interfaces/floating_window.FloatingWindow.md#enabledrag)返回的对象，可用于禁用和重新启用拖拽手势。

## 目录

### 方法

* [setEnabled](/v9/generated/interfaces/floating_window.DragGesture.md#setenabled)

## 方法

### setEnabled

▸ **setEnabled**(`enabled`): `void`

设置拖拽手势是否启用。

#### 参数

| 名称      | 类型      |
| :-------- | :-------- |
| `enabled` | `boolean` |

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/floating_window.DragGestureOptions.md
---
# 接口: DragGestureOptions
[floating\_window](/v9/generated/modules/floating_window.md).DragGestureOptions

悬浮窗拖拽选项。

## 目录

### 属性

* [bounceDuration](/v9/generated/interfaces/floating_window.DragGestureOptions.md#bounceduration)
* [keepToEdge](/v9/generated/interfaces/floating_window.DragGestureOptions.md#keeptoedge)
* [onClick](/v9/generated/interfaces/floating_window.DragGestureOptions.md#onclick)
* [onLongClick](/v9/generated/interfaces/floating_window.DragGestureOptions.md#onlongclick)

## 属性

### bounceDuration

• `Optional` **bounceDuration**: `number`

当keepToEdge为"bounce"时，悬浮窗弹性跳跃的时长，默认为300，单位毫秒。

***

### keepToEdge

• `Optional` **keepToEdge**: [`KeepToEdgeType`](/v9/generated/modules/floating_window.md#keeptoedgetype)

悬浮窗贴边类型，可以为true, false或"bounce"，参见[KeepToEdgeType](/v9/generated/modules/floating_window.md#keeptoedgetype)。默认为false。

***

### onClick

• `Optional` **onClick**: () => `void`

#### Type declaration

▸ (): `void`

指定悬浮窗拖拽手势的可拖动View的点击监听。由于启用拖拽手势来拦截拖动锚点View的触摸事件，你无法再对它使用通常方法监听点击，此方法提供了额外的方式来监听其点击。

**`示例`**

```javascript
"nodejs";
const { createWindow } = require('floating_window');
async function main() {
  const window = createWindow();
  window.setViewFromXml(...);
  const dragHandle = window.view.findView('dragHandle');
  window.enableDrag(dragHandle, {
    onClick: () => {
      console.log('click');
    }
  });
  window.show();
}
main().catch(console.error);
```

##### 返回值

`void`

***

### onLongClick

• `Optional` **onLongClick**: () => `void`

#### Type declaration

▸ (): `void`

指定悬浮窗拖拽手势的可拖动View的长按监听。由于启用拖拽手势来拦截拖动锚点View的触摸事件，你无法再对它使用通常方法监听长按，此方法提供了额外的方式来监听其长按。

**`示例`**

```javascript
"nodejs";
const { createWindow } = require('floating_window');
async function main() {
  const window = createWindow();
  window.setViewFromXml(...);
  const dragHandle = window.view.findView('dragHandle');
  window.enableDrag(dragHandle, {
    onLongClick: () => {
      console.log('long click');
    }
  });
}
main().catch(console.error);
```

##### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/floating_window.FloatingWindow.md
---
# 接口: DragGestureOptions
[floating\_window](/v9/generated/modules/floating_window.md).FloatingWindow

悬浮窗对象。用于控制悬浮窗位置、大小、内容等。

## 继承关系

* `unknown`

  ↳ **`FloatingWindow`**

## 目录

### 属性

* [isShowing](/v9/generated/interfaces/floating_window.FloatingWindow.md#isshowing)
* [position](/v9/generated/interfaces/floating_window.FloatingWindow.md#position)
* [size](/v9/generated/interfaces/floating_window.FloatingWindow.md#size)
* [view](/v9/generated/interfaces/floating_window.FloatingWindow.md#view)

### 方法

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [close](/v9/generated/interfaces/floating_window.FloatingWindow.md#close)
* [enableDrag](/v9/generated/interfaces/floating_window.FloatingWindow.md#enabledrag)
* [on](/v9/generated/interfaces/floating_window.FloatingWindow.md#on)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* [setPosition](/v9/generated/interfaces/floating_window.FloatingWindow.md#setposition)
* [setSize](/v9/generated/interfaces/floating_window.FloatingWindow.md#setsize)
* [setView](/v9/generated/interfaces/floating_window.FloatingWindow.md#setview)
* [setViewFromXml](/v9/generated/interfaces/floating_window.FloatingWindow.md#setviewfromxml)
* [setViewFromXmlFile](/v9/generated/interfaces/floating_window.FloatingWindow.md#setviewfromxmlfile)
* [show](/v9/generated/interfaces/floating_window.FloatingWindow.md#show)

## 属性

### isShowing

• `Readonly` **isShowing**: `boolean`

悬浮窗是否正在显示。

***

### position

• `Readonly` **position**: [`Point`](/v9/generated/interfaces/ui.Point.md)

悬浮窗的当前位置。

***

### size

• `Readonly` **size**: [`Size`](/v9/generated/interfaces/ui.Size.md)

悬浮窗的当前大小。

***

### view

• `Optional` `Readonly` **view**: `any`

当前悬浮窗的内容View，若没有设置，则为`undefined`。

## 方法

### addFlags

▸ **addFlags**(`flags`): `void`

给悬浮窗口增加特定标志位，比如[FLAG\_NOT\_TOUCHABLE](/v9/generated/modules/floating_window.md#flag_not_touchable)让窗口不可触摸，[FLAG\_NOT\_FOCUSABLE](https://pro.autojs.org/docs/zh/v9/generated/modules/floating_window.md#flag_not_focusable)让窗口不可获得焦点。

本模块附带部分常用的标志位，但完整的标志位需要访问Android文档[WindowManager.LayoutParams](https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG_ALLOW_LOCK_WHILE_SCREEN_ON)。

**`示例`**

```text
"nodejs";
const { createWindow, FLAG_NOT_TOUCHABLE } = require("floating_window");
async function main() {
  const window = createWindow();
  window.setViewFromXml(...);
  window.addFlags(FLAG_NOT_TOUCHABLE)
  window.show();
}
main();
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `flags` | `number` |

#### 返回值

`void`

***

### close

▸ **close**(): `Promise`<`void`>

关闭悬浮窗。

#### 返回值

`Promise`<`void`>

***

### enableDrag

▸ **enableDrag**(`view`, `options?`): [`DragGesture`](/v9/generated/interfaces/floating_window.DragGesture.md)

启用悬浮窗的拖拽手势。

#### 参数

| 名称       | 类型                                                         | 描述                                                 |
| :--------- | :----------------------------------------------------------- | :--------------------------------------------------- |
| `view`     | `View`                                                       | 启用拖拽手势的拖动锚点，拖动该View即可拖动整个悬浮窗 |
| `options?` | [`DragGestureOptions`](/v9/generated/interfaces/floating_window.DragGestureOptions.md) | 拖拽悬浮窗的选项                                     |

#### 返回值

[`DragGesture`](/v9/generated/interfaces/floating_window.DragGesture.md)

DragGesture对象，可用于后续禁用手势

***

### on

▸ **on**(`event`, `listener`): [`FloatingWindow`](/v9/generated/interfaces/floating_window.FloatingWindow.md)

#### 参数

| 名称       | 类型                       |
| :--------- | :------------------------- |
| `event`    | `"touch"`                  |
| `listener` | (`event`: `any`) => `void` |

#### 返回值

[`FloatingWindow`](/v9/generated/interfaces/floating_window.FloatingWindow.md)

***

### removeFlags

▸ **removeFlags**(`flags`): `void`

对悬浮窗口移除特定标志位，比如[FLAG\_NOT\_TOUCHABLE](/v9/generated/modules/floating_window.md#flag_not_touchable)让窗口恢复可触摸，[FLAG\_NOT\_FOCUSABLE](https://pro.autojs.org/docs/zh/v9/generated/modules/floating_window.md#flag_not_focusable)让窗口可获得焦点。

本模块附带部分常用的标志位，但完整的标志位需要访问Android文档[WindowManager.LayoutParams](https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG_ALLOW_LOCK_WHILE_SCREEN_ON)。

**`示例`**

```text
"nodejs";
const { createWindow, FLAG_LAYOUT_NO_LIMITS, FLAG_NOT_FOCUSABLE } = require("floating_window");
async function main() {
  const window = createWindow();
  window.setViewFromXml(...);
  window.removeFlags(FLAG_LAYOUT_NO_LIMITS | FLAG_NOT_FOCUSABLE)
  window.show();
}
main();
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `flags` | `number` |

#### 返回值

`void`

***

### setPosition

▸ **setPosition**(`x`, `y`): `Promise`<`void`>

设置悬浮窗的位置，单位为像素。

#### 参数

| 名称 | 类型     | 描述  |
| :--- | :------- | :---- |
| `x`  | `number` | x坐标 |
| `y`  | `number` | y坐标 |

#### 返回值

`Promise`<`void`>

***

### setSize

▸ **setSize**(`width`, `height`): `Promise`<`void`>

设置悬浮窗的大小，单位为像素。

#### 参数

| 名称     | 类型     | 描述                         |
| :------- | :------- | :--------------------------- |
| `width`  | `number` | 宽度，可能为负数，参见Size。 |
| `height` | `number` | 高度，可能为负数，参见Size。 |

#### 返回值

`Promise`<`void`>

***

### setView

▸ **setView**(`view`): `void`

设置给定的View为悬浮窗的内容。

#### 参数

| 名称   | 类型   |
| :----- | :----- |
| `view` | `View` |

#### 返回值

`void`

***

### setViewFromXml

▸ **setViewFromXml**(`xml`): `void`

解析xml为View，设置为悬浮窗的内容。

#### 参数

| 名称  | 类型     |
| :---- | :------- |
| `xml` | `string` |

#### 返回值

`void`

***

### setViewFromXmlFile

▸ **setViewFromXmlFile**(`xmlFile`): `Promise`<`void`>

解析给定路径的xml文件为View，设置为悬浮窗的内容。读取文件是异步的，因此此函数也是异步的。

#### 参数

| 名称      | 类型     | 描述        |
| :-------- | :------- | :---------- |
| `xmlFile` | `string` | xml文件路径 |

#### 返回值

`Promise`<`void`>

***

### show

▸ **show**(): `Promise`<`void`>

显示悬浮窗。

需要注意的是，显示悬浮窗需要启动悬浮窗服务，若应用处于后台，可能会无法启动服务；另外，显示悬浮窗需要悬浮窗权限，如果没有权限，悬浮窗可能无法显示，可以使用[manageDrawOverlays](/v9/generated/modules/floating_window.md#managedrawoverlays)和[canDrawOverlays](https://pro.autojs.org/docs/zh/v9/generated/modules/floating_window.md#candrawoverlays)来查询和跳转悬浮窗权限。

#### 返回值

`Promise`<`void`>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/globals.AutoJs.md'
---
# 接口: AutoJs
[globals](/v9/generated/modules/globals.md).AutoJs

## 目录

### 属性

* [androidContext](/v9/generated/interfaces/globals.AutoJs.md#androidcontext)
* [application](/v9/generated/interfaces/globals.AutoJs.md#application)
* [isReleaseMode](/v9/generated/interfaces/globals.AutoJs.md#isreleasemode)
* [java](/v9/generated/interfaces/globals.AutoJs.md#java)
* [properties](/v9/generated/interfaces/globals.AutoJs.md#properties)

### 方法

* [cancelKeepRunning](/v9/generated/interfaces/globals.AutoJs.md#cancelkeeprunning)
* [keepRunning](/v9/generated/interfaces/globals.AutoJs.md#keeprunning)
* [requireAutoJsVersion](/v9/generated/interfaces/globals.AutoJs.md#requireautojsversion)

## 属性

### androidContext

• **androidContext**: `Context`

***

### application

• **application**: `Application`

***

### isReleaseMode

• **isReleaseMode**: `boolean`

是否是在打包后app环境中运行。若为false则是在Auto.js Pro本体中运行。

***

### java

• **java**: [`Java`](/v9/generated/interfaces/globals.Java.md)

用于提供Java交互的API。这些API比较原始，建议使用封装后的java模块和rhino模块。

***

### properties

• **properties**: `ReadonlyMap`<`string`, `any`>

## 方法

### cancelKeepRunning

▸ **cancelKeepRunning**(`id`): `any`

取消保持引擎运行。

**`参见`**

[keepRunning](/v9/generated/interfaces/globals.AutoJs.md#keeprunning)

#### 参数

| 名称 | 类型     | 描述                  |
| :--- | :------- | :-------------------- |
| `id` | `number` | keepRunning()返回的id |

#### 返回值

`any`

***

### keepRunning

▸ **keepRunning**(): `number`

保持引擎运行，阻止Node.js事件循环退出。返回一个id用于取消它。如果有多处keepRunning调用，仅当所有都被取消后，才会取消保持事件循环运行。

#### 返回值

`number`

id，用于取消保持事件循环。

***

### requireAutoJsVersion

▸ **requireAutoJsVersion**(`version`): `any`

要求指定Auto.js Pro版本才能运行，如果当前版本低于指定版本，抛出异常。

#### 参数

| 名称      | 类型     | 描述                               |
| :-------- | :------- | :--------------------------------- |
| `version` | `string` | Auto.js Pro版本号，如"Pro 9.1.0-2" |

#### 返回值

`any`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/globals.Console.md'
---
# 接口: Console
[globals](/v9/generated/modules/globals.md).Console

## 目录

### 方法

* [setLogFilePath](/v9/generated/interfaces/globals.Console.md#setlogfilepath)

## 方法

### setLogFilePath

▸ **setLogFilePath**(`file`): `void`

在`console`上增加`setLogFilePath`函数，用于设置日志路径。设置后所有脚本的日志将输出到该路径。

**`示例`**

```javascript
"nodejs";

console.setLogFilePath('/sdcard/log.txt');
console.log("Hello");
```

#### 参数

| 名称   | 类型     |
| :----- | :------- |
| `file` | `string` |

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/globals.DefineClassOptions.md
---
# 接口: DefineClassOptions
[globals](/v9/generated/modules/globals.md).DefineClassOptions

## 目录

### 属性

* [cacheDexFile](/v9/generated/interfaces/globals.DefineClassOptions.md#cachedexfile)
* [implements](/v9/generated/interfaces/globals.DefineClassOptions.md#implements)
* [packageName](/v9/generated/interfaces/globals.DefineClassOptions.md#packagename)

## 属性

### cacheDexFile

• `Optional` **cacheDexFile**: `string`

Dex缓存文件路径。

***

### implements

• `Optional` **implements**: `any`\[]

要实现的Java接口列表，默认为空。比如`[View.OnClickListener, View.OnLongClickListener]`。

***

### packageName

• `Optional` **packageName**: `string`

生成类的包名，默认为空。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/globals.Java.md'
---
# 接口: Java
[globals](/v9/generated/modules/globals.md).Java

## 目录

### 方法

* [boxBoolean](/v9/generated/interfaces/globals.Java.md#boxboolean)
* [boxByte](/v9/generated/interfaces/globals.Java.md#boxbyte)
* [boxChar](/v9/generated/interfaces/globals.Java.md#boxchar)
* [boxDouble](/v9/generated/interfaces/globals.Java.md#boxdouble)
* [boxFloat](/v9/generated/interfaces/globals.Java.md#boxfloat)
* [boxInt](/v9/generated/interfaces/globals.Java.md#boxint)
* [boxLong](/v9/generated/interfaces/globals.Java.md#boxlong)
* [boxShort](/v9/generated/interfaces/globals.Java.md#boxshort)
* [create](/v9/generated/interfaces/globals.Java.md#create)
* [createSync](/v9/generated/interfaces/globals.Java.md#createsync)
* [defineClass](/v9/generated/interfaces/globals.Java.md#defineclass)
* [findClass](/v9/generated/interfaces/globals.Java.md#findclass)
* [findClassOrNull](/v9/generated/interfaces/globals.Java.md#findclassornull)
* [loadDex](/v9/generated/interfaces/globals.Java.md#loaddex)
* [loadJar](/v9/generated/interfaces/globals.Java.md#loadjar)
* [setDefaultThreadMode](/v9/generated/interfaces/globals.Java.md#setdefaultthreadmode)
* [setThreadMode](/v9/generated/interfaces/globals.Java.md#setthreadmode)
* [wrap](/v9/generated/interfaces/globals.Java.md#wrap)

## 方法

### boxBoolean

▸ **boxBoolean**(`value`): `any`

包装为java.lang.Boolean的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为boolean或java.lang.Boolean的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Boolean value)
values.put("key", $java.boxBoolean(true));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxByte

▸ **boxByte**(`value`): `any`

包装为java.lang.Byte的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为byte或java.lang.Byte的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Byte value)
values.put("key", $java.boxByte(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxChar

▸ **boxChar**(`value`): `any`

包装为java.lang.Char的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为char或java.lang.Char的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Char value)
values.put("key", $java.boxChar(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxDouble

▸ **boxDouble**(`value`): `any`

包装为java.lang.Double的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为double或java.lang.Double的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Double value)
values.put("key", $java.boxDouble(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxFloat

▸ **boxFloat**(`value`): `any`

包装为java.lang.Float的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为float或java.lang.Float的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Float value)
values.put("key", $java.boxFloat(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxInt

▸ **boxInt**(`value`): `any`

包装为java.lang.Integer的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为int或java.lang.Integer的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Integer value)
values.put("key", $java.boxInt(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxLong

▸ **boxLong**(`value`): `any`

包装为java.lang.Long的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为long或java.lang.Long的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Long value)
values.put("key", $java.boxLong(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### boxShort

▸ **boxShort**(`value`): `any`

包装为java.lang.Short的包装类，在调用有重载的Java方法时可以避免混淆，从而确定地调用参数类型为short或java.lang.Short的方法。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

const values = new android.content.ContentValues();
// public void put(String key, Short value)
values.put("key", $java.boxShort(1));
```

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `value` | `number` |

#### 返回值

`any`

***

### create

▸ **create**(`constructor`, `args`, `threadMode?`): `Promise`<`any`>

在指定在线程上中创建相应的Java对象并返回Promise。例如某些Android UI相关对象需要在UI线程创建。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
const View = $java.findClass('android.view.View');
const context = $autojs.androidContext;

async function main() {
    const view = await $java.create(View, [context], 'ui');
    console.log(view);
}
main();
```

#### 参数

| 名称          | 类型                                                         | 默认值      | 描述                                                         |
| :------------ | :----------------------------------------------------------- | :---------- | :----------------------------------------------------------- |
| `constructor` | `any`                                                        | `undefined` | Java类构造函数，若constructor不是Java类构造函数，则抛出TypeError。 |
| `args`        | `any`\[]                                                      | `undefined` | 构造参数                                                     |
| `threadMode`  | [`ThreadMode`](/v9/generated/modules/globals.md#threadmode) | `'current'` | 线程模式                                                     |

#### 返回值

`Promise`<`any`>

***

### createSync

▸ **createSync**(`constructor`, `args`, `threadMode?`): `any`

类似于create，但不返回Promise，而是阻塞等待Java对象创建完成并返回该对象。因此一般不建议使用该函数，除非你清楚你在做什么。

#### 参数

| 名称          | 类型                                                         | 默认值      | 描述                                                         |
| :------------ | :----------------------------------------------------------- | :---------- | :----------------------------------------------------------- |
| `constructor` | `any`                                                        | `undefined` | Java类构造函数，若constructor不是Java类构造函数，则抛出TypeError。 |
| `args`        | `any`\[]                                                      | `undefined` | 构造参数                                                     |
| `threadMode`  | [`ThreadMode`](/v9/generated/modules/globals.md#threadmode) | `'current'` | 线程模式                                                     |

#### 返回值

`any`

***

### defineClass

▸ **defineClass**(`jsClass`, `options?`): `Promise`<`C`>

动态从给定的JavaScript类生成一个Java类。可在JavaScript类中覆写父类的方法，实现一些Java接口的方法。通常用于继承抽象类或重写某些类的方法。

比如可继承`android.webkit.MyWebViewClient`并重写`shouldOverrideUrlLoading`方法拦截请求。

本方法是动态生成dex实现的，有一定耗时，需要异步等待，第二次调用时可复用上次生成的dex。默认生成的dex文件位于当前目录下的.codecache目录中，可以通过cacheDexFile指定其他路径。

注意，若只是为了实现Java接口，则无需使用本方法，直接使用类似`new View.OnClickListener(\{onClick: () => {}\})`的方式即可。

**`示例`**

```javascript
"nodejs";
require('rhino').install();
const $java = $autojs.java;

async function main() {
  const MyWebViewClient = await $java.defineClass(
     class MyWebViewClient extends android.webkit.WebViewClient {
         
         shouldOverrideUrlLoading(webview, url) {
              if (typeof(url) === 'string') {
                  console.log(url);
              }
              return false;
         }
    }
  );
  const client = new MyWebViewClient();
  // ...
}
main().catch(console.error);
```

给定一个JavaScript类，让它继承自某个Java类，并实现给定的Java接口。将生成一个相应的类，从而可在给定的JavaScript类中覆写Java类的相应方法。

#### 参数

| 名称       | 类型                                                         | 描述                                             |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------- |
| `jsClass`  | `C`                                                          | JavaScript类                                     |
| `options?` | [`DefineClassOptions`](/v9/generated/interfaces/globals.DefineClassOptions.md) | 选项，用于指定生成类的包名、要实现的Java接口等。 |

#### 返回值

`Promise`<`C`>

***

### findClass

▸ **findClass**(`name`): `any`

搜索类名为name为Java类并加载它，返回该Java类。

返回的Java类实际上是一个javascript的构造函数，通过他可以构造一个Java对象，也可以访问Java类的静态方法。

如果要搜索内部类，需要使用'$'符号，比如`findClass('android.app.AlertDialog$Builder')`。

若找不到对应的类，抛出`ClassNotFoundError`。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
const Integer = $java.findClass('java.lang.Integer');
const int = new Integer(255);
console.log(Integer.toHexString(int));
```

#### 参数

| 名称   | 类型     | 描述         |
| :----- | :------- | :----------- |
| `name` | `string` | 完整Java类名 |

#### 返回值

`any`

Java类

***

### findClassOrNull

▸ **findClassOrNull**(`name`): `any`

类似于findClass，区别只在于，找不到类时返回null而不是抛出异常。

**`参见`**

[findClass](/v9/generated/interfaces/globals.Java.md#findclass)

#### 参数

| 名称   | 类型     | 描述 |
| :----- | :------- | :--- |
| `name` | `string` | 类名 |

#### 返回值

`any`

Java类或者null

***

### loadDex

▸ **loadDex**(`dexFile`): `Promise`<`void`>

异步加载Dex文件，加载后该Dex中的类将可以在JavaScript使用。

注意，务必使用`await`等方式等待加载完成，在加载未完成时，无法访问dex中的Java类。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
require('rhino').install();

async function main() {
   await $java.loadDex('/sdcard/mydex.dex');
   console.log(new com.example.MyClass());
}
main().catch(console.error);
```

#### 参数

| 名称      | 类型     | 描述        |
| :-------- | :------- | :---------- |
| `dexFile` | `string` | dex文件路径 |

#### 返回值

`Promise`<`void`>

***

### loadJar

▸ **loadJar**(`jarFile`): `Promise`<`void`>

异步加载jar文件，加载后该jar中的类将可以在JavaScript使用。

注意，务必使用`await`等方式等待加载完成，在加载未完成时，无法访问jar中的Java类。

加载jar实际上是通过将jar转为dex后再加载dex实现的，若jar中出现当前运行的Android环境不支持的指令等情况，则会加载失败，因此在有条件的情况下建议事先转换为dex再加载，提高加载效率和成功率。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
require('rhino').install();

async function main() {
   await $java.loadJar('/sdcard/myjar.jar');
   console.log(new com.example.MyClass());
}
main().catch(console.error);
```

#### 参数

| 名称      | 类型     | 描述        |
| :-------- | :------- | :---------- |
| `jarFile` | `string` | jar文件路径 |

#### 返回值

`Promise`<`void`>

***

### setDefaultThreadMode

▸ **setDefaultThreadMode**(`clazz`, `threadMode`): `any`

设置Java类的默认线程模式。设置后创建该Java类新的Java对象时，默认使用该线程模式。对之前已经创建的Java对象无影响。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
const View = $java.findClass('android.view.View');
$java.setDefaultThreadMode(View, 'ui');
```

#### 参数

| 名称         | 类型                                                         | 描述     |
| :----------- | :----------------------------------------------------------- | :------- |
| `clazz`      | `any`                                                        | Java类   |
| `threadMode` | [`ThreadMode`](/v9/generated/modules/globals.md#threadmode) | 线程模式 |

#### 返回值

`any`

***

### setThreadMode

▸ **setThreadMode**(`obj`, `threadMode`): `any`

设置Java对象的线程模式。设置后该Java对象的所有函数调用，均会切换到执行的线程运行，若非当前线程，则这些函数调用会返回Promise。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
const TextView = $java.findClass('android.widget.TextView');
(async () => {
    const textView = await $java.create(TextView, [$autojs.androidContext], 'ui');
    $java.setThreadMode(textView, 'ui');
    await textView.setText('Hello World');
})();
```

#### 参数

| 名称         | 类型                                                         | 描述     |
| :----------- | :----------------------------------------------------------- | :------- |
| `obj`        | `any`                                                        | Java对象 |
| `threadMode` | [`ThreadMode`](/v9/generated/modules/globals.md#threadmode) | 线程模式 |

#### 返回值

`any`

***

### wrap

▸ **wrap**<`T`>(`obj`, `sync?`): `T`

包装相应的JavaScript对象，让其返回的新对象的函数被Java调用时，自动切换到JavaScript所在线程。若`sync`为true，则这些函数会在调用时阻塞等待JavaScript线程返回，并将其值返回给Java。

通常用于设置一些不在JavaScript线程调用的Java回调。

**`示例`**

```javascript
"nodejs";
const $java = $autojs.java;
const Button = $java.findClass('android.widget.Button');
(async () => {
    const button = await $java.create(Button, [$autojs.androidContext], 'ui');
    $java.setThreadMode(button, 'ui');
    button.setOnClickListener($java.wrap(() => {
       console.log('click');
    }));
    button.setOnLongClickListener($java.wrap({
         onLongClick: () => {
            console.log('long click');
            return true;
         },
    }, true));
})();
```

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称    | 类型      | 默认值      | 描述             |
| :------ | :-------- | :---------- | :--------------- |
| `obj`   | `T`       | `undefined` | JavaScript对象   |
| `sync?` | `Boolean` | `false`     | 是否同步阻塞调用 |

#### 返回值

`T`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/globals.NodeJS.ProcessVersions.md
---
# 接口: ProcessVersions
[globals](/v9/generated/modules/globals.md).[NodeJS](/v9/generated/modules/globals.NodeJS.md).ProcessVersions

## 目录

### 属性

* [autojspro](/v9/generated/interfaces/globals.NodeJS.ProcessVersions.md#autojspro)

## 属性

### autojspro

• **autojspro**: `string`

在`process.versions`上增加`autojspro`属性，用于获取autojspro版本。

**`示例`**

```javascript
"nodejs";
console.log(process.versions.autojspro);
```

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.ColorPath.md'
---
# 接口: ColorPath
[image](/v9/generated/modules/image.md).ColorPath

多色路径，用于多色查找。包含一个主颜色和多个偏移颜色。

## 目录

### 属性

* [firstColor](/v9/generated/interfaces/image.ColorPath.md#firstcolor)
* [offsetColors](/v9/generated/interfaces/image.ColorPath.md#offsetcolors)

## 属性

### firstColor

• `Readonly` **firstColor**: [`Color`](/v9/generated/classes/color.Color.md)

主颜色，即第一个要查找的颜色。

***

### offsetColors

• **offsetColors**: [`OffsetColor`](/v9/generated/interfaces/image.OffsetColor.md)\[]

偏移颜色数组。每个偏移颜色相对于主颜色的位置和颜色值。

**`示例`**

```javascript
"nodejs";
const { findMultiColors } = require("image");
const { Color } = require("color");

const colorPath = {
  firstColor: new Color("#FF0000"), // 主颜色：红色
  offsetColors: [
    { color: new Color("#00FF00"), offsetX: 10, offsetY: 0 }, // 主颜色右侧 10 像素处应该是绿色
    { color: new Color("#0000FF"), offsetX: 0, offsetY: 10 }, // 主颜色下方 10 像素处应该是蓝色
  ],
};

// 在图片中查找这个多色路径
const result = await findMultiColors(img, colorPath);
```

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md
---
# 接口: DetectAndComputeFeaturesOptions
[image](/v9/generated/modules/image.md).DetectAndComputeFeaturesOptions

检测和计算图像特征的选项。

## 目录

### 属性

* [grayscale](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md#grayscale)
* [method](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md#method)
* [region](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md#region)
* [scale](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md#scale)

## 属性

### grayscale

• `Optional` **grayscale**: `boolean`

是否先将图像转换为灰度图再进行特征检测。默认为 `false`。

***

### method

• `Optional` **method**: [`FeatureDetectMethod`](/v9/generated/enums/image.FeatureDetectMethod.md)

特征检测方法，默认为 `FeatureDetectMethod.SIFT`。

***

### region

• `Optional` **region**: [`Region`](/v9/generated/modules/image.md#region)

检测区域。如果不指定，则检测整个图像。

***

### scale

• `Optional` **scale**: `number`

图像缩放比例。用于在检测前缩放图像，可以提高检测速度。例如 `0.5` 表示将图像缩小到原来的一半。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.FeatureMatchingOptions.md
---
# 接口: FeatureMatchingOptions
[image](/v9/generated/modules/image.md).FeatureMatchingOptions

特征匹配选项，继承自 `DetectAndComputeFeaturesOptions`，并添加了特征匹配相关的选项。

## 继承关系

* [`DetectAndComputeFeaturesOptions`](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md)

  ↳ **`FeatureMatchingOptions`**

## 目录

### 属性

* [drawMatches](/v9/generated/interfaces/image.FeatureMatchingOptions.md#drawmatches)
* [matcher](/v9/generated/interfaces/image.FeatureMatchingOptions.md#matcher)
* [region](/v9/generated/interfaces/image.FeatureMatchingOptions.md#region)
* [thredshold](/v9/generated/interfaces/image.FeatureMatchingOptions.md#thredshold)

## 属性

### matcher

• `Optional` **matcher**: [`FeatureMatcher`](/v9/generated/enums/image.FeatureMatcher.md)

特征匹配器，用于匹配特征点。默认为 `FeatureMatcher.FLANNBASED`。

***

### drawMatches

• `Optional` **drawMatches**: `string`

如果指定，会将匹配结果绘制到指定路径的图片文件中。用于调试和可视化匹配结果。

***

### thredshold

• `Optional` **thredshold**: `number`

匹配阈值，范围 0-1。值越大，匹配要求越严格。

**`注意`**

此属性名可能有拼写错误（应为 `threshold`），但为了与 API 保持一致，使用 `thredshold`。

***

### region

• **region**: [`Region`](/v9/generated/modules/image.md#region)

匹配区域。必须指定。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.FeatureMatchingResult.md
---
# 接口: FeatureMatchingResult
[image](/v9/generated/modules/image.md).FeatureMatchingResult

特征匹配结果，包含匹配到的对象框架。

## 目录

### 属性

* [frame](/v9/generated/interfaces/image.FeatureMatchingResult.md#frame)

## 属性

### frame

• `Readonly` **frame**: [`ObjectFrame`](/v9/generated/interfaces/image.ObjectFrame.md)

匹配到的对象框架，描述对象在图像中的位置和边界框。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.FindColorOptions.md
---
# 接口: FindColorOptions
[image](/v9/generated/modules/image.md).FindColorOptions

找色选项，用于指定颜色匹配的阈值和搜索区域。

## 目录

### 属性

* [region](/v9/generated/interfaces/image.FindColorOptions.md#region)
* [threshold](/v9/generated/interfaces/image.FindColorOptions.md#threshold)

## 属性

### threshold

• `Optional` **threshold**: `number`

颜色匹配阈值，范围 0-1。值越大，匹配要求越严格。默认值根据颜色自动计算。

***

### region

• `Optional` **region**: [`Region`](/v9/generated/modules/image.md#region)

搜索区域。如果不指定，则搜索整个图像。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.FindImageOptions.md
---
# 接口: FindImageOptions
[image](/v9/generated/modules/image.md).FindImageOptions

找图选项，用于指定模板匹配的阈值、搜索区域和图像金字塔级别。

## 目录

### 属性

* [level](/v9/generated/interfaces/image.FindImageOptions.md#level)
* [region](/v9/generated/interfaces/image.FindImageOptions.md#region)
* [threshold](/v9/generated/interfaces/image.FindImageOptions.md#threshold)

## 属性

### threshold

• `Optional` **threshold**: `number`

匹配阈值，范围 0-1。值越大，匹配要求越严格。默认值根据图片大小自动计算。

***

### level

• `Optional` **level**: `number`

图像金字塔级别。值越大，搜索速度越快，但精度可能降低。可以使用 `MAX_LEVEL_AUTO`（-1）自动选择级别。

***

### region

• `Optional` **region**: [`Region`](/v9/generated/modules/image.md#region)

搜索区域。如果不指定，则搜索整个图像。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.Match.md'
---
# 接口: Match
[image](/v9/generated/modules/image.md).Match

模板匹配结果，包含匹配的相似度和位置。

## 目录

### 属性

* [point](/v9/generated/interfaces/image.Match.md#point)
* [similarity](/v9/generated/interfaces/image.Match.md#similarity)

## 属性

### similarity

• **similarity**: `number`

匹配相似度，范围 0-1。值越接近 1，匹配度越高。

***

### point

• **point**: `cv.Point2`

匹配位置，即模板图片在源图片中的左上角坐标。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.MatchTemplateOptions.md
---
# 接口: MatchTemplateOptions
[image](/v9/generated/modules/image.md).MatchTemplateOptions

模板匹配选项，用于指定模板匹配的方法、匹配精度等。

## 目录

### 属性

* [level](/v9/generated/interfaces/image.MatchTemplateOptions.md#level)
* [max](/v9/generated/interfaces/image.MatchTemplateOptions.md#max)
* [method](/v9/generated/interfaces/image.MatchTemplateOptions.md#method)
* [region](/v9/generated/interfaces/image.MatchTemplateOptions.md#region)
* [threshold](/v9/generated/interfaces/image.MatchTemplateOptions.md#threshold)
* [useTransparentMask](/v9/generated/interfaces/image.MatchTemplateOptions.md#usetransparentmask)
* [weakThreshold](/v9/generated/interfaces/image.MatchTemplateOptions.md#weakthreshold)

## 属性

### method

• `Optional` **method**: `number`

模板匹配方法。可以使用 OpenCV 的模板匹配方法常量，如 `cv.TM_CCOEFF_NORMED`、`cv.TM_CCORR_NORMED` 等。

***

### weakThreshold

• `Optional` **weakThreshold**: `number`

弱阈值，用于初步筛选匹配结果。只有相似度大于此值的匹配结果才会被进一步处理。

***

### threshold

• `Optional` **threshold**: `number`

匹配阈值，范围 0-1。值越大，匹配要求越严格。默认值根据图片大小自动计算。

***

### level

• `Optional` **level**: `number`

图像金字塔级别。值越大，搜索速度越快，但精度可能降低。可以使用 `MAX_LEVEL_AUTO`（-1）自动选择级别。

***

### max

• `Optional` **max**: `number`

返回的最大匹配结果数量。如果不指定，则返回所有匹配结果。

***

### useTransparentMask

• `Optional` **useTransparentMask**: `boolean`

是否使用透明遮罩。如果模板图片有透明通道，可以启用此选项以提高匹配精度。

***

### region

• `Optional` **region**: [`Region`](/v9/generated/modules/image.md#region)

搜索区域。如果不指定，则搜索整个图像。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.ObjectFrame.md'
---
# 接口: ObjectFrame
[image](/v9/generated/modules/image.md).ObjectFrame

对象框架，描述通过特征匹配找到的对象在图像中的位置和边界框。

## 目录

### 属性

* [bottomLeft](/v9/generated/interfaces/image.ObjectFrame.md#bottomleft)
* [bottomRight](/v9/generated/interfaces/image.ObjectFrame.md#bottomright)
* [center](/v9/generated/interfaces/image.ObjectFrame.md#center)
* [centerX](/v9/generated/interfaces/image.ObjectFrame.md#centerx)
* [centerY](/v9/generated/interfaces/image.ObjectFrame.md#centery)
* [topLeft](/v9/generated/interfaces/image.ObjectFrame.md#topleft)
* [topRight](/v9/generated/interfaces/image.ObjectFrame.md#topright)

## 属性

### topLeft

• `Readonly` **topLeft**: `cv.Point2`

对象框架的左上角坐标。

***

### topRight

• `Readonly` **topRight**: `cv.Point2`

对象框架的右上角坐标。

***

### bottomLeft

• `Readonly` **bottomLeft**: `cv.Point2`

对象框架的左下角坐标。

***

### bottomRight

• `Readonly` **bottomRight**: `cv.Point2`

对象框架的右下角坐标。

***

### center

• `Readonly` **center**: `cv.Point2`

对象框架的中心点坐标。

***

### centerX

• `Readonly` **centerX**: `number`

对象框架的中心点 X 坐标。

***

### centerY

• `Readonly` **centerY**: `number`

对象框架的中心点 Y 坐标。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/image.OffsetColor.md'
---
# 接口: OffsetColor
[image](/v9/generated/modules/image.md).OffsetColor

偏移颜色，用于多色查找。描述相对于主颜色的偏移位置和该位置应该匹配的颜色。

## 目录

### 属性

* [color](/v9/generated/interfaces/image.OffsetColor.md#color)
* [offsetX](/v9/generated/interfaces/image.OffsetColor.md#offsetx)
* [offsetY](/v9/generated/interfaces/image.OffsetColor.md#offsety)

## 属性

### color

• `Readonly` **color**: [`Color`](/v9/generated/classes/color.Color.md)

在偏移位置应该匹配的颜色。

***

### offsetX

• `Readonly` **offsetX**: `number`

相对于主颜色的 X 轴偏移量（像素）。正数表示向右，负数表示向左。

***

### offsetY

• `Readonly` **offsetY**: `number`

相对于主颜色的 Y 轴偏移量（像素）。正数表示向下，负数表示向上。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/lang.ReadOnlyProperty.md
---
# 接口: ReadOnlyProperty<T>
[lang](/v9/generated/modules/lang.md).ReadOnlyProperty

## 类型参数

| 名称 |
| :--- |
| `T`  |

## 目录

### 方法

* [get](/v9/generated/interfaces/lang.ReadOnlyProperty.md#get)

## 方法

### get

▸ **get**(): `T`

#### 返回值

`T`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md
---
# 接口: ScreenCaptureOptions
[media\_projection](/v9/generated/modules/media_projection.md).ScreenCaptureOptions

截图选项。

## 目录

### 属性

* [density](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md#density)
* [height](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md#height)
* [orientation](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md#orientation)
* [virtualDisplayFlags](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md#virtualdisplayflags)
* [width](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md#width)

## 属性

### width

• `Optional` **width**: `number`

截图的宽度。默认为屏幕宽度。

***

### height

• `Optional` **height**: `number`

截图的高度。默认为屏幕高度。

***

### density

• `Optional` **density**: `number`

截图的像素密度（dpi）。默认为屏幕像素密度。

***

### orientation

• `Optional` **orientation**: [`Orientation`](/v9/generated/enums/media_projection.Orientation.md)

截图的方向。默认为 `Orientation.AUTO`，即自动调整屏幕方向。

***

### virtualDisplayFlags

• `Optional` **virtualDisplayFlags**: `number`

虚拟显示标志。参见 [VIRTUAL\_DISPLAY\_FLAGS](https://developer.android.com/reference/android/hardware/display/DisplayManager#VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR)。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/notification.BuildNotificationOptions.md
---
# 接口: BuildNotificationOptions
[notification](/v9/generated/modules/notification.md).BuildNotificationOptions

创建通知的选项，包括通知标题、通知内容、通知图标、通知点击后的行为、按钮等。

Create notification options, including notification title, content, icon, action, button, etc.

**`参见`**

buildNotification

## 目录

### 属性

* [actions](/v9/generated/interfaces/notification.BuildNotificationOptions.md#actions)
* [autoCancel](/v9/generated/interfaces/notification.BuildNotificationOptions.md#autocancel)
* [contentText](/v9/generated/interfaces/notification.BuildNotificationOptions.md#contenttext)
* [contentTitle](/v9/generated/interfaces/notification.BuildNotificationOptions.md#contenttitle)
* [onContentClick](/v9/generated/interfaces/notification.BuildNotificationOptions.md#oncontentclick)
* [onDelete](/v9/generated/interfaces/notification.BuildNotificationOptions.md#ondelete)
* [ongoing](/v9/generated/interfaces/notification.BuildNotificationOptions.md#ongoing)
* [silent](/v9/generated/interfaces/notification.BuildNotificationOptions.md#silent)
* [ticker](/v9/generated/interfaces/notification.BuildNotificationOptions.md#ticker)

## 属性

### actions

• `Optional` **actions**: [`NotificationAction`](/v9/generated/interfaces/notification.NotificationAction.md)\[]

通知的动作列表，用于配置通知的额外按钮。

***

### autoCancel

• `Optional` **autoCancel**: `boolean`

当`autoCancel`为`true`时，用户单击通知栏会自动取消，默认为`false`。

***

### contentText

• `Optional` **contentText**: `string`

通知的内容文本。

***

### contentTitle

• `Optional` **contentTitle**: `string`

通知的内容标题。

***

### onContentClick

• `Optional` **onContentClick**: `VoidFunction`

点击通知内容时的回调函数，当用户点击通知内容时此函数会被执行。

***

### onDelete

• `Optional` **onDelete**: `VoidFunction`

通知被删除时的回调函数，当用户删除通知时此函数会被执行。

***

### ongoing

• `Optional` **ongoing**: `boolean`

ongoing设置一个正在进行的通知。通常用来表示一个后台任务,比如正在后台播放音乐或者下载文件等。

***

### silent

• `Optional` **silent**: `boolean`

silent设置状态栏消息是否静默通知，默认为`false`。

***

### ticker

• `Optional` **ticker**: `string`

通知显示时状态栏显示的通知内容。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/notification.NotificationAction.md
---
# 接口: NotificationAction
[notification](/v9/generated/modules/notification.md).NotificationAction

通知的动作，包括标题和点击通知事件，一般作为用户可点击的通知按钮显示。

## 目录

### 属性

* [onClick](/v9/generated/interfaces/notification.NotificationAction.md#onclick)
* [title](/v9/generated/interfaces/notification.NotificationAction.md#title)

## 属性

### onClick

• `Optional` **onClick**: `VoidFunction`

点击动作（按钮）后的回调函数，用户操作后此函数会被执行。

***

### title

• **title**: `string`

通知动作（按钮）的标题。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ocr.CreateOCROptions.md
---
# 接口: CreateOCROptions
[ocr](/v9/generated/modules/ocr.md).CreateOCROptions

创建 OCR 的选项。

## 目录

### 属性

* [cpuPowerMode](/v9/generated/interfaces/ocr.CreateOCROptions.md#cpupowermode)
* [labelsFile](/v9/generated/interfaces/ocr.CreateOCROptions.md#labelsfile)
* [models](/v9/generated/interfaces/ocr.CreateOCROptions.md#models)
* [parallelThreads](/v9/generated/interfaces/ocr.CreateOCROptions.md#parallelthreads)
* [useOpenCL](/v9/generated/interfaces/ocr.CreateOCROptions.md#useopencl)

## 属性

### parallelThreads

• `Optional` **parallelThreads**: `number`

并行线程数，默认为 4。增加线程数可以提高识别速度，但也会增加 CPU 和内存使用。

***

### cpuPowerMode

• `Optional` **cpuPowerMode**: [`CPUPowerMode`](/v9/generated/modules/ocr.md#cpupowermode)

CPU 模式，默认为 `LITE_POWER_HIGH`。用于控制 OCR 识别时的 CPU 使用策略。

***

### useOpenCL

• `Optional` **useOpenCL**: `boolean`

是否使用 OpenCL，默认为 `false`。启用 OpenCL 可以利用 GPU 加速，提高识别速度，但需要设备支持。

***

### models

• `Optional` **models**: `'default'` | `'slim'` | `string`

OCR 模型，可以是内置模型，也可以是自定义模型。

* `'default'` - 精度相对高但速度较慢的模型（默认）
* `'slim'` - 精度相对低但速度更快的模型
* `string` - 自定义模型的绝对路径

***

### labelsFile

• `Optional` **labelsFile**: `string`

模型的标签文件，默认为 `null`，需要配合 `models` 字段使用。用于自定义模型的标签映射。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ocr.OCR.md'
---
# 接口: OCR
[ocr](/v9/generated/modules/ocr.md).OCR

OCR 对象。由 `createOCR` 创建，用于具体的文字识别。该对象不再需要时，需要调用 `release()` 函数释放资源。

## 目录

### 方法

* [detect](/v9/generated/interfaces/ocr.OCR.md#detect)
* [release](/v9/generated/interfaces/ocr.OCR.md#release)

## 方法

### detect

▸ **detect**(`image`, `options?`): `Promise`<[`OCRResult`](/v9/generated/classes/ocr.OCRResult.md)\[]>

对给定图片根据给定选项进行文字识别，将文字识别的结果作为数组异步返回。

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");

async function main() {
  const ocr = await createOCR();
  const capturer = await requestScreenCapture();
  
  // 获取截图
  const img = await capturer.nextImage();
  
  // 识别文字
  const results = await ocr.detect(img);
  
  // 输出识别结果
  for (const result of results) {
    console.log(`文字: ${result.text}, 可信度: ${result.confidence}`);
    console.log(`位置: (${result.bounds.left}, ${result.bounds.top})`);
  }
  
  ocr.release();
  capturer.stop();
}
main();
```

#### 参数

| 名称      | 类型                                                                     | 描述                                                         |
| :-------- | :----------------------------------------------------------------------- | :----------------------------------------------------------- |
| `image`   | [`Image`](/v9/generated/classes/image.Image.md)                          | 图片，要识别文字的图片                                       |
| `options` | [`OCRDetectionOptions`](/v9/generated/interfaces/ocr.OCRDetectionOptions.md) | OCR 识别选项，包括识别区域、最大识别数量、是否检测旋转等     |

#### 返回值

`Promise`<[`OCRResult`](/v9/generated/classes/ocr.OCRResult.md)\[]>

文字识别结果的数组的 Promise，包括可信度、文本内容、文本范围等。

***

### release

▸ **release**(): `void`

释放 OCR 资源，默认会在程序退出时自动释放，但请在不使用 OCR 时及时释放以释放资源。

**`重要`**

OCR 对象占用内存和计算资源较大，使用完毕后应该及时调用 `release()` 方法释放资源，避免内存泄漏。

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");

async function main() {
  const ocr = await createOCR();
  
  // 使用 OCR 进行识别...
  // const results = await ocr.detect(img);
  
  // 使用完毕后释放资源
  ocr.release();
}
main();
```

#### 返回值

`void`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ocr.OCRDetectionOptions.md
---
# 接口: OCRDetectionOptions
[ocr](/v9/generated/modules/ocr.md).OCRDetectionOptions

OCR 检测选项。

## 目录

### 属性

* [detectRotation](/v9/generated/interfaces/ocr.OCRDetectionOptions.md#detectrotation)
* [max](/v9/generated/interfaces/ocr.OCRDetectionOptions.md#max)
* [region](/v9/generated/interfaces/ocr.OCRDetectionOptions.md#region)

## 属性

### max

• `Optional` **max**: `number`

OCR 识别文本的数量上限，默认为 1000。当识别到的文本数量达到此上限时，停止识别。

***

### detectRotation

• `Optional` **detectRotation**: `boolean`

是否检测文字旋转，默认为 `false`。如果为 `true`，OCR 会检测并返回文字的旋转角度和旋转角度可信度。

**`注意`**

启用旋转检测会增加识别时间。

***

### region

• `Optional` **region**: [`Region`](/v9/generated/modules/image.md#region)

OCR 识别区域，若不指定则为全图片识别。可以指定一个矩形区域，只识别该区域内的文字。

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const cv = require("@autojs/opencv");

async function main() {
  const ocr = await createOCR();
  const img = await readImage("./image.png");
  
  // 只识别图片左上角 500x500 区域
  const results = await ocr.detect(img, {
    region: new cv.Rect(0, 0, 500, 500),
  });
  
  ocr.release();
}
main();
```

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/power_manager.WakeLock.md
---
# 接口: WakeLock
[power\_manager](/v9/generated/modules/power_manager.md).WakeLock

唤醒锁。

**`参见`**

[PowerManager.WakeLock](https://developer.android.google.cn/reference/android/os/PowerManager.WakeLock)

## 继承关系

* `WakeLock`

  ↳ **`WakeLock`**

## 目录

### 方法

* [acquire](/v9/generated/interfaces/power_manager.WakeLock.md#acquire)
* [isHeld](/v9/generated/interfaces/power_manager.WakeLock.md#isheld)
* [release](/v9/generated/interfaces/power_manager.WakeLock.md#release)

## 方法

### acquire

▸ **acquire**(`timeout?`): `void`

#### 参数

| 名称       | 类型     |
| :--------- | :------- |
| `timeout?` | `number` |

#### 返回值

`boolean`

▸ **acquire**(): `void`

#### 返回值

`boolean`

***

### isHeld

▸ **isHeld**(): `boolean`

#### 返回值

`boolean`

***

### release

▸ **release**(): `void`

#### 返回值

\`\`void\`

▸ **release**(`flags?`): `void`

#### 参数

| 名称     | 类型     |
| :------- | :------- |
| `flags?` | `number` |

#### 返回值

\`\`void\`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/power_manager.WakeUpOptions.md
---
# 接口: NotificationAction
[power\_manager](/v9/generated/modules/power_manager.md).WakeUpOptions

## 目录

### 属性

* [flags](/v9/generated/interfaces/power_manager.WakeUpOptions.md#flags)
* [timeout](/v9/generated/interfaces/power_manager.WakeUpOptions.md#timeout)

## 属性

### flags

• `Optional` **flags**: `number`

唤醒锁行为标志，默认为`PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.ON_AFTER_RELEASE`，参见\[PowerManager.newWakeLock]\(https://developer.android.google.cn/reference/android/os/PowerManager#newWakeLock(int, java.lang.String))。

***

### timeout

• `Optional` **timeout**: `number`

唤醒锁释放时间，默认为5000毫秒。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/root_automator.Pointer.md
---
# 接口: Pointer
[root\_automator](/v9/generated/modules/root_automator.md).Pointer

描述一个指针、手指的触摸位置。

## 目录

### 属性

* [id](/v9/generated/interfaces/root_automator.Pointer.md#id)
* [x](/v9/generated/interfaces/root_automator.Pointer.md#x)
* [y](/v9/generated/interfaces/root_automator.Pointer.md#y)

## 属性

### x

• `Readonly` **x**: `number`

触摸点的 X 坐标（像素）。

***

### y

• `Readonly` **y**: `number`

触摸点的 Y 坐标（像素）。

***

### id

• `Readonly` **id**: `number`

指针/手指的 id，从 0 开始。用于多点触控时区分不同的手指。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  
  // 使用两个手指同时按下
  await ra.touchDown([
    { x: 100, y: 100, id: 0 }, // 手指 0
    { x: 200, y: 200, id: 1 }, // 手指 1
  ]);
  
  await ra.touchUp();
  await ra.exit();
}
main();
```

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/root_automator.RootAutomator.md
---
# 接口: RootAutomator
[root\_automator](/v9/generated/modules/root_automator.md).RootAutomator

RootAutomator 用于基于 root 或者 adb 权限，模拟点击、手势、长按等操作。相比起基于无障碍的操作，RootAutomator 支持多点触控和动态改变手势，但可能兼容性不佳。

::: warning
从 Pro 9.3 开始推荐使用 `RootAutomator2` 代替 `RootAutomator`，相比 `RootAutomator`，它有更好的设备兼容性。
:::

## 目录

### 方法

* [exit](/v9/generated/interfaces/root_automator.RootAutomator.md#exit)
* [longPress](/v9/generated/interfaces/root_automator.RootAutomator.md#longpress)
* [press](/v9/generated/interfaces/root_automator.RootAutomator.md#press)
* [sendEvent](/v9/generated/interfaces/root_automator.RootAutomator.md#sendevent)
* [sendSync](/v9/generated/interfaces/root_automator.RootAutomator.md#sendsync)
* [swipe](/v9/generated/interfaces/root_automator.RootAutomator.md#swipe)
* [syncReport](/v9/generated/interfaces/root_automator.RootAutomator.md#syncreport)
* [tap](/v9/generated/interfaces/root_automator.RootAutomator.md#tap)
* [touch](/v9/generated/interfaces/root_automator.RootAutomator.md#touch)
* [touchDown](/v9/generated/interfaces/root_automator.RootAutomator.md#touchdown)
* [touchMove](/v9/generated/interfaces/root_automator.RootAutomator.md#touchmove)
* [touchUp](/v9/generated/interfaces/root_automator.RootAutomator.md#touchup)
* [touchX](/v9/generated/interfaces/root_automator.RootAutomator.md#touchx)
* [touchY](/v9/generated/interfaces/root_automator.RootAutomator.md#touchy)

## 方法

### sendEvent

▸ **sendEvent**(`type`, `code`, `value`): `void`

发送原始输入事件。

#### 参数

| 名称    | 类型     | 描述           |
| :------ | :------- | :------------- |
| `type`  | `number` | 事件类型       |
| `code`  | `number` | 事件代码       |
| `value` | `number` | 事件值         |

#### 返回值

`void`

***

### syncReport

▸ **syncReport**(): `void`

同步报告，确保所有事件都已发送。

#### 返回值

`void`

***

### touch

▸ **touch**(`x`, `y`): `void`

触摸位置 (x, y)。

#### 参数

| 名称 | 类型     | 描述       |
| :--- | :------- | :--------- |
| `x`  | `number` | X 坐标     |
| `y`  | `number` | Y 坐标     |

#### 返回值

`void`

***

### touchX

▸ **touchX**(`x`): `void`

设置触摸的 X 坐标。

#### 参数

| 名称 | 类型     | 描述       |
| :--- | :------- | :--------- |
| `x`  | `number` | X 坐标     |

#### 返回值

`void`

***

### touchY

▸ **touchY**(`y`): `void`

设置触摸的 Y 坐标。

#### 参数

| 名称 | 类型     | 描述       |
| :--- | :------- | :--------- |
| `y`  | `number` | Y 坐标     |

#### 返回值

`void`

***

### sendSync

▸ **sendSync**(): `void`

发送同步事件。

#### 返回值

`void`

***

### tap

▸ **tap**(`x`, `y`, `id?`): `Promise`<`void`>

点击位置 (x, y)，时长为 5 毫秒。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator } = require("root_automator");

async function main() {
  const ra = await createRootAutomator({ root: true });
  await ra.tap(100, 100);
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `x`  | `number` | `undefined` | X 坐标                   |
| `y`  | `number` | `undefined` | Y 坐标                   |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### swipe

▸ **swipe**(`x1`, `y1`, `x2`, `y2`, `duration`, `id?`, `sampleMs?`): `Promise`<`void`>

在给定的 duration 时长从 (x1, y1) 位置滑动到 (x2, y2) 位置。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator } = require("root_automator");

async function main() {
  const ra = await createRootAutomator({ root: true });
  // 从 (100, 100) 滑动到 (200, 200)，滑动时长 300 毫秒
  await ra.swipe(100, 100, 200, 200, 300);
  await ra.exit();
}
main();
```

#### 参数

| 名称      | 类型     | 默认值  | 描述                                                         |
| :-------- | :------- | :------ | :----------------------------------------------------------- |
| `x1`      | `number` | `undefined` | 起始 X 坐标                                                  |
| `y1`      | `number` | `undefined` | 起始 Y 坐标                                                  |
| `x2`      | `number` | `undefined` | 结束 X 坐标                                                  |
| `y2`      | `number` | `undefined` | 结束 Y 坐标                                                  |
| `duration` | `number` | `undefined` | 滑动时长，单位毫秒                                           |
| `id`      | `number` | `0`     | 手指 ID，默认为 0                                            |
| `sampleMs` | `number` | `8`     | 滑动点采样时间，单位毫秒，默认为 8 毫秒                      |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### press

▸ **press**(`x`, `y`, `duration`, `id?`): `Promise`<`void`>

按下 (x, y) 位置持续 duration 时长，然后抬起手指。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator } = require("root_automator");

async function main() {
  const ra = await createRootAutomator({ root: true });
  // 按下 (100, 100) 位置持续 500 毫秒
  await ra.press(100, 100, 500);
  await ra.exit();
}
main();
```

#### 参数

| 名称       | 类型     | 默认值  | 描述                    |
| :--------- | :------- | :------ | :---------------------- |
| `x`        | `number` | `undefined` | X 坐标                   |
| `y`        | `number` | `undefined` | Y 坐标                   |
| `duration` | `number` | `undefined` | 按下时长，单位毫秒      |
| `id`       | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### longPress

▸ **longPress**(`x`, `y`, `id?`): `Promise`<`void`>

长按 (x, y) 位置。长按的时长为 [ViewConfiguration.getLongPressTimeout()](https://developer.android.com/reference/android/view/ViewConfiguration.html#getLongPressTimeout\(\))+100 毫秒。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator } = require("root_automator");

async function main() {
  const ra = await createRootAutomator({ root: true });
  // 长按 (100, 100) 位置
  await ra.longPress(100, 100);
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `x`  | `number` | `undefined` | X 坐标                   |
| `y`  | `number` | `undefined` | Y 坐标                   |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### touchDown

▸ **touchDown**(`x`, `y`, `id?`): `void`

按下 (x, y) 位置。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator } = require("root_automator");

async function main() {
  const ra = await createRootAutomator({ root: true });
  // 按下 (100, 100) 位置
  ra.touchDown(100, 100);
  // 移动手指
  ra.touchMove(200, 200);
  // 抬起手指
  ra.touchUp();
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `x`  | `number` | `undefined` | X 坐标                   |
| `y`  | `number` | `undefined` | Y 坐标                   |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`void`

***

### touchUp

▸ **touchUp**(`id?`): `void`

抬起手指。

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`void`

***

### touchMove

▸ **touchMove**(`x`, `y`, `id?`): `void`

将手指移动到 (x, y) 位置。

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `x`  | `number` | `undefined` | X 坐标                   |
| `y`  | `number` | `undefined` | Y 坐标                   |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`void`

***

### exit

▸ **exit**(`forced?`): `Promise`<`void`>

退出 RootAutomator。

#### 参数

| 名称     | 类型      | 默认值  | 描述                                                         |
| :------- | :-------- | :------ | :----------------------------------------------------------- |
| `forced` | `boolean` | `false` | 如果为 `true`，则会强制杀死进程并中断操作；如果为 `false`，在当前操作结束后退出进程 |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，在退出完成后 resolve。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/root_automator.RootAutomator2.md
---
# 接口: RootAutomator2
[root\_automator](/v9/generated/modules/root_automator.md).RootAutomator2

RootAutomator2 用于基于 root 或者 adb 权限，模拟点击、手势、长按等操作。相比起基于无障碍的操作，RootAutomator 支持多点触控和动态改变手势；相比 RootAutomator，RootAutomator2 的兼容性更佳。

::: tip
从 Pro 9.3 开始推荐使用 `RootAutomator2` 代替 `RootAutomator`，相比 `RootAutomator`，它有更好的设备兼容性。
:::

## 目录

### 方法

* [exit](/v9/generated/interfaces/root_automator.RootAutomator2.md#exit)
* [flush](/v9/generated/interfaces/root_automator.RootAutomator2.md#flush)
* [longPress](/v9/generated/interfaces/root_automator.RootAutomator2.md#longpress)
* [press](/v9/generated/interfaces/root_automator.RootAutomator2.md#press)
* [swipe](/v9/generated/interfaces/root_automator.RootAutomator2.md#swipe)
* [tap](/v9/generated/interfaces/root_automator.RootAutomator2.md#tap)
* [touchDown](/v9/generated/interfaces/root_automator.RootAutomator2.md#touchdown)
* [touchMove](/v9/generated/interfaces/root_automator.RootAutomator2.md#touchmove)
* [touchUp](/v9/generated/interfaces/root_automator.RootAutomator2.md#touchup)

## 方法

### tap

▸ **tap**(`x`, `y`): `Promise`<`void`>

点击位置 (x, y)，时长为 5 毫秒。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  // 点击 (200, 200) 的位置
  await ra.tap(200, 200);
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 描述       |
| :--- | :------- | :--------- |
| `x`  | `number` | X 坐标     |
| `y`  | `number` | Y 坐标     |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### swipe

▸ **swipe**(`x1`, `y1`, `x2`, `y2`, `duration`): `Promise`<`void`>

在给定的 duration 时长从 (x1, y1) 位置滑动到 (x2, y2) 位置。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  // 从 (1000, 50) 滑动到 (1000, 1000) 的位置，滑动时长 300ms
  await ra.swipe(1000, 50, 1000, 1000, 300);
  await ra.exit();
}
main();
```

#### 参数

| 名称       | 类型     | 描述                   |
| :--------- | :------- | :--------------------- |
| `x1`       | `number` | 起始 X 坐标            |
| `y1`       | `number` | 起始 Y 坐标            |
| `x2`       | `number` | 结束 X 坐标            |
| `y2`       | `number` | 结束 Y 坐标            |
| `duration` | `number` | 滑动时长，单位毫秒     |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### press

▸ **press**(`x`, `y`, `duration`): `Promise`<`void`>

按下 (x, y) 位置持续 duration 时长，然后抬起手指。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  // 按下 (1000, 500) 位置持续 2 秒
  await ra.press(1000, 500, 2000);
  await ra.exit();
}
main();
```

#### 参数

| 名称       | 类型     | 描述                   |
| :--------- | :------- | :--------------------- |
| `x`        | `number` | X 坐标                 |
| `y`        | `number` | Y 坐标                 |
| `duration` | `number` | 按下时长，单位毫秒     |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### longPress

▸ **longPress**(`x`, `y`): `Promise`<`void`>

长按 (x, y) 位置。长按的时长为 [ViewConfiguration.getLongPressTimeout()](https://developer.android.com/reference/android/view/ViewConfiguration.html#getLongPressTimeout\(\))+100 毫秒。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  // 长按 (1000, 500) 的位置
  await ra.longPress(1000, 500);
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 描述       |
| :--- | :------- | :--------- |
| `x`  | `number` | X 坐标     |
| `y`  | `number` | Y 坐标     |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当操作完成时，Promise 对象会被 resolve。

***

### touchDown

▸ **touchDown**(`x`, `y`, `id?`): `Promise`<`void`>

按下 (x, y) 位置。若对应 id 的手指之前已经是按下状态，则会模拟手指移动 (touchMove) 事件。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  // 按下 (100, 100) 位置
  await ra.touchDown(100, 100);
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `x`  | `number` | `undefined` | X 坐标                   |
| `y`  | `number` | `undefined` | Y 坐标                   |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`Promise`<`void`>

***

### touchDown

▸ **touchDown**(`pointers`): `Promise`<`void`>

模拟一个手指按下事件，使用数组描述触摸的位置和相应的手指 id。例如 `ra.touchDown([{x: 100, y: 100, id: 0}, {x: 200, y: 200, id: 1}])` 会使用手指 0 按下位置 (100, 100)，使用手指 1 按下位置 (200, 200)。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  
  // 使用两个手指同时按下
  await ra.touchDown([
    { x: 100, y: 100, id: 0 },
    { x: 200, y: 200, id: 1 },
  ]);
  
  await ra.touchUp();
  await ra.exit();
}
main();
```

#### 参数

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `pointers` | [`Pointer`](/v9/generated/interfaces/root_automator.Pointer.md)\[] | 指针数组，描述多个触摸点的位置和对应的手指 id               |

#### 返回值

`Promise`<`void`>

***

### touchUp

▸ **touchUp**(`id?`): `Promise`<`void`>

抬起手指。

#### 参数

| 名称 | 类型     | 默认值  | 描述                                                         |
| :--- | :------- | :------ | :----------------------------------------------------------- |
| `id` | `number` | `undefined` | 手指 ID，若不指定则抬起所有手指                              |

#### 返回值

`Promise`<`void`>

***

### touchUp

▸ **touchUp**(`pointers`): `Promise`<`void`>

模拟一个手指抬起事件，使用数组描述触摸的位置和相应的手指 id。例如 `ra.touchUp([{x: 100, y: 100, id: 0}, {x: 200, y: 200, id: 1}])` 会使用手指 0 和手指 1 抬起，其中的坐标位置为手指抬起时的位置。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  
  // 按下两个手指
  await ra.touchDown([
    { x: 100, y: 100, id: 0 },
    { x: 200, y: 200, id: 1 },
  ]);
  
  // 抬起两个手指
  await ra.touchUp([
    { x: 150, y: 150, id: 0 },
    { x: 250, y: 250, id: 1 },
  ]);
  
  await ra.exit();
}
main();
```

#### 参数

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `pointers` | [`Pointer`](/v9/generated/interfaces/root_automator.Pointer.md)\[] | 指针数组，描述多个触摸点的位置和对应的手指 id               |

#### 返回值

`Promise`<`void`>

***

### touchMove

▸ **touchMove**(`x`, `y`, `id?`): `void`

将手指移动到 (x, y) 位置。若对应 id 的手指之前并非按下状态，则会模拟手指按下 (touchDown) 事件。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  
  // 按下
  await ra.touchDown(100, 100);
  // 移动手指
  ra.touchMove(200, 200);
  ra.touchMove(300, 300);
  // 抬起
  await ra.touchUp();
  await ra.flush();
  await ra.exit();
}
main();
```

#### 参数

| 名称 | 类型     | 默认值  | 描述                    |
| :--- | :------- | :------ | :---------------------- |
| `x`  | `number` | `undefined` | X 坐标                   |
| `y`  | `number` | `undefined` | Y 坐标                   |
| `id` | `number` | `0`     | 手指 ID，默认为 0        |

#### 返回值

`void`

***

### touchMove

▸ **touchMove**(`pointers`): `Promise`<`void`>

模拟一个手指移动事件，使用数组描述触摸的位置和相应的手指 id。例如 `ra.touchMove([{x: 100, y: 100, id: 0}, {x: 200, y: 200, id: 1}])` 会将手指 0 移动到位置 (100, 100)，将手指 1 移动到位置 (200, 200)。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  
  // 按下两个手指
  await ra.touchDown([
    { x: 100, y: 100, id: 0 },
    { x: 200, y: 200, id: 1 },
  ]);
  
  // 移动两个手指
  await ra.touchMove([
    { x: 150, y: 150, id: 0 },
    { x: 250, y: 250, id: 1 },
  ]);
  
  await ra.touchUp();
  await ra.flush();
  await ra.exit();
}
main();
```

#### 参数

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `pointers` | [`Pointer`](/v9/generated/interfaces/root_automator.Pointer.md)\[] | 指针数组，描述多个触摸点的位置和对应的手指 id               |

#### 返回值

`Promise`<`void`>

***

### flush

▸ **flush**(): `Promise`<`void`>

等待所有操作完成。例如我们使用 `touchDown`、`touchMove`、`touchUp` 完成了一系列手势，需要等待这些手势完成后继续下一步时，使用 `await ra.flush()` 来异步等待。

**`示例`**

```javascript
"nodejs";
const { createRootAutomator2 } = require("root_automator");

async function main() {
  const ra = await createRootAutomator2({ root: true });
  
  // 执行一系列手势操作
  await ra.touchDown(100, 100);
  ra.touchMove(200, 200);
  ra.touchMove(300, 300);
  await ra.touchUp();
  
  // 等待所有操作完成
  await ra.flush();
  
  console.log("所有手势操作已完成");
  await ra.exit();
}
main();
```

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，当所有待处理的操作完成时 resolve。

***

### exit

▸ **exit**(`forced?`): `Promise`<`void`>

退出 RootAutomator2。

#### 参数

| 名称     | 类型      | 默认值  | 描述                                                         |
| :------- | :-------- | :------ | :----------------------------------------------------------- |
| `forced` | `boolean` | `false` | 如果为 `true`，将不等待未完成的操作，而是尽可能快地退出；如果为 `false`，在所有未完成的操作结束后退出进程 |

#### 返回值

`Promise`<`void`>

返回一个 Promise 对象，在退出完成后 resolve。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/root_automator.RootAutomatorOptions.md
---
# 接口: RootAutomatorOptions
[root\_automator](/v9/generated/modules/root_automator.md).RootAutomatorOptions

创建 RootAutomator 的选项，包括是否使用 root 权限、adb 权限，或者显式指定输入设备。

## 继承关系

* [`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md)

  ↳ **`RootAutomatorOptions`**

## 目录

### 属性

* [inputDevice](/v9/generated/interfaces/root_automator.RootAutomatorOptions.md#inputdevice)
* [orientationAware](/v9/generated/interfaces/root_automator.RootAutomatorOptions.md#orientationaware)

## 属性

### inputDevice

• `Optional` **inputDevice**: `string`

触摸输入设备的路径，比如 `/dev/input/event5`。

如果不指定，则会自动检测，但检测失败时会抛出异常。你也可以手动在终端运行 `getevent -t`，然后在屏幕上操作，看输入事件的设备路径是什么。

***

### orientationAware

• `Optional` **orientationAware**: `boolean`

是否根据屏幕方向自动切换坐标系。若为 `true`，在横屏时坐标会相对横屏屏幕左上角；若为 `false`，则和 Rhino API 的 RootAutomator 行为一致。默认为 `true`。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/sensors.SensorExt.md'
---
# 接口: SensorExt
[sensors](/v9/generated/modules/sensors.md).SensorExt

[getSensor](/v9/generated/modules/sensors.md#getsensor)返回的对象的拓展，在Android原生[Sensor类](https://developer.android.google.cn/reference/android/hardware/Sensor)上拓展了额外的函数，主要是[enableSensorEvent](/v9/generated/interfaces/sensors.SensorExt.md#enablesensorevent)和[disableSensorEvent](/v9/generated/interfaces/sensors.SensorExt.md#disablesensorevent)。

## 继承关系

* `unknown`

  ↳ **`SensorExt`**

## 目录

### 方法

* [disableSensorEvent](/v9/generated/interfaces/sensors.SensorExt.md#disablesensorevent)
* [enableSensorEvent](/v9/generated/interfaces/sensors.SensorExt.md#enablesensorevent)

### Events

* [on](/v9/generated/interfaces/sensors.SensorExt.md#on)

## 方法

### disableSensorEvent

▸ **disableSensorEvent**(): [`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

禁用传感器事件。在调用本函数后，传感器将不会发送`change`和`accuracy_change`事件。

#### 返回值

[`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

***

### enableSensorEvent

▸ **enableSensorEvent**(`delay?`): [`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

启用传感器事件。在调用本函数前，传感器将不会发送`change`和`accuracy_change`事件。

#### 参数

| 名称     | 类型                                                         | 描述           |
| :------- | :----------------------------------------------------------- | :------------- |
| `delay?` | [`SensorDelay`](/v9/generated/enums/sensors.SensorDelay.md) | 传感器事件频率 |

#### 返回值

[`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

## Events

### on

▸ **on**(`event`, `listener`): [`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

传感器数据回调事件。其回调的第一个参数是[android.hardware.SensorEvent](https://developer.android.google.cn/reference/android/hardware/SensorEvent)对象，后面的参数则根据传感器类型不同而不同。

常见的传感器的参数类型为：

* `accelerometer`: `(event: SensorEvent, ax: number, agy: number, az: number)`，表示各个方向的加速度，单位是`m/s^2`。
* `magnetic_field`: `(event: SensorEvent, hx: number, hy: number, hz: number)`，表示各个方向磁场强度，单位是`uT`。
* `orientation`: `(event: SensorEvent, azimuth: number, pitch: number, roll: number)`，表示方向，参见[SensorEvent.values](https://developer.android.google.cn/reference/android/hardware/SensorEvent.html#values)。
* `gyroscope`: `(event: SensorEvent, axisX: number, axisY: number, axisZ: number)`，表示各个方向的角速度，单位是`rad/s`。
* `light`: `(event: SensorEvent, lux: number)`，表示光线强度，单位是`lx`。
* `pressure`: `(event: SensorEvent, pressure: number)`，表示气压，单位是`hPa`。
* `temperature`: `(event: SensorEvent, temperature: number)`，表示温度，单位是`°C`。
* `proximity`: `(event: SensorEvent, distance: number)`，表示距离，单位是`cm`。
* `gravity`: `(event: SensorEvent, gx: number, gy: number, gz: number)`，表示各个方向的重力加速度，单位是`m/s^2`。
* `linear_acceleration`: `(event: SensorEvent, ax: number, ay: number, az: number)`，表示各个方向的线性加速度，单位是`m/s^2`。

**`参见`**

[SensorEvent](https://developer.android.google.cn/reference/android/hardware/SensorEvent) change

#### 参数

| 名称       | 类型                                                 |
| :--------- | :--------------------------------------------------- |
| `event`    | `"change"`                                           |
| `listener` | (`event`: `SensorEvent`, ...`args`: `any`) => `void` |

#### 返回值

[`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

▸ **on**(`event`, `listener`): [`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

传感器精度变化事件。传感器精度`accuracy`范围为0~3，0表示数据不可靠，1~3表示低精度到高精度。

**`参见`**

[SensorExt](https://developer.android.google.cn/reference/android/hardware/SensorEventListener.html#onAccuracyChanged\(android.hardware.Sensor,%20int\)) accuracy\_change

#### 参数

| 名称       | 类型                                                     |
| :--------- | :------------------------------------------------------- |
| `event`    | `"accuracy_change"`                                      |
| `listener` | (`event`: `SensorEvent`, `accuracy`: `number`) => `void` |

#### 返回值

[`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/settings.SettingItem.md
---
# 接口: SettingItem<T>
[settings](/v9/generated/modules/settings.md).SettingItem

设置项。可以通过`value`属性来读取和修改其值。

## 类型参数

| 名称 |
| :--- |
| `T`  |

## 目录

### 属性

* [value](/v9/generated/interfaces/settings.SettingItem.md#value)

## 属性

### value

• **value**: `T`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/shell.ExecutionResult.md
---
# 接口: ExecutionResult
[shell](/v9/generated/modules/shell.md).ExecutionResult

shell命令执行结果。由[exec](/v9/generated/interfaces/shell.Shell.md#exec)和[exec](/v9/generated/modules/shell.md#exec)返回。

## 目录

### 属性

* [code](/v9/generated/interfaces/shell.ExecutionResult.md#code)
* [output](/v9/generated/interfaces/shell.ExecutionResult.md#output)
* [stderr](/v9/generated/interfaces/shell.ExecutionResult.md#stderr)
* [stdout](/v9/generated/interfaces/shell.ExecutionResult.md#stdout)

## 属性

### code

• `Readonly` **code**: `number`

命令执行的返回码，即退出代码。一般0表示执行成功，其他值表示执行失败。

***

### output

• `Readonly` **output**: `string`

命令执行的输出。包含标准输出和标准错误输出。

***

### stderr

• `Readonly` **stderr**: `string`

命令执行的标准错误输出。

***

### stdout

• `Readonly` **stdout**: `string`

命令执行的标准输出。比如`ls`命令的stdout是文件列表。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/shell.Shell.md'
---
# 接口: Shell
[shell](/v9/generated/modules/shell.md).Shell

Shell 类，通过[createShell](/v9/generated/modules/shell.md#createshell)创建新实例。

## 继承关系

* `EventEmitter`

  ↳ **`Shell`**

Shell 接口继承自 EventEmitter，因此可以使用所有 EventEmitter 的方法，如 `on()`, `once()`, `off()`, `removeListener()` 等。

## 目录

### 方法

* [exec](/v9/generated/interfaces/shell.Shell.md#exec)
* [exit](/v9/generated/interfaces/shell.Shell.md#exit)
* [submit](/v9/generated/interfaces/shell.Shell.md#submit)

### Events

* [on](/v9/generated/interfaces/shell.Shell.md#on)

## 方法

### exec

▸ **exec**(`cmd`): `Promise`<[`ExecutionResult`](/v9/generated/interfaces/shell.ExecutionResult.md)>

执行 shell 命令，并等待执行结果。

**`示例`**

```javascript
"nodejs";
const { createShell } = require("shell");
async function main() {
  const shell = createShell();
  console.log(await shell.exec("touch test.txt"));
  console.log(await shell.exec("ls -l test.txt"));
  await shell.exit();
}
main();
```

#### 参数

| 名称  | 类型     | 描述         |
| :---- | :------- | :----------- |
| `cmd` | `string` | 要执行的命令 |

#### 返回值

`Promise`<[`ExecutionResult`](/v9/generated/interfaces/shell.ExecutionResult.md)>

执行结果的 Promise

***

### exit

▸ **exit**(`forcedly?`): `Promise`<[`ExitResult`](/v9/generated/modules/shell.md#exitresult)>

退出 shell 进程。若 forcedly 为 true，则会直接杀死进程，此时返回值为字符串，表示杀死进程的 signal；如果 forcedly 为 false，则会使用`exit`命令退出 shell 进程，并返回退出码(exit code)。

#### 参数

| 名称        | 类型      | 描述         |
| :---------- | :-------- | :----------- |
| `forcedly?` | `boolean` | 是否强制退出 |

#### 返回值

`Promise`<[`ExitResult`](/v9/generated/modules/shell.md#exitresult)>

***

### submit

▸ **submit**(`input`): `void`

往 shell 的标准输入中提交文本内容，若文本内容末尾未包含换行符，则会自动添加换行符。

#### 参数

| 名称    | 类型     |
| :------ | :------- |
| `input` | `string` |

#### 返回值

`void`

## Events

### on

▸ **on**(`event`, `listener`): [`Shell`](/v9/generated/interfaces/shell.Shell.md)

监听 Shell 的输出事件。Shell 接口继承自 EventEmitter，支持两种事件类型："data" 和 "line"。

**`示例`**

```javascript
"nodejs";
const { createShell } = require("shell");

const shell = createShell();

// 监听数据事件（每次有新数据时触发）
shell.on("data", (chunk, type) => {
  console.log(`收到 ${type} 数据:`, chunk.toString());
});

// 监听行事件（每次有新的一行时触发）
shell.on("line", (line, type) => {
  console.log(`收到 ${type} 行:`, line);
});

shell.exec("ls -la");
```

#### 事件类型

##### "data" 事件

当 shell 的标准输出或标准错误输出有新数据时触发。

**`示例`**

```javascript
"nodejs";
const { createShell } = require("shell");

const shell = createShell();
shell.on("data", (chunk, type) => {
  if (type === "stdout") {
    console.log("标准输出:", chunk.toString());
  } else if (type === "stderr") {
    console.error("标准错误:", chunk.toString());
  }
});
shell.exec("echo 'Hello' && echo 'Error' >&2");
```

#### 参数（"data" 事件）

| 名称       | 类型                                                                                                             | 描述                                                                                                            |
| :--------- | :--------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- |
| `event`    | `"data"`                                                                                                         | 事件名称，固定为 "data"                                                                                         |
| `listener` | (`chunk`: `Buffer`, `type`: [`StandardOutputType`](/v9/generated/modules/shell.md#standardoutputtype)) => `void` | 监听器函数。当有新数据时被调用，`chunk` 是数据缓冲区，`type` 表示是标准输出（"stdout"）还是标准错误（"stderr"） |

#### 返回值

[`Shell`](/v9/generated/interfaces/shell.Shell.md)

返回 Shell 对象本身，支持链式调用。

***

##### "line" 事件

当 shell 的标准输出或标准错误输出有新的一行数据时触发。

**`示例`**

```javascript
"nodejs";
const { createShell } = require("shell");

const shell = createShell();
shell.on("line", (line, type) => {
  if (type === "stdout") {
    console.log("输出行:", line);
  } else if (type === "stderr") {
    console.error("错误行:", line);
  }
});
shell.exec("ls -1");
```

#### 参数（"line" 事件）

| 名称       | 类型                                                                                                            | 描述                                                                                                                             |
| :--------- | :-------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------- |
| `event`    | `"line"`                                                                                                        | 事件名称，固定为 "line"                                                                                                          |
| `listener` | (`line`: `string`, `type`: [`StandardOutputType`](/v9/generated/modules/shell.md#standardoutputtype)) => `void` | 监听器函数。当有新的一行数据时被调用，`line` 是行内容（不包含换行符），`type` 表示是标准输出（"stdout"）还是标准错误（"stderr"） |

#### 返回值

[`Shell`](/v9/generated/interfaces/shell.Shell.md)

返回 Shell 对象本身，支持链式调用。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/shell.ShellOptions.md
---
# 接口: ShellOptions
[shell](/v9/generated/modules/shell.md).ShellOptions

Shell 选项。用于创建新的 Shell 或 RootAutomator 时指定。参见[createShell](/v9/generated/modules/shell.md#createshell)和[setDefaultShellOptions](/v9/generated/modules/shell.md#setdefaultshelloptions)。

## 目录

### 属性

* [adb](/v9/generated/interfaces/shell.ShellOptions.md#adb)
* [cmd](/v9/generated/interfaces/shell.ShellOptions.md#cmd)
* [env](/v9/generated/interfaces/shell.ShellOptions.md#env)
* [root](/v9/generated/interfaces/shell.ShellOptions.md#root)

## 属性

### adb

• `Optional` **adb**: `boolean`

是否使用 adb shell（当前实现为 Shizuku）。

***

### cmd

• `Optional` **cmd**: `string`

启动进程的命令，比如`su`用于启动 root 进程。当此选项指定时，`root`选项将被覆盖。

***

### env

• `Optional` **env**: `NodeJS.ProcessEnv`

环境变量，例如 `{PATH: "/data/local/tmp"}`。用于设置 shell 进程的环境变量。

***

### root

• `Optional` **root**: `boolean`

是否使用 Root 权限。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/toast.ToastOptions.md
---
# 接口: ReadOnlyProperty<T>
[toast](/v9/generated/modules/toast.md).ToastOptions

## 目录

### 属性

* [duration](/v9/generated/interfaces/toast.ToastOptions.md#duration)
* [log](/v9/generated/interfaces/toast.ToastOptions.md#log)

## 属性

### duration

• `Optional` **duration**: `"short"` | `"long"`

***

### log

• `Optional` **log**: `string` | `boolean`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_activity.ActivityLifecycle.md
---
# ui/activity
[ui/activity](/v9/generated/modules/ui_activity.md).ActivityLifecycle

## 继承关系

* `EventEmitter`

  ↳ **`ActivityLifecycle`**

ActivityLifecycle 接口继承自 EventEmitter，用于监听 Activity 的生命周期事件。

## 目录

### 方法

* [on](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md#on)

## 方法

### on

▸ **on**(`event`, `listener`): [`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

监听 Activity 生命周期事件。ActivityLifecycle 接口继承自 EventEmitter，支持多种生命周期事件。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_created", (activity) => {
    console.log("Activity 已创建:", activity);
});

activityLifecycle.on("activity_resumed", (activity) => {
    console.log("Activity 已恢复:", activity);
});

activityLifecycle.on("activity_destroyed", (activity) => {
    console.log("Activity 已销毁:", activity);
});
```

#### 事件类型

##### "activity\_created" 事件

当 Activity 被创建时触发。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_created", (activity, savedInstanceState) => {
    console.log("Activity 已创建");
    if (savedInstanceState) {
        console.log("有保存的状态");
    }
});
```

#### 参数（"activity\_created" 事件）

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_created"`                                         | 事件名称，固定为 "activity\_created"                         |
| `listener` | (`activity`: `Activity`, `savedInstanceState?`: `any`) => `void` | 监听器函数。当 Activity 被创建时被调用，第一个参数为 Activity 对象，第二个参数为保存的状态（如果有） |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "activity\_started" 事件

当 Activity 启动时触发。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_started", (activity) => {
    console.log("Activity 已启动");
});
```

#### 参数（"activity\_started" 事件）

| 名称       | 类型                               | 描述                                                         |
| :--------- | :--------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_started"`               | 事件名称，固定为 "activity\_started"                         |
| `listener` | (`activity`: `Activity`) => `void` | 监听器函数。当 Activity 启动时被调用，参数为 Activity 对象 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "activity\_resumed" 事件

当 Activity 恢复时触发（Activity 进入前台并可以与用户交互）。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_resumed", (activity) => {
    console.log("Activity 已恢复，可以交互");
});
```

#### 参数（"activity\_resumed" 事件）

| 名称       | 类型                               | 描述                                                         |
| :--------- | :--------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_resumed"`               | 事件名称，固定为 "activity\_resumed"                          |
| `listener` | (`activity`: `Activity`) => `void` | 监听器函数。当 Activity 恢复时被调用，参数为 Activity 对象 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "activity\_paused" 事件

当 Activity 暂停时触发（Activity 失去焦点但仍可见）。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_paused", (activity) => {
    console.log("Activity 已暂停");
});
```

#### 参数（"activity\_paused" 事件）

| 名称       | 类型                               | 描述                                                         |
| :--------- | :--------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_paused"`                | 事件名称，固定为 "activity\_paused"                           |
| `listener` | (`activity`: `Activity`) => `void` | 监听器函数。当 Activity 暂停时被调用，参数为 Activity 对象 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "activity\_stopped" 事件

当 Activity 停止时触发（Activity 不再可见）。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_stopped", (activity) => {
    console.log("Activity 已停止");
});
```

#### 参数（"activity\_stopped" 事件）

| 名称       | 类型                               | 描述                                                         |
| :--------- | :--------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_stopped"`               | 事件名称，固定为 "activity\_stopped"                          |
| `listener` | (`activity`: `Activity`) => `void` | 监听器函数。当 Activity 停止时被调用，参数为 Activity 对象 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "activity\_save\_instance\_state" 事件

当 Activity 需要保存状态时触发（例如屏幕旋转时）。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_save_instance_state", (activity, outState) => {
    console.log("保存 Activity 状态");
    // 可以在这里保存自定义状态
});
```

#### 参数（"activity\_save\_instance\_state" 事件）

| 名称       | 类型                                                     | 描述                                                         |
| :--------- | :------------------------------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_save_instance_state"`                         | 事件名称，固定为 "activity\_save\_instance\_state"             |
| `listener` | (`activity`: `Activity`, `outState`: `Bundle`) => `void` | 监听器函数。当需要保存状态时被调用，第一个参数为 Activity 对象，第二个参数为 Bundle 对象用于保存状态 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "activity\_destroyed" 事件

当 Activity 被销毁时触发。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("activity_destroyed", (activity) => {
    console.log("Activity 已销毁");
});
```

#### 参数（"activity\_destroyed" 事件）

| 名称       | 类型                               | 描述                                                         |
| :--------- | :--------------------------------- | :----------------------------------------------------------- |
| `event`    | `"activity_destroyed"`             | 事件名称，固定为 "activity\_destroyed"                        |
| `listener` | (`activity`: `Activity`) => `void` | 监听器函数。当 Activity 被销毁时被调用，参数为 Activity 对象 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

***

##### "all\_activities\_destroyed" 事件

当所有 Activity 都被销毁时触发。

**`示例`**

```javascript
"nodejs";
const { activityLifecycle } = require("ui/activity");

activityLifecycle.on("all_activities_destroyed", () => {
    console.log("所有 Activity 都已销毁");
});
```

#### 参数（"all\_activities\_destroyed" 事件）

| 名称       | 类型         | 描述                                                         |
| :--------- | :----------- | :----------------------------------------------------------- |
| `event`    | `"all_activities_destroyed"` | 事件名称，固定为 "all\_activities\_destroyed"                 |
| `listener` | () => `void` | 监听器函数。当所有 Activity 都被销毁时被调用，无参数 |

#### 返回值

[`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

返回 ActivityLifecycle 对象本身，支持链式调用。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_activity.StatusBarConfig.md
---
# 接口: StatusBarConfig

[ui/activity](/v9/generated/modules/ui_activity.md).StatusBarConfig

## 目录

### 属性

* [color](/v9/generated/interfaces/ui_activity.StatusBarConfig.md#color)
* [light](/v9/generated/interfaces/ui_activity.StatusBarConfig.md#light)

## 属性

### color

• `Readonly` **color**: `string` | `number` | [`Color`](/v9/generated/classes/color.Color.md)

***

### light

• `Optional` `Readonly` **light**: `boolean`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_layout.Resource.md
---
# 接口: Resource

[ui/layout](/v9/generated/modules/ui_layout.md).Resource

## Indexable

▪ \[name: `string`]: `number`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_layout.Resources.md
---
# 接口: Resources

[ui/layout](/v9/generated/modules/ui_layout.md).Resources

## Indexable

▪ \[type: `string`]: [`Resource`](/v9/generated/interfaces/ui_layout.Resource.md)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_res.ImageLoader.md
---
# ImageLoader
[ui/res](/v9/generated/interfaces/ui_res.ImageLoader.md).ImageLoader

## 目录

### 方法

* [cancel](#cancel)
* [clearDiskCache](#cleardiskcache)
* [clearMemoryCache](#clearmemorycache)
* [loadImageBitmap](#loadimagebitmap)
* [loadImageDrawable](#loadimagedrawable)
* [loadImageInto](#loadimageinto)
* [loadImageIntoBackground](#loadimageintobackground)

## 方法

### cancel

▸ **cancel**(`view`): `void`

取消指定 View 的图片加载任务。如果该 View 正在加载图片，则取消加载。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");

// 开始加载图片
imageLoader.loadImageInto(imageView, "https://example.com/image.jpg");

// 取消加载
imageLoader.cancel(imageView);
```

#### 参数

| 名称   | 类型   | 描述                   |
| :----- | :----- | :--------------------- |
| `view` | `View` | 要取消加载的 View 对象 |

#### 返回值

`void`

***

### clearDiskCache

▸ **clearDiskCache**(): `void`

清除图片加载器的磁盘缓存。此操作会删除所有已缓存的图片文件。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");

// 清除磁盘缓存
imageLoader.clearDiskCache();
console.log("磁盘缓存已清除");
```

#### 返回值

`void`

***

### clearMemoryCache

▸ **clearMemoryCache**(): `void`

清除图片加载器的内存缓存。此操作会释放内存中缓存的图片，但不会删除磁盘缓存。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");

// 清除内存缓存
imageLoader.clearMemoryCache();
console.log("内存缓存已清除");
```

#### 返回值

`void`

***

### loadImageBitmap

▸ **loadImageBitmap**(`view`, `uri`): `Promise`<`Bitmap`>

从指定的 URI 加载图片并返回 Bitmap 对象。URI 可以是网络地址（http/https）、本地文件路径或 content:// URI。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");

async function main() {
  const bitmap = await imageLoader.loadImageBitmap(
    view,
    "https://example.com/image.jpg"
  );
  // 使用 bitmap 对象
  imageView.setImageBitmap(bitmap);
}
main();
```

#### 参数

| 名称   | 类型     | 描述                                                          |
| :----- | :------- | :------------------------------------------------------------ |
| `view` | `View`   | View 对象，用于获取 Context（通常传入 ImageView 或其他 View） |
| `uri`  | `String` | 图片的 URI，可以是网络地址、本地文件路径或 content:// URI     |

#### 返回值

`Promise`<`Bitmap`>

返回一个 Promise，resolve 时返回加载的 Bitmap 对象。

***

### loadImageDrawable

▸ **loadImageDrawable**(`view`, `uri`): `Promise`<`Drawable`>

从指定的 URI 加载图片并返回 Drawable 对象。URI 可以是网络地址（http/https）、本地文件路径或 content:// URI。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");

async function main() {
  const drawable = await imageLoader.loadImageDrawable(
    view,
    "https://example.com/image.jpg"
  );
  // 使用 drawable 对象
  imageView.setImageDrawable(drawable);
}
main();
```

#### 参数

| 名称   | 类型     | 描述                                                          |
| :----- | :------- | :------------------------------------------------------------ |
| `view` | `View`   | View 对象，用于获取 Context（通常传入 ImageView 或其他 View） |
| `uri`  | `String` | 图片的 URI，可以是网络地址、本地文件路径或 content:// URI     |

#### 返回值

`Promise`<`Drawable`>

返回一个 Promise，resolve 时返回加载的 Drawable 对象。

***

### loadImageInto

▸ **loadImageInto**(`imageView`, `uri`): `Promise`<`void`>

从指定的 URI 加载图片并直接设置到 ImageView 中。URI 可以是网络地址（http/https）、本地文件路径或 content:// URI。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");
const { inflateXml } = require("ui/layout");

async function main() {
  const rootView = inflateXml(
    context,
    `
        <ImageView id="img" />
    `
  );
  const imageView = rootView.findView("img");

  // 加载网络图片
  await imageLoader.loadImageInto(imageView, "https://example.com/image.jpg");

  // 加载本地图片
  await imageLoader.loadImageInto(imageView, "/sdcard/image.png");
}
main();
```

#### 参数

| 名称        | 类型        | 描述                                                      |
| :---------- | :---------- | :-------------------------------------------------------- |
| `imageView` | `ImageView` | 要设置图片的 ImageView 对象                               |
| `uri`       | `String`    | 图片的 URI，可以是网络地址、本地文件路径或 content:// URI |

#### 返回值

`Promise`<`void`>

返回一个 Promise，当图片加载并设置完成时 resolve。

***

### loadImageIntoBackground

▸ **loadImageIntoBackground**(`view`, `uri`): `Promise`<`void`>

从指定的 URI 加载图片并设置为 View 的背景。URI 可以是网络地址（http/https）、本地文件路径或 content:// URI。

**`示例`**

```javascript
"nodejs";
const { imageLoader } = require("ui/res");
const { inflateXml } = require("ui/layout");

async function main() {
  const rootView = inflateXml(
    context,
    `
        <LinearLayout id="container" />
    `
  );
  const container = rootView.findView("container");

  // 加载图片作为背景
  await imageLoader.loadImageIntoBackground(
    container,
    "https://example.com/background.jpg"
  );
}
main();
```

#### 参数

| 名称   | 类型     | 描述                                                      |
| :----- | :------- | :-------------------------------------------------------- |
| `view` | `View`   | 要设置背景图片的 View 对象                                |
| `uri`  | `String` | 图片的 URI，可以是网络地址、本地文件路径或 content:// URI |

#### 返回值

`Promise`<`void`>

返回一个 Promise，当图片加载并设置为背景完成时 resolve。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_selector.FindOptions.md
---
# 接口: FindOptions
[ui\_selector](/v9/generated/modules/ui_selector.md).FindOptions

## 目录

### 属性

* [timeout](#timeout)
* [maxRetries](#maxretries)

## 属性

### timeout

• `Readonly` **timeout**: `number`

### maxRetries

• `Readonly` **maxRetries**: `number`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_selector.PropertyOperator.md
---
# 接口: PropertyOperator
[ui\_selector](/v9/generated/modules/ui_selector.md).PropertyOperator

## 索引

### 属性

* [!=](ui_selector.PropertyOperator.md#__)
* [<](ui_selector.PropertyOperator.md#_)
* [<=](ui_selector.PropertyOperator.md#__-1)
* [=](ui_selector.PropertyOperator.md#_-1)
* [>](ui_selector.PropertyOperator.md#_-2)
* [>=](ui_selector.PropertyOperator.md#__-2)

## 属性

### 可选 !=

!=: [PropertyValue](../modules/ui_selector.html#PropertyValue)

### 可选 <

<: [PropertyValue](../modules/ui_selector.html#PropertyValue)

### 可选 <=

<=: [PropertyValue](../modules/ui_selector.html#PropertyValue)

### 可选 =

\=: [PropertyValue](../modules/ui_selector.html#PropertyValue)

### 可选 >

\>: [PropertyValue](../modules/ui_selector.html#PropertyValue)

### 可选 >=

\>=: [PropertyValue](../modules/ui_selector.html#PropertyValue)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_selector.SelectorQuery.md
---
# 接口: SelectorQuery
[ui\_selector](/v9/generated/modules/ui_selector.md).SelectorQuery

## Indexable

▪ \[key: `string`]: [`PropertyQuery`](/v9/generated/modules/ui_selector.md#propertyquery)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_view.Extras.md'
---
# ui/activity
[ui/view](/v9/generated/modules/ui_view.md).Extras

## Indexable

▪ \[key: `string`]: `any`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_view.JsViewExt.md'
---
# 接口: JsViewExt\<T>

[ui/view](/v9/generated/modules/ui_view.md).JsViewExt

## 类型参数

| 名称 |
| :--- |
| `T`  |

## 继承关系

* `EventEmitter`

  ↳ **`JsViewExt`**

JsViewExt 接口继承自 EventEmitter，因此可以使用所有 EventEmitter 的方法来监听事件。

## 目录

### 属性

* [binding](/v9/generated/interfaces/ui_view.JsViewExt.md#binding)
* [extras](/v9/generated/interfaces/ui_view.JsViewExt.md#extras)

### 方法

* [attr](/v9/generated/interfaces/ui_view.JsViewExt.md#attr)
* [clearViewBindingCache](/v9/generated/interfaces/ui_view.JsViewExt.md#clearviewbindingcache)
* [findView](/v9/generated/interfaces/ui_view.JsViewExt.md#findview)

## 属性

### binding

• `Readonly` **binding**: [`ViewBinding`](/v9/generated/interfaces/ui_view.ViewBinding.md)

***

### extras

• `Readonly` **extras**: [`Extras`](/v9/generated/interfaces/ui_view.Extras.md)

## 方法

### attr

▸ **attr**(`attrName`): `undefined` | `null` | `string`

#### 参数

| 名称       | 类型     |
| :--------- | :------- |
| `attrName` | `string` |

#### 返回值

`undefined` | `null` | `string`

▸ **attr**(`attrName`, `value`): `void`

#### 参数

| 名称       | 类型              |
| :--------- | :---------------- |
| `attrName` | `string`          |
| `value`    | `null` | `string` |

#### 返回值

`void`

***

### clearViewBindingCache

▸ **clearViewBindingCache**(): `void`

#### 返回值

`void`

***

### findView

▸ **findView**<`T`>(`id`): `null` | [`JsView`](/v9/generated/modules/ui_view.md#jsview)<`T`>

#### 类型参数

| 名称 | 类型           |
| :--- | :------------- |
| `T`  | extends `View` |

#### 参数

| 名称 | 类型     |
| :--- | :------- |
| `id` | `string` |

#### 返回值

`null` | [`JsView`](/v9/generated/modules/ui_view.md#jsview)<`T`>

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_view.ViewBinding.md
---
# 接口: ViewBinding

***

此页内容

* [Indexable](/v9/generated/interfaces/ui_view.ViewBinding.md#indexable)

[ui/view](/v9/generated/modules/ui_view.md).ViewBinding

## Indexable

▪ \[viewId: `string`]: [`JsView`](/v9/generated/modules/ui_view.md#jsview)<`View`>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_view.ViewEvent.md'
---
# 接口: ViewEvent

***

[ui/view](/v9/generated/modules/ui_view.md).ViewEvent

## 目录

### 属性

* [consumed](/v9/generated/interfaces/ui_view.ViewEvent.md#consumed)
* [view](/v9/generated/interfaces/ui_view.ViewEvent.md#view)

## 属性

### consumed

• **consumed**: `boolean`

***

### view

• **view**: `View`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_view.WidgetAttributes.md
---
# 接口: WidgetAttributes

***

[ui/view](/v9/generated/modules/ui_view.md).WidgetAttributes

## Indexable

▪ \[key: `string`]: [`AttributeValue`](/v9/generated/modules/ui_view.md#attributevalue)

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_web.InvokeEvent.md
---
# 接口: InvokeEvent

[ui/web](/v9/generated/modules/ui_web.md).InvokeEvent

## 目录

### 属性

* [arguments](/v9/generated/interfaces/ui_web.InvokeEvent.md#arguments)
* [channel](/v9/generated/interfaces/ui_web.InvokeEvent.md#channel)

## 属性

### arguments

• `Readonly` **arguments**: `any`\[]

***

### channel

• `Readonly` **channel**: `string`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_web.IPCEvent.md'
---
# 接口: IPCEvent
[ui/web](/v9/generated/modules/ui_web.md).IPCEvent

## 目录

### 属性

* [name](/v9/generated/interfaces/ui_web.IPCEvent.md#name)

## 属性

### name

• `Readonly` **name**: `string`

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_web.JavaScriptBridge.md
---
# 接口: JavaScriptBridge
[ui/web](/v9/generated/modules/ui_web.md).JavaScriptBridge

JavaScriptBridge 接口用于在 WebView 和 JavaScript 之间进行双向通信。它继承自 EventEmitter，支持事件监听和消息传递。

## 继承关系

* `EventEmitter`

  ↳ **`JavaScriptBridge`**

JavaScriptBridge 接口继承自 EventEmitter，因此可以使用所有 EventEmitter 的方法，如 `on()`, `once()`, `off()`, `removeListener()` 等。

## 目录

### 方法

* [eval](/v9/generated/interfaces/ui_web.JavaScriptBridge.md#eval)
* [handle](/v9/generated/interfaces/ui_web.JavaScriptBridge.md#handle)
* [invoke](/v9/generated/interfaces/ui_web.JavaScriptBridge.md#invoke)
* [on](/v9/generated/interfaces/ui_web.JavaScriptBridge.md#on)
* [send](/v9/generated/interfaces/ui_web.JavaScriptBridge.md#send)

## 方法

### eval

▸ **eval**(`code`): `Promise`<`any`>

在 WebView 的 JavaScript 上下文中执行代码，并返回执行结果的 Promise。

**`示例`**

```javascript
"nodejs";
const { inflateXml } = require("ui/layout");

async function main() {
    const rootView = inflateXml(context, `
        <WebView id="webview" />
    `);
    const webView = rootView.findView("webview");
    
    // 在 WebView 中执行 JavaScript 代码
    const result = await webView.jsBridge.eval("document.title");
    console.log("页面标题:", result);
}
main();
```

#### 参数

| 名称   | 类型     | 描述                                                         |
| :----- | :------- | :----------------------------------------------------------- |
| `code` | `string` | 要在 WebView 的 JavaScript 上下文中执行的代码 |

#### 返回值

`Promise`<`any`>

返回一个 Promise，resolve 时返回代码执行的结果。

***

### handle

▸ **handle**(`action`, `handler`): [`JavaScriptBridge`](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)

注册一个处理器，用于处理来自 WebView 中 JavaScript 的调用请求。当 WebView 中的 JavaScript 调用 `invoke()` 方法时，对应的处理器会被调用。

**`示例`**

```javascript
"nodejs";
const { inflateXml } = require("ui/layout");

async function main() {
    const rootView = inflateXml(context, `
        <WebView id="webview" />
    `);
    const webView = rootView.findView("webview");
    
    // 注册处理器
    webView.jsBridge.handle("getData", async (event, ...args) => {
        console.log("收到调用请求:", event.channel, args);
        return { success: true, data: "Hello from Native" };
    });
    
    // 加载包含 JavaScript 代码的页面
    webView.loadUrl("file:///android_asset/index.html");
}
main();
```

#### 参数

| 名称      | 类型                                                         | 描述                                                         |
| :-------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `action`  | `string` | `null` | `undefined`                           | 要处理的 action 名称。如果为 `null` 或 `undefined`，则处理所有未匹配的调用 |
| `handler` | [`InvokeRequestHandler`](/v9/generated/modules/ui_web.md#invokerequesthandler) | 处理函数，接收 `InvokeEvent` 和额外的参数，返回处理结果或 Promise |

#### 返回值

[`JavaScriptBridge`](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)

返回 JavaScriptBridge 对象本身，支持链式调用。

***

### invoke

▸ **invoke**(`channel`, ...`args`): `Promise`<`any`>

从 Native 端调用 WebView 中的 JavaScript 函数。此方法会向 WebView 发送一个调用请求，并等待 JavaScript 端的响应。

**`示例`**

```javascript
"nodejs";
const { inflateXml } = require("ui/layout");

async function main() {
    const rootView = inflateXml(context, `
        <WebView id="webview" />
    `);
    const webView = rootView.findView("webview");
    
    // 加载页面
    await webView.loadUrl("file:///android_asset/index.html");
    
    // 调用 WebView 中的 JavaScript 函数
    const result = await webView.jsBridge.invoke("myFunction", "arg1", "arg2");
    console.log("调用结果:", result);
}
main();
```

#### 参数

| 名称      | 类型     | 描述                                                         |
| :-------- | :------- | :----------------------------------------------------------- |
| `channel` | `string` | 要调用的 JavaScript 函数或 channel 名称                      |
| `...args` | `any`    | 传递给 JavaScript 函数的参数                                |

#### 返回值

`Promise`<`any`>

返回一个 Promise，resolve 时返回 JavaScript 端的响应结果。

***

### on

▸ **on**(`event`, `listener`): [`JavaScriptBridge`](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)

监听来自 WebView 中 JavaScript 的事件。当 WebView 中的 JavaScript 调用 `send()` 方法时，对应的事件监听器会被触发。

**`示例`**

```javascript
"nodejs";
const { inflateXml } = require("ui/layout");

async function main() {
    const rootView = inflateXml(context, `
        <WebView id="webview" />
    `);
    const webView = rootView.findView("webview");
    
    // 监听来自 WebView 的事件
    webView.jsBridge.on("message", (event, ...args) => {
        console.log("收到事件:", event.name, args);
    });
    
    // 加载页面
    webView.loadUrl("file:///android_asset/index.html");
}
main();
```

#### 参数

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `event`    | `string`                                                     | 要监听的事件名称                                             |
| `listener` | (`event`: [`IPCEvent`](/v9/generated/interfaces/ui_web.IPCEvent.md), ...`args`: `any`) => `void` | 事件监听器函数。第一个参数为 `IPCEvent` 对象，后续参数为事件传递的数据 |

#### 返回值

[`JavaScriptBridge`](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)

返回 JavaScriptBridge 对象本身，支持链式调用。

***

### send

▸ **send**(`event`, ...`args`): `void`

向 WebView 中的 JavaScript 发送事件。此方法会立即发送事件，不会等待响应。

**`示例`**

```javascript
"nodejs";
const { inflateXml } = require("ui/layout");

async function main() {
    const rootView = inflateXml(context, `
        <WebView id="webview" />
    `);
    const webView = rootView.findView("webview");
    
    // 加载页面
    await webView.loadUrl("file:///android_asset/index.html");
    
    // 向 WebView 发送事件
    webView.jsBridge.send("updateData", { key: "value" });
}
main();
```

#### 参数

| 名称      | 类型     | 描述                                                         |
| :-------- | :------- | :----------------------------------------------------------- |
| `event`   | `string` | 要发送的事件名称                                             |
| `...args` | `any`    | 要传递的数据，可以是任意类型                                 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui_web.JsWebView.md'
---
# 接口: JsWebView

[ui/web](/v9/generated/modules/ui_web.md).JsWebView

## 继承关系

* `WebView`

  ↳ **`JsWebView`**

## 目录

### 属性

* [jsBridge](/v9/generated/interfaces/ui_web.JsWebView.md#jsbridge)

### 方法

* [addListener](/v9/generated/interfaces/ui_web.JsWebView.md#addlistener)
* [emit](/v9/generated/interfaces/ui_web.JsWebView.md#emit)
* [eventNames](/v9/generated/interfaces/ui_web.JsWebView.md#eventnames)
* [getMaxListeners](/v9/generated/interfaces/ui_web.JsWebView.md#getmaxlisteners)
* [listenerCount](/v9/generated/interfaces/ui_web.JsWebView.md#listenercount)
* [listeners](/v9/generated/interfaces/ui_web.JsWebView.md#listeners)
* [off](/v9/generated/interfaces/ui_web.JsWebView.md#off)
* [on](/v9/generated/interfaces/ui_web.JsWebView.md#on)
* [once](/v9/generated/interfaces/ui_web.JsWebView.md#once)
* [prependListener](/v9/generated/interfaces/ui_web.JsWebView.md#prependlistener)
* [prependOnceListener](/v9/generated/interfaces/ui_web.JsWebView.md#prependoncelistener)
* [rawListeners](/v9/generated/interfaces/ui_web.JsWebView.md#rawlisteners)
* [removeAllListeners](/v9/generated/interfaces/ui_web.JsWebView.md#removealllisteners)
* [removeListener](/v9/generated/interfaces/ui_web.JsWebView.md#removelistener)
* [setMaxListeners](/v9/generated/interfaces/ui_web.JsWebView.md#setmaxlisteners)

## 属性

### jsBridge

• `Readonly` **jsBridge**: [`JavaScriptBridge`](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)

## 方法

### addListener

▸ **addListener**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### emit

▸ **emit**(`event`, ...`args`): `boolean`

#### 参数

| 名称      | 类型     |
| :-------- | :------- | -------- |
| `event`   | `string` | `symbol` |
| `...args` | `any`\[]  |

#### 返回值

`boolean`

***

### eventNames

▸ **eventNames**(): (`string` | `symbol`)\[]

#### 返回值

(`string` | `symbol`)\[]

***

### getMaxListeners

▸ **getMaxListeners**(): `number`

#### 返回值

`number`

***

### listenerCount

▸ **listenerCount**(`event`): `number`

#### 参数

| 名称    | 类型     |
| :------ | :------- | -------- |
| `event` | `string` | `symbol` |

#### 返回值

{number}

***

### listeners

▸ **listeners**(`event`): `Function`\[]

#### 参数

| 名称    | 类型     |
| :------ | :------- | -------- |
| `event` | `string` | `symbol` |

#### 返回值

`Function`\[]

***

### off

▸ **off**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### on

▸ **on**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### once

▸ **once**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### prependListener

▸ **prependListener**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### prependOnceListener

▸ **prependOnceListener**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### rawListeners

▸ **rawListeners**(`event`): `Function`\[]

#### 参数

| 名称    | 类型     |
| :------ | :------- | -------- |
| `event` | `string` | `symbol` |

#### 返回值

`Function`\[]

***

### removeAllListeners

▸ **removeAllListeners**(`event?`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称     | 类型     |
| :------- | :------- | -------- |
| `event?` | `string` | `symbol` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### removeListener

▸ **removeListener**(`event`, `listener`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称       | 类型                           |
| :--------- | :----------------------------- | -------- |
| `event`    | `string`                       | `symbol` |
| `listener` | (...`args`: `any`\[]) => `void` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### setMaxListeners

▸ **setMaxListeners**(`n`): [`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

#### 参数

| 名称 | 类型     |
| :--- | :------- |
| `n`  | `number` |

#### 返回值

[`JsWebView`](/v9/generated/interfaces/ui_web.JsWebView.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui.Point.md'
---
# 
[ui](https://pro.autojs.org/docs/zh/v9/generated/modules/ui.md).Point

## 目录

### 属性

* [x](/v9/generated/interfaces/ui.Point.md#x)
* [y](/v9/generated/interfaces/ui.Point.md#y)

## 属性

### x

• `Readonly` **x**: `number`

***

### y

• `Readonly` **y**: `number`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/ui.Size.md'
---
# 接口: Size
[ui](/v9/generated/modules/ui.md).Size

表示大小的对象，单位一般为像素。另外，当值为 `WRAP_CONTENT` 时，表示自适应大小；当值为 `MATCH_PARENT` 时，表示大小填满父布局/窗口。

## 目录

### 属性

* [height](/v9/generated/interfaces/ui.Size.md#height)
* [width](/v9/generated/interfaces/ui.Size.md#width)

## 属性

### width

• `Readonly` **width**: `number`

宽度，单位为像素。也可以是 `WRAP_CONTENT`（-2）表示自适应宽度，或 `MATCH_PARENT`（-1）表示填满父布局/窗口的宽度。

**`示例`**

```javascript
"nodejs";
const { Size, WRAP_CONTENT, MATCH_PARENT } = require("ui");

// 固定宽度
const size1 = { width: 100, height: 200 };

// 自适应宽度
const size2 = { width: WRAP_CONTENT, height: 200 };

// 填满父布局宽度
const size3 = { width: MATCH_PARENT, height: 200 };
```

***

### height

• `Readonly` **height**: `number`

高度，单位为像素。也可以是 `WRAP_CONTENT`（-2）表示自适应高度，或 `MATCH_PARENT`（-1）表示填满父布局/窗口的高度。

**`示例`**

```javascript
"nodejs";
const { Size, WRAP_CONTENT, MATCH_PARENT } = require("ui");

// 固定高度
const size1 = { width: 100, height: 200 };

// 自适应高度
const size2 = { width: 100, height: WRAP_CONTENT };

// 填满父布局高度
const size3 = { width: 100, height: MATCH_PARENT };
```

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/work_manager.IntentTaskConfig.md
---
# 接口: IntentTaskConfig

[work\_manager](/v9/generated/modules/work_manager.md).IntentTaskConfig

意图任务的配置，包括广播任务（接收特定广播事件而触发）、活动任务（外部文件、链接需要打开、编辑时触发）。

**`参见`**

* [addBroadcastIntentTask](/v9/generated/modules/work_manager.md#addbroadcastintenttask)
* [addActivityIntentTask](/v9/generated/modules/work_manager.md#addactivityintenttask)

## 继承关系

* [`TaskConfig`](/v9/generated/interfaces/work_manager.TaskConfig.md)

  ↳ **`IntentTaskConfig`**

## 目录

### 属性

* [action](/v9/generated/interfaces/work_manager.IntentTaskConfig.md#action)
* [dataType](/v9/generated/interfaces/work_manager.IntentTaskConfig.md#datatype)
* [local](/v9/generated/interfaces/work_manager.IntentTaskConfig.md#local)
* [path](/v9/generated/interfaces/work_manager.IntentTaskConfig.md#path)
* [type](/v9/generated/interfaces/work_manager.IntentTaskConfig.md#type)

## 属性

### action

• `Readonly` **action**: `string`

任务的action。比如在活动任务中，"android.intent.action.VIEW"是查看文件时触发；在广播任务中，"android.intent.action.BATTERY\_CHANGED"是电量变化时触发。

***

### dataType

• `Optional` `Readonly` **dataType**: `string`

用于活动任务中，过滤文件的类型（MimeType）。

***

### local

• `Optional` `Readonly` **local**: `boolean`

***

### path

• `Readonly` **path**: `string`

任务的脚本路径，绝对路径。

#### Inherited from

[TaskConfig](/v9/generated/interfaces/work_manager.TaskConfig.md).[path](/v9/generated/interfaces/work_manager.TaskConfig.md#path)

***

### type

• `Optional` `Readonly` **type**: `"broadcast_intent_task"` | `"activity_intent_task"`

指定是活动任务(activity\_intent\_task)还是广播任务(broadcast\_intent\_task)。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/work_manager.IntentTaskQuery.md
---
# 接口: IntentTaskQuery

[work\_manager](/v9/generated/modules/work_manager.md).IntentTaskQuery

查询意图任务的条件。

**`参见`**

[queryIntentTasks](/v9/generated/modules/work_manager.md#queryintenttasks)

## 目录

### 属性

* [action](/v9/generated/interfaces/work_manager.IntentTaskQuery.md#action)
* [path](/v9/generated/interfaces/work_manager.IntentTaskQuery.md#path)

## 属性

### action

• `Optional` **action**: `string`

要查询的任务的action。

***

### path

• `Optional` **path**: `string`

要查询的任务的脚本文件路径。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/work_manager.TaskConfig.md
---
# 接口: TaskConfig

[work\_manager](/v9/generated/modules/work_manager.md).TaskConfig

任务配置。

## 继承关系

* **`TaskConfig`**

  ↳ [`TimedTaskConfig`](/v9/generated/interfaces/work_manager.TimedTaskConfig.md)

  ↳ [`IntentTaskConfig`](/v9/generated/interfaces/work_manager.IntentTaskConfig.md)

## 目录

### 属性

* [path](/v9/generated/interfaces/work_manager.TaskConfig.md#path)

## 属性

### path

• `Readonly` **path**: `string`

任务的脚本路径，绝对路径。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/work_manager.TimedTaskConfig.md
---
# 接口: TimedTaskConfig

[work\_manager](/v9/generated/modules/work_manager.md).TimedTaskConfig

定时任务配置。

**`参见`**

* [addDailyTask](/v9/generated/modules/work_manager.md#adddailytask)
* [addWeeklyTask](/v9/generated/modules/work_manager.md#addweeklytask)
* [addOneTimeTask](/v9/generated/modules/work_manager.md#addonetimetask)

## 继承关系

* [`TaskConfig`](/v9/generated/interfaces/work_manager.TaskConfig.md)

  ↳ **`TimedTaskConfig`**

## 目录

### 属性

* [path](/v9/generated/interfaces/work_manager.TimedTaskConfig.md#path)
* [time](/v9/generated/interfaces/work_manager.TimedTaskConfig.md#time)

## 属性

### path

• `Readonly` **path**: `string`

任务的脚本路径，绝对路径。

#### Inherited from

[TaskConfig](/v9/generated/interfaces/work_manager.TaskConfig.md).[path](/v9/generated/interfaces/work_manager.TaskConfig.md#path)

***

### time

• `Readonly` **time**: [`DateTime`](/v9/generated/modules/work_manager.md#datetime)

定时任务的执行时间。如果是周期性任务，该时间只会取相应周期的时间，比如每日任务只会取小时和分钟。

---

---
url: >-
  https://www.wuyunai.com/docs/docs/v9/generated/interfaces/work_manager.TimedTaskQuery.md
---
# 接口: TimedTaskQuery

[work\_manager](/v9/generated/modules/work_manager.md).TimedTaskQuery

查询定时任务的条件。

**`参见`**

[queryTimedTasks](/v9/generated/modules/work_manager.md#querytimedtasks)

## 目录

### 属性

* [path](/v9/generated/interfaces/work_manager.TimedTaskQuery.md#path)

## 属性

### path

• `Optional` **path**: `string`

要查询的任务的脚本文件路径。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/zip.UnzipOptions.md'
---
# 接口: UnzipOptions

[zip](/v9/generated/modules/zip.md).UnzipOptions

解压选项。

**`参见`**

* [unzip](/v9/generated/modules/zip.md#unzip)
* [extractFile](/v9/generated/interfaces/zip.ZipFile.md#extractfile)
* [extractAll](/v9/generated/interfaces/zip.ZipFile.md#extractall)

## 目录

### 属性

* [ignoreAttributes](/v9/generated/interfaces/zip.UnzipOptions.md#ignoreattributes)
* [password](/v9/generated/interfaces/zip.UnzipOptions.md#password)

## 属性

### ignoreAttributes

• `Optional` **ignoreAttributes**: [`ZipFileAttribute`](/v9/generated/modules/zip.md#zipfileattribute)\[]

解压文件写入磁盘时，要忽略的文件属性。默认为空。

**`示例`**

```javascript
const { unzip } = require("zip");
unzip("test.zip", "./dest", { ignoreAttributes: ["hidden", "system"] })
  .then(() => console.log("unzip success"));
```

***

### password

• `Optional` **password**: `string`

解压时用于加密文件的密码。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/zip.ZipFile.md'
---
# 接口: ZipFile

[zip](/v9/generated/modules/zip.md).ZipFile

[open](/v9/generated/modules/zip.md#open)返回的对象，用于在压缩包中增删文件、获取文件头信息、解压等。

## 目录

### 方法

* [addFile](/v9/generated/interfaces/zip.ZipFile.md#addfile)
* [addFiles](/v9/generated/interfaces/zip.ZipFile.md#addfiles)
* [addFolder](/v9/generated/interfaces/zip.ZipFile.md#addfolder)
* [extractAll](/v9/generated/interfaces/zip.ZipFile.md#extractall)
* [extractFile](/v9/generated/interfaces/zip.ZipFile.md#extractfile)
* [getFileHeader](/v9/generated/interfaces/zip.ZipFile.md#getfileheader)
* [getFileHeaders](/v9/generated/interfaces/zip.ZipFile.md#getfileheaders)
* [getPath](/v9/generated/interfaces/zip.ZipFile.md#getpath)
* [isEncrypted](/v9/generated/interfaces/zip.ZipFile.md#isencrypted)
* [isValidZipFile](/v9/generated/interfaces/zip.ZipFile.md#isvalidzipfile)
* [removeFile](/v9/generated/interfaces/zip.ZipFile.md#removefile)
* [setPassword](/v9/generated/interfaces/zip.ZipFile.md#setpassword)

## 方法

### addFile

▸ **addFile**(`file`, `options?`): `Promise`<`void`>

在压缩包中添加指定文件。

**`示例`**

```javascript
const zip = require('zip);
async function main() {
    const zipFile = await zip.open('test.zip');
    await zipFile.addFile('test.txt');
}
main();
```

#### 参数

| 名称       | 类型                                                       | 描述         |
| :--------- | :--------------------------------------------------------- | :----------- |
| `file`     | `string`                                                   | 本地文件路径 |
| `options?` | [`ZipOptions`](/v9/generated/interfaces/zip.ZipOptions.md) | 压缩选项     |

#### 返回值

`Promise`<`void`>

***

### addFiles

▸ **addFiles**(`fileList`, `options?`): `Promise`<`void`>

在压缩包中添加多个文件。

#### 参数

| 名称       | 类型                                                       | 描述                       |
| :--------- | :--------------------------------------------------------- | :------------------------- |
| `fileList` | `string`\[]                                                 | 要添加的本地文件路径的数组 |
| `options?` | [`ZipOptions`](/v9/generated/interfaces/zip.ZipOptions.md) | 压缩选项，可选             |

#### 返回值

`Promise`<`void`>

***

### addFolder

▸ **addFolder**(`folder`, `options?`): `Promise`<`void`>

在压缩包中添加指定文件夹。

#### 参数

| 名称       | 类型                                                       | 描述       |
| :--------- | :--------------------------------------------------------- | :--------- |
| `folder`   | `string`                                                   | 文件夹路径 |
| `options?` | [`ZipOptions`](/v9/generated/interfaces/zip.ZipOptions.md) | 压缩选项   |

#### 返回值

`Promise`<`void`>

***

### extractAll

▸ **extractAll**(`dest`, `options?`): `Promise`<`void`>

解压所有文件到目标路径`dest`。

#### 参数

| 名称       | 类型                                                           | 描述     |
| :--------- | :------------------------------------------------------------- | :------- |
| `dest`     | `string`                                                       | 解压路径 |
| `options?` | [`UnzipOptions`](/v9/generated/interfaces/zip.UnzipOptions.md) | 解压选项 |

#### 返回值

`Promise`<`void`>

***

### extractFile

▸ **extractFile**(`file`, `dest`, `options?`, `newFileName?`): `Promise`<`void`>

从压缩包文件中提取特定文件到目标路径。如果目标路径无效，则此方法将引发异常。

#### 参数

| 名称           | 类型                                                           | 描述                     |
| :------------- | :------------------------------------------------------------- | :----------------------- |
| `file`         | `string`                                                       | 要解压的文件             |
| `dest`         | `string`                                                       | 解压文件的目标路径       |
| `options?`     | [`UnzipOptions`](/v9/generated/interfaces/zip.UnzipOptions.md) | 解压选项                 |
| `newFileName?` | `string`                                                       | 解压后文件的新名字，可选 |

#### 返回值

`Promise`<`void`>

***

### getFileHeader

▸ **getFileHeader**(`file`): `any`

获取压缩包内指定文件的文件头信息。文件头信息包括校验值，是否加密，注释等。

#### 参数

| 名称   | 类型     | 描述                 |
| :----- | :------- | :------------------- |
| `file` | `string` | 压缩包内指定文件路径 |

#### 返回值

`any`

[FileHeader](https://javadoc.io/doc/net.lingala.zip4j/zip4j/1.3.2/net/lingala/zip4j/model/FileHeader.html)

***

### getFileHeaders

▸ **getFileHeaders**(): `any`\[]

获取压缩包内所有文件的文件头信息。文件头信息包括校验值，是否加密，注释等。

#### 返回值

`any`\[]

[FileHeader](https://javadoc.io/doc/net.lingala.zip4j/zip4j/1.3.2/net/lingala/zip4j/model/FileHeader.html)的数组

***

### getPath

▸ **getPath**(): `string`

获取当前压缩包的路径。

#### 返回值

`string`

***

### isEncrypted

▸ **isEncrypted**(): `boolean`

获取当前压缩包是否是加密压缩包。

#### 返回值

`boolean`

是否压缩包加密

***

### isValidZipFile

▸ **isValidZipFile**(): `boolean`

获取当前压缩包是否是一个有效的压缩包。 如果选择的路径不是一个压缩包或该文件不存在，均返回`false`。

#### 返回值

`boolean`

是否是有效压缩包

***

### removeFile

▸ **removeFile**(`file`): `Promise`<`void`>

删除 zip 文件内的指定文件。此方法首先找到文件头，然后删除文件；如果文件不存在，则此方法引发异常。

如果 zip 文件是分割后的 zip 文件，则此方法会抛出异常，zip 规范不允许更新拆分的 zip 档案。

#### 参数

| 名称   | 类型     | 描述         |
| :----- | :------- | :----------- |
| `file` | `string` | 要删除的文件 |

#### 返回值

`Promise`<`void`>

***

### setPassword

▸ **setPassword**(`password`): `void`

如果文件是一个加密的压缩包，必须用此函数设置正确的解压密码，才能解压出加密的文件。 未设置密码尝试解压加密的压缩包将抛出异常，选择的压缩包文件不存在使用本函数将抛出`ZipException`。

#### 参数

| 名称       | 类型     | 描述 |
| :--------- | :------- | :--- |
| `password` | `string` | 密码 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/interfaces/zip.ZipOptions.md'
---
# 接口: ZipOptions

[zip](/v9/generated/modules/zip.md).ZipOptions

压缩选项。

**`示例`**

```javascript
const { zipDir } = require('zip');
zipDir('./dir', './dest.zip', {
   compressionLevel: 9,
   password: '123456',
   includeRootFolder: false,
});
```

**`参见`**

* [zipDir](/v9/generated/modules/zip.md#zipdir)
* [zipFiles](/v9/generated/modules/zip.md#zipfiles)
* [zipFile](/v9/generated/modules/zip.md#zipfile)
* [addFolder](/v9/generated/interfaces/zip.ZipFile.md#addfolder)
* [addFile](/v9/generated/interfaces/zip.ZipFile.md#addfile)
* [addFiles](/v9/generated/interfaces/zip.ZipFile.md#addfiles)

## 目录

### 属性

* [aesKeyStrength](/v9/generated/interfaces/zip.ZipOptions.md#aeskeystrength)
* [compressionLevel](/v9/generated/interfaces/zip.ZipOptions.md#compressionlevel)
* [compressionMethod](/v9/generated/interfaces/zip.ZipOptions.md#compressionmethod)
* [defaultFolderPath](/v9/generated/interfaces/zip.ZipOptions.md#defaultfolderpath)
* [encryptionMethod](/v9/generated/interfaces/zip.ZipOptions.md#encryptionmethod)
* [fileNameInZip](/v9/generated/interfaces/zip.ZipOptions.md#filenameinzip)
* [includeRootFolder](/v9/generated/interfaces/zip.ZipOptions.md#includerootfolder)
* [password](/v9/generated/interfaces/zip.ZipOptions.md#password)
* [readHiddenFiles](/v9/generated/interfaces/zip.ZipOptions.md#readhiddenfiles)
* [rootFolderInZip](/v9/generated/interfaces/zip.ZipOptions.md#rootfolderinzip)

## 属性

### aesKeyStrength

• `Optional` **aesKeyStrength**: `"AES_STRENGTH_128"` | `"AES_STRENGTH_192"` | `"AES_STRENGTH_256"`

AES加密强度，包括`AES_STRENGTH_128`，`AES_STRENGTH_192`，`AES_STRENGTH_256`

***

### compressionLevel

• `Optional` **compressionLevel**: `number`

压缩级别，0~9，0为不压缩，9为最好压缩（速度较慢）。默认为5（正常压缩）。

***

### compressionMethod

• `Optional` **compressionMethod**: `"COMP_STORE"` | `"COMP_DEFLATE"`

压缩方式，`COMP_STORE`为仅打包不压缩, `COMP_DEFLATE`为压缩（默认）

***

### defaultFolderPath

• `Optional` **defaultFolderPath**: `string`

压缩或添加文件时，指定文件在压缩包的默认文件夹位置。

***

### encryptionMethod

• `Optional` **encryptionMethod**: `"ENC_NO_ENCRYPTION"` | `"ENC_METHOD_STANDARD"` | `"ENC_METHOD_AES"`

加密方法，`ENC_NO_ENCRYPTION`为不加密(默认)，`ENC_METHOD_STANDARD`为标准机密, `ENC_METHOD_AES`为AES加密

***

### fileNameInZip

• `Optional` **fileNameInZip**: `string`

压缩或添加文件时，指定文件在压缩包中的路径、名称。

**`参见`**

* [addFile](/v9/generated/interfaces/zip.ZipFile.md#addfile)
* [addFolder](/v9/generated/interfaces/zip.ZipFile.md#addfolder)

***

### includeRootFolder

• `Optional` **includeRootFolder**: `boolean`

设置标志以指示添加文件的父文件夹是否将包含在ZIP中。如果为true，则添加文件的父文件夹将包含在ZIP中。默认为true。

**`参见`**

* [addFolder](/v9/generated/interfaces/zip.ZipFile.md#addfolder)
* [zipDir](/v9/generated/modules/zip.md#zipdir)

***

### password

• `Optional` **password**: `string`

加密压缩的密码。如果设置密码但不设置加密方法，则加密方法默认为AES。

***

### readHiddenFiles

• `Optional` **readHiddenFiles**: `boolean`

压缩文件夹时是否包含隐藏文件。如果为true，则在将文件夹添加到zip时将包含隐藏文件。默认为true。

***

### rootFolderInZip

• `Optional` **rootFolderInZip**: `string`

设置压缩包首目录的文件夹名称，如果没有首目录，则创建这个首目录。

**`参见`**

* [addFolder](/v9/generated/interfaces/zip.ZipFile.md#addfolder)
* [zipDir](/v9/generated/modules/zip.md#zipdir)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/accessibility.md'
description: >-
  Auto.js Pro accessibility 模块 API 文档 -
  提供基于无障碍服务的自动化功能，包括控件查找、操作、信息获取等。支持选择器、UI对象操作、事件监听等功能。
---
# accessibility - 无障碍

## 目录

### 类

* [StrokeDescription](/v9/generated/classes/accessibility.StrokeDescription.md)

### 接口

* [Accessibility](/v9/generated/interfaces/accessibility.Accessibility.md)
* [AccessibilityEvent](/v9/generated/interfaces/accessibility.AccessibilityEvent.md)
* [AccessibilityWindow](/v9/generated/interfaces/accessibility.AccessibilityWindow.md)
* [EnableServiceOptions](/v9/generated/interfaces/accessibility.EnableServiceOptions.md)
* [NextEventOptions](/v9/generated/interfaces/accessibility.NextEventOptions.md)
* [Point](/v9/generated/interfaces/accessibility.Point.md)
* [ToastEvent](/v9/generated/interfaces/accessibility.ToastEvent.md)

### 变量

* [accessibility](/v9/generated/modules/accessibility.md#accessibility)

### 函数

* [back](/v9/generated/modules/accessibility.md#back)
* [click](/v9/generated/modules/accessibility.md#click)
* [clickText](/v9/generated/modules/accessibility.md#clicktext)
* [currentActivity](/v9/generated/modules/accessibility.md#currentactivity)
* [currentPackage](/v9/generated/modules/accessibility.md#currentpackage)
* [home](/v9/generated/modules/accessibility.md#home)
* [inputText](/v9/generated/modules/accessibility.md#inputtext)
* [lockScreen](/v9/generated/modules/accessibility.md#lockscreen)
* [longClick](/v9/generated/modules/accessibility.md#longclick)
* [nextEvent](/v9/generated/modules/accessibility.md#nextevent)
* [nextEventOrNull](/v9/generated/modules/accessibility.md#nexteventornull)
* [openNotifications](/v9/generated/modules/accessibility.md#opennotifications)
* [openQuickSettings](/v9/generated/modules/accessibility.md#openquicksettings)
* [performGesture](/v9/generated/modules/accessibility.md#performgesture)
* [performGestures](/v9/generated/modules/accessibility.md#performgestures)
* [performGlobalAction](/v9/generated/modules/accessibility.md#performglobalaction)
* [press](/v9/generated/modules/accessibility.md#press)
* [scrollBackward](/v9/generated/modules/accessibility.md#scrollbackward)
* [scrollForward](/v9/generated/modules/accessibility.md#scrollforward)
* [select](/v9/generated/modules/accessibility.md#select)
* [sendKeyCodeHeadsethook](/v9/generated/modules/accessibility.md#sendkeycodeheadsethook)
* [setText](/v9/generated/modules/accessibility.md#settext)
* [showLauncherAllApps](/v9/generated/modules/accessibility.md#showlauncherallapps)
* [swipe](/v9/generated/modules/accessibility.md#swipe)
* [takeScreenshot](/v9/generated/modules/accessibility.md#takescreenshot)
* [togglePowerDialog](/v9/generated/modules/accessibility.md#togglepowerdialog)
* [toggleRecents](/v9/generated/modules/accessibility.md#togglerecents)
* [toggleSplitScreen](/v9/generated/modules/accessibility.md#togglesplitscreen)
* [triggerAccessibilityButton](/v9/generated/modules/accessibility.md#triggeraccessibilitybutton)
* [triggerAccessibilityShortcut](/v9/generated/modules/accessibility.md#triggeraccessibilityshortcut)

## 变量

### accessibility

• `Const` **accessibility**: [`Accessibility`](/v9/generated/interfaces/accessibility.Accessibility.md) = `accessibilityInternal`

无障碍服务实例

## 函数

### back

▸ **back**(): `boolean`

模拟返回按键

#### 返回值

`boolean`

是否成功。

***

### click

▸ **click**(`x`, `y`): `Promise`<`boolean`>

点击屏幕上指定位置。坐标以屏幕左上角为原点，向右下增加。最大值一般等同于设备分辨率。

#### 参数

| 名称 | 类型     | 描述  |
| :--- | :------- | :---- |
| `x`  | `number` | X坐标 |
| `y`  | `number` | Y坐标 |

#### 返回值

`Promise`<`boolean`>

***

### clickText

▸ **clickText**(`text`, `index?`): `Promise`<`boolean`>

点击屏幕中的文本。

#### 参数

| 名称    | 类型     | 默认值      | 描述                            |
| :------ | :------- | :---------- | :------------------------------ |
| `text`  | `string` | `undefined` | 需点击的文本内容                |
| `index` | `number` | `0`         | 点击屏幕中的第几个文本，从0开始 |

#### 返回值

`Promise`<`boolean`>

是否成功的Promise

***

### currentActivity

▸ **currentActivity**(): `string` | `null`

返回最近一次监测到的正在运行的应用的Activity名称，一般可以认为就是当前正在运行的应用的Activity名称。

#### 返回值

`string` | `null`

Activity名称。无权限则返回null。

***

### currentPackage

▸ **currentPackage**(`clearCache?`): `string` | `null`

返回当前获得焦点或活跃的窗口包名，需要注意的是，这包括悬浮窗等情况（也即如果悬浮窗获得焦点，将返回悬浮窗的包名）。没有焦点/活跃窗口或没有无障碍权限时，返回`null`。

#### 参数

| 名称         | 类型      | 默认值 | 描述         |
| :----------- | :-------- | :----- | :----------- |
| `clearCache` | `boolean` | `true` | 是否清除缓存 |

#### 返回值

`string` | `null`|`string` | `null`

***

### home

▸ **home**(): `boolean`

模拟Home键

#### 返回值

`boolean`

是否成功。

***

### inputText

▸ **inputText**(`text`, `index?`): `Promise`<`boolean`>

输入文本（在原输入框内容后追加输入）。

#### 参数

| 名称    | 类型     | 默认值      | 描述                              |
| :------ | :------- | :---------- | :-------------------------------- |
| `text`  | `string` | `undefined` | 输入的文本内容                    |
| `index` | `number` | `0`         | 输入至屏幕中第几个输入框，从0开始 |

#### 返回值

`Promise`<`boolean`>

是否成功的Promise

***

### lockScreen

▸ **lockScreen**(): `boolean`

锁屏。

#### 返回值

`boolean`

是否成功。需要安卓9或以上。

***

### longClick

▸ **longClick**(`x`, `y`): `Promise`<`boolean`>

长按屏幕指定位置。

#### 参数

| 名称 | 类型     | 描述  |
| :--- | :------- | :---- |
| `x`  | `number` | X坐标 |
| `y`  | `number` | Y坐标 |

#### 返回值

`Promise`<`boolean`>

***

### nextEvent

▸ **nextEvent**(`event`, `options?`): `Promise`<`android.view.accessibility.AccessibilityEvent`>

#### 参数

| 名称      | 类型                                                         |
| :-------- | :----------------------------------------------------------- |
| `event`   | `string`                                                     |
| `options` | [`NextEventOptions`](/v9/generated/interfaces/accessibility.NextEventOptions.md) |

#### 返回值

`Promise`<`android.view.accessibility.AccessibilityEvent`>

***

### nextEventOrNull

▸ **nextEventOrNull**(`event`, `options?`): `Promise`<`android.view.accessibility.AccessibilityEvent` | `null`>

#### 参数

| 名称      | 类型                                                         |
| :-------- | :----------------------------------------------------------- |
| `event`   | `string`                                                     |
| `options` | [`NextEventOptions`](/v9/generated/interfaces/accessibility.NextEventOptions.md) |

#### 返回值

`Promise`<`android.view.accessibility.AccessibilityEvent` | `null`>

***

### openNotifications

▸ **openNotifications**(): `boolean`

拉出通知栏。

#### 返回值

`boolean`

是否成功。

***

### openQuickSettings

▸ **openQuickSettings**(): `boolean`

显示快速设置(下拉通知栏到底)。

#### 返回值

`boolean`

是否成功。

***

### performGesture

▸ **performGesture**(`points`, `duration`, `delay?`): `Promise`<`boolean`>

模拟手势。依次滑动多个点的折线路径，可通过大量点来模拟曲线。

#### 参数

| 名称       | 类型                                                         | 默认值      | 描述                     |
| :--------- | :----------------------------------------------------------- | :---------- | :----------------------- |
| `points`   | [`Point`](/v9/generated/interfaces/accessibility.Point.md)\[] | `undefined` | 路径，由点的数组构成。   |
| `duration` | `number`                                                     | `undefined` | 滑动时长，单位毫秒。     |
| `delay`    | `number`                                                     | `0`         | 滑动开始延迟，单位毫秒。 |

#### 返回值

`Promise`<`boolean`>

返回是否运行成功的Promise。

***

### performGestures

▸ **performGestures**(`gestures`): `Promise`<`boolean`>

同时模拟多个手势。

#### 参数

| 名称       | 类型                                                         | 描述       |
| :--------- | :----------------------------------------------------------- | :--------- |
| `gestures` | [`StrokeDescription`](/v9/generated/classes/accessibility.StrokeDescription.md)\[] | 手势数组。 |

#### 返回值

`Promise`<`boolean`>

***

### performGlobalAction

▸ **performGlobalAction**(`action`): `boolean`

模拟全局按键。

#### 参数

| 名称     | 类型                      | 描述           |
| :------- | :------------------------ | :------------- |
| `action` | `number` | `GlobalAction` | 全局按键类型。 |

#### 返回值

`boolean`

是否成功。

***

### press

▸ **press**(`x`, `y`, `duration`): `Promise`<`boolean`>

按住屏幕指定位置一段时间。

#### 参数

| 名称       | 类型     | 描述               |
| :--------- | :------- | :----------------- |
| `x`        | `number` | X坐标              |
| `y`        | `number` | Y坐标              |
| `duration` | `number` | 按住时长，单位毫秒 |

#### 返回值

`Promise`<`boolean`>

返回是否运行成功的Promise。运行完成时触发。

***

### scrollBackward

▸ **scrollBackward**(`index?`): `Promise`<`boolean`>

向上或向左滑动

#### 参数

| 名称     | 类型     | 描述                          |
| :------- | :------- | :---------------------------- |
| `index?` | `number` | 滑动第几个可滑动布局。从0开始 |

#### 返回值

`Promise`<`boolean`>

是否成功的Promise

***

### scrollForward

▸ **scrollForward**(`index?`): `Promise`<`boolean`>

向下或向右滑动

#### 参数

| 名称     | 类型     | 描述                          |
| :------- | :------- | :---------------------------- |
| `index?` | `number` | 滑动第几个可滑动布局。从0开始 |

#### 返回值

`Promise`<`boolean`>

是否成功的Promise

***

### select

▸ **select**(`query?`): [`UiSelector`](/v9/generated/classes/ui_selector.UiSelector.md)

UI选择。

#### 参数

| 名称     | 类型                                                         | 描述     |
| :------- | :----------------------------------------------------------- | :------- |
| `query?` | [`SelectorQuery`](/v9/generated/interfaces/ui_selector.SelectorQuery.md) | 筛选条件 |

#### 返回值

[`UiSelector`](/v9/generated/classes/ui_selector.UiSelector.md)

Ui选择器

***

### sendKeyCodeHeadsethook

▸ **sendKeyCodeHeadsethook**(): `boolean`

模拟回车键。需要安卓12或以上。

#### 返回值

`boolean`

是否成功。

***

### setText

▸ **setText**(`text`, `index?`): `Promise`<`boolean`>

设置文本

#### 参数

| 名称    | 类型     | 默认值      | 描述                              |
| :------ | :------- | :---------- | :-------------------------------- |
| `text`  | `string` | `undefined` | 设置的文本内容                    |
| `index` | `number` | `0`         | 输入至屏幕中第几个输入框，从0开始 |

#### 返回值

`Promise`<`boolean`>

是否成功的Promise

***

### showLauncherAllApps

▸ **showLauncherAllApps**(): `boolean`

显示已安装的全部应用。需要安卓12或以上。

#### 返回值

`boolean`

是否成功。

***

### swipe

▸ **swipe**(`x1`, `y1`, `x2`, `y2`, `duration`): `Promise`<`boolean`>

直线滑动。

#### 参数

| 名称       | 类型     | 描述               |
| :--------- | :------- | :----------------- |
| `x1`       | `number` | 起点X坐标          |
| `y1`       | `number` | 起点Y坐标          |
| `x2`       | `number` | 终点X坐标          |
| `y2`       | `number` | 终点Y坐标          |
| `duration` | `number` | 滑动时长，单位毫秒 |

#### 返回值

`Promise`<`boolean`>

返回是否运行成功的Promise。运行完成时触发。

***

### takeScreenshot

▸ **takeScreenshot**(`displayId?`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

截屏。需要安卓11或以上。

#### 参数

| 名称        | 类型     | 默认值 | 描述     |
| :---------- | :------- | :----- | :------- |
| `displayId` | `number` | `0`    | 屏幕ID。 |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回截屏图片的Promise。

***

### togglePowerDialog

▸ **togglePowerDialog**(): `boolean`

显示电源设置。

#### 返回值

`boolean`

是否成功。

***

### toggleRecents

▸ **toggleRecents**(): `boolean`

模拟最近任务键

#### 返回值

`boolean`

是否成功。

***

### toggleSplitScreen

▸ **toggleSplitScreen**(): `boolean`

分屏。

#### 返回值

`boolean`

是否成功。需要安卓7.0或以上。

***

### triggerAccessibilityButton

▸ **triggerAccessibilityButton**(): `boolean`

触发辅助功能键。需要安卓12或以上。

#### 返回值

`boolean`

是否成功。

***

### triggerAccessibilityShortcut

▸ **triggerAccessibilityShortcut**(): `boolean`

触发辅助功能快捷键。需要安卓12或以上。

#### 返回值

`boolean`

是否成功。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/app.md'
description: >-
  Auto.js Pro app 模块 API 文档 - 提供与其他应用交互的功能，包括启动应用、发送意图、打开文件、发送邮件、广播接收等。支持启动
  Activity、发送广播等高级功能。
---
# app - 应用
app模块提供一系列函数，用于使用其他应用、与其他应用交互。例如发送意图、打开文件、发送邮件等。

同时提供了方便的进阶函数startActivity和sendBroadcast，用他们可完成app模块没有内置的和其他应用的交互。

要导入此模块，请使用语句`const app = require('app');`，或者导入本模块的部分函数、属性`const { startActivity, packageName } = require('app');`。

## 目录

### 接口

* [BroadcastReceiver](/v9/generated/interfaces/app.BroadcastReceiver.md)
* [EmailOptions](/v9/generated/interfaces/app.EmailOptions.md)
* [IntentOptions](/v9/generated/interfaces/app.IntentOptions.md)
* [IntentOptionsWithRoot](/v9/generated/interfaces/app.IntentOptionsWithRoot.md)
* [PMOptions](/v9/generated/interfaces/app.PMOptions.md)

### 变量

* [packageName](/v9/generated/modules/app.md#packagename)

### 函数

* [editFile](/v9/generated/modules/app.md#editfile)
* [getApkInfo](/v9/generated/modules/app.md#getapkinfo)
* [getAppName](/v9/generated/modules/app.md#getappname)
* [getInstalledApps](/v9/generated/modules/app.md#getinstalledapps)
* [getInstalledPackages](/v9/generated/modules/app.md#getinstalledpackages)
* [getPackageName](/v9/generated/modules/app.md#getpackagename)
* [getUriForFile](/v9/generated/modules/app.md#geturiforfile)
* [intentToShell](/v9/generated/modules/app.md#intenttoshell)
* [launch](/v9/generated/modules/app.md#launch)
* [launchApp](/v9/generated/modules/app.md#launchapp)
* [makeIntent](/v9/generated/modules/app.md#makeintent)
* [openAppSettings](/v9/generated/modules/app.md#openappsettings)
* [openUrl](/v9/generated/modules/app.md#openurl)
* [parseUri](/v9/generated/modules/app.md#parseuri)
* [registerBroadcastReceiver](/v9/generated/modules/app.md#registerbroadcastreceiver)
* [sendBroadcast](/v9/generated/modules/app.md#sendbroadcast)
* [sendEmail](/v9/generated/modules/app.md#sendemail)
* [startActivity](/v9/generated/modules/app.md#startactivity)
* [startService](/v9/generated/modules/app.md#startservice)
* [uninstall](/v9/generated/modules/app.md#uninstall)
* [unregisterBroadcastReceiver](/v9/generated/modules/app.md#unregisterbroadcastreceiver)
* [viewFile](/v9/generated/modules/app.md#viewfile)

## 变量

### packageName

• `Const` **packageName**: `any`

当前应用的包名。

在Auto.js Pro中运行为`org.autojs.autojspro`，在打包应用中运行为打包应用的包名。

**`示例`**

```javascript
"nodejs";
const { packageName } = require("app");
console.log(packageName);
```

## 函数

### editFile

▸ **editFile**(`file`): `void`

用其他应用编辑文件。文件不存在的情况由编辑文件的应用处理。 如果找不出可以编辑该文件的应用，则抛出`ActivityNotException`。

**`示例`**

```javascript
"nodejs";
const app = require("app");
app.editFile("/sdcard/1.txt/");
```

#### 参数

| 名称   | 类型     | 描述     |
| :----- | :------- | :------- |
| `file` | `string` | 文件路径 |

#### 返回值

`void`

***

### getApkInfo

▸ **getApkInfo**(`file`, `options?`): `android.content.pm.PackageInfo` | `null`

解析apk文件并返回包信息。

**`参见`**

\[PackageManager.getPackageArchiveInfo]\(https://developer.android.google.cn/reference/android/content/pm/PackageManager#getPackageArchiveInfo(java.lang.String, int))

**`示例`**

```javascript
"nodejs";
const app = require("app");
const info = app.getApkInfo("/path/to/apk", {
   get: ['meta_data'],
});
console.log(info.packageName);
```

#### 参数

| 名称       | 类型                                                         | 描述     |
| :--------- | :----------------------------------------------------------- | :------- |
| `file`     | `string`                                                     | 文件路径 |
| `options?` | [`PMOptions`](/v9/generated/interfaces/app.PMOptions.md) | 过滤选项 |

#### 返回值

`android.content.pm.PackageInfo` | `null`

包信息，若apk无法解析，返回null

***

### getAppName

▸ **getAppName**(`packageName`): `string` | `null`

获取应用包名对应的已安装的应用的名称。如果该找不到该应用，返回null。

#### 参数

| 名称          | 类型     | 描述     |
| :------------ | :------- | :------- |
| `packageName` | `string` | 应用包名 |

#### 返回值

`string` | `null`

应用名称，或者null

***

### getInstalledApps

▸ **getInstalledApps**(`options?`): `android.content.pm.ApplicationInfo`\[]

获取安装的应用列表。

返回值是ApplicationInfo对象的数组。 如果没有安装任何应用，则返回一个空数组。

选项options的match选项用于指定要返回哪些应用程序，get选项用于指定返回的应用程序携带哪些信息。

**`示例`**

```javascript
"nodejs";
const app = require("app");
const apps = app.getInstalledApps({
    get: ['meta_data'],
    match: ['system_only']
});
console.log(apps);
```

**`参见`**

[PackageManager.getInstalledApplication](https://developer.android.google.cn/reference/android/content/pm/PackageManager#getInstalledApplications\(int\))

#### 参数

| 名称       | 类型                                                         | 描述     |
| :--------- | :----------------------------------------------------------- | :------- |
| `options?` | [`PMOptions`](/v9/generated/interfaces/app.PMOptions.md) | 过滤选项 |

#### 返回值

`android.content.pm.ApplicationInfo`\[]

为当前用户安装的所有应用程序包的列表。如果设置了match选项 `uninstalled_packages`，则包括被删除但保留了数据的应用程序。

***

### getInstalledPackages

▸ **getInstalledPackages**(`options?`): `android.content.pm.PackageInfo`\[]

获取安装的应用列表。

**`参见`**

[PackageManager.getInstalledPackages](https://developer.android.google.cn/reference/android/content/pm/PackageManager#getInstalledPackages\(int\))

#### 参数

| 名称       | 类型                                                         | 描述     |
| :--------- | :----------------------------------------------------------- | :------- |
| `options?` | [`PMOptions`](/v9/generated/interfaces/app.PMOptions.md) | 过滤选项 |

#### 返回值

`android.content.pm.PackageInfo`\[]

PackageInfo对象的数组。 如果没有安装任何应用，则返回一个空数组。

***

### getPackageName

▸ **getPackageName**(`targetAppName`): `string` | `null`

获取应用名称对应的已安装的应用的包名。如果该找不到该应用，返回null；如果该名称对应多个应用，则只返回其中某一个的包名。

#### 参数

| 名称            | 类型     | 描述     |
| :-------------- | :------- | :------- |
| `targetAppName` | `string` | 应用名称 |

#### 返回值

`string` | `null`

名称对应的包名，或者null

***

### getUriForFile

▸ **getUriForFile**(`pathOrUri`): `android.net.Uri`

从一个文件路径创建一个uri对象在高版本Android上，由于系统限制直接在Uri暴露文件的绝对路径，因此返回的Uri会是诸如`content://...`的形式。

#### 参数

| 名称        | 类型     | 描述                                                         |
| :---------- | :------- | :----------------------------------------------------------- |
| `pathOrUri` | `string` | 文件路径或文件uri，比如"/sdcard/1.txt"或"file:///sdcard/1.txt" |

#### 返回值

`android.net.Uri`

文件uri，可作为Intent的data属性

***

### intentToShell

▸ **intentToShell**(`options`): `string`

根据选项构造一个Intent，转换为对应的shell的intent命令的参数。

**`参见`**

[adb am](https://developer.android.google.cn/studio/command-line/adb#am)

**`示例`**

```javascript
"nodejs";
const { intentToShell } = require("app");
const { exec } = require("shell");
exec("am start " + intentToShell({
    packageName: "org.autojs.autojs",
    className: "org.autojs.autojs.ui.settings.SettingsActivity_"
}), { root: true});
```

#### 参数

| 名称      | 类型                                                         | 描述       |
| :-------- | :----------------------------------------------------------- | :--------- |
| `options` | [`IntentOptions`](/v9/generated/interfaces/app.IntentOptions.md) | Intent选项 |

#### 返回值

`string`

对应的shell的intent命令的参数

***

### launch

▸ **launch**(`packageName`): `boolean`

通过应用包名启动应用。如果该包名对应的应用不存在，则返回false；否则返回true。

\*\*注意！\*\*在高版本Android或部分系统上，会限制通过后台启动应用，也即在后台的情况下即使返回true，也可能没有实际启动该应用。

**`参见`**

[Restrictions on starting activities from the background](https://developer.android.google.cn/guide/components/activities/background-starts)

#### 参数

| 名称          | 类型     | 描述             |
| :------------ | :------- | :--------------- |
| `packageName` | `string` | 要启动的应用包名 |

#### 返回值

`boolean`

是否找到该应用，并不返回是否真正启动成功

***

### launchApp

▸ **launchApp**(`targetAppName`): `boolean`

通过应用名称启动应用。如果该名称对应的应用不存在，则返回false；否则返回true。如果该名称对应多个应用，将随机启动其中一个。

\*\*注意！\*\*在高版本Android或部分系统上，会限制通过后台启动应用，也即在后台的情况下即使返回true，也可能没有实际启动该应用。

**`参见`**

[Restrictions on starting activities from the background](https://developer.android.google.cn/guide/components/activities/background-starts)

#### 参数

| 名称            | 类型     | 描述             |
| :-------------- | :------- | :--------------- |
| `targetAppName` | `string` | 要启动的应用名称 |

#### 返回值

`boolean`

是否找到该应用，并不返回是否真正启动成功

***

### makeIntent

▸ **makeIntent**(`options`): `any`

根据Intent选项构造一个新的Intent。

Intent(意图) 是一个消息传递对象，您可以使用它从其他应用组件请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：

* 启动活动(Activity)： Activity 表示应用中的一个"屏幕"。例如应用主入口都是一个Activity，应用的功能通常也以Activity的形式独立，例如微信的主界面、朋友圈、聊天窗口都是不同的Activity。通过将 Intent 传递给 startActivity()，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据。
* 启动服务(Service)： Service 是一个不使用用户界面而在后台执行操作的组件。通过将 Intent 传递给 startService()，您可以启动服务执行一次性操作（例如，下载文件）。Intent 描述了要启动的服务，并携带了任何必要的数据。
* 传递广播： 广播是任何应用均可接收的消息。系统将针对系统事件（例如：系统启动或设备开始充电时）传递各种广播。通过将 Intent 传递给 sendBroadcast()、sendOrderedBroadcast() 或 sendStickyBroadcast()，您可以将广播传递给其他应用。

需要注意的是，除非应用专门暴露Activity出来，否则在没有root权限的情况下使用intent是无法跳转到特定Activity、应用的特定界面的。例如我们能通过Intent跳转到QQ的分享界面，是因为QQ对外暴露了分享的Activity；而在没有root权限的情况下，我们无法通过intent跳转到QQ的设置界面，因为QQ并没有暴露这个Activity。 但如果有root权限，则在intent的参数加上`"root": true`即可。例如使用root权限跳转到Auto.js的设置界面为：

```text
"nodejs";
const { startActivity } = require("app");
startActivity({
    packageName: "org.autojs.autojspro",
    className: "org.autojs.autojs.ui.settings.SettingsActivity",
    root: true
});
```

**`示例`**

```javascript
"nodejs"; 
const app = require("app");
const i = app.makeIntent({
    action: "VIEW",
    type: "image/png",
    data: "file:///sdcard/1.png"
});
$autojs.androidContext.startActivity(i);
```

#### 参数

| 名称      | 类型                                                         | 描述             |
| :-------- | :----------------------------------------------------------- | :--------------- |
| `options` | [`IntentOptions`](/v9/generated/interfaces/app.IntentOptions.md) | 构建Intent的选项 |

#### 返回值

`any`

新的Intent对象

***

### openAppSettings

▸ **openAppSettings**(`packageName`): `boolean`

打开应用的详情页(设置页)。如果找不到该应用，返回false; 否则返回true。

#### 参数

| 名称          | 类型     | 描述 |
| :------------ | :------- | :--- |
| `packageName` | `string` | 包名 |

#### 返回值

`boolean`

是否成功打开应用设置页

***

### openUrl

▸ **openUrl**(`url`): `void`

用浏览器打开网站url。 如果没有安装浏览器应用，则抛出`ActivityNotException`。

#### 参数

| 名称  | 类型     | 描述                                         |
| :---- | :------- | :------------------------------------------- |
| `url` | `string` | 网站的Url，需要以"http://"或"https://"开头。 |

#### 返回值

`void`

***

### parseUri

▸ **parseUri**(`uri`): `android.net.Uri`

解析uri字符串并返回相应的Uri对象。即使Uri格式错误，该函数也会返回一个Uri对象，但之后如果访问该对象的scheme, path等值可能因解析失败而返回`null`。

在高版本Android上，由于系统限制直接在Uri暴露文件的绝对路径，因此如果uri字符串是文件`file://...`，返回的Uri会是诸如`content://...`的形式。

#### 参数

| 名称  | 类型  | 描述                                    |
| :---- | :---- | :-------------------------------------- |
| `uri` | `any` | uri字符串或uri对象，后者直接返回uri自身 |

#### 返回值

`android.net.Uri`

解析后的Uri对象

***

### registerBroadcastReceiver

▸ **registerBroadcastReceiver**(`filter`): [`BroadcastReceiver`](/v9/generated/interfaces/app.BroadcastReceiver.md)

注册一个广播接收器，用于接收系统或应用发送的广播。广播接收器可以监听系统事件（如屏幕开启、网络状态变化等）或其他应用发送的自定义广播。

**`示例`**

```javascript
"nodejs";
const { registerBroadcastReceiver, unregisterBroadcastReceiver } = require("app");

// 注册广播接收器，监听屏幕开启事件
const receiver = registerBroadcastReceiver("android.intent.action.SCREEN_ON");

receiver.on("receive", (intent) => {
    console.log("屏幕已开启");
    console.log("Intent action:", intent.getAction());
});

// 使用完毕后注销接收器
// unregisterBroadcastReceiver(receiver);
```

**`示例`**

```javascript
"nodejs";
const { registerBroadcastReceiver } = require("app");

// 监听多个广播事件
const receiver = registerBroadcastReceiver([
    "android.intent.action.SCREEN_ON",
    "android.intent.action.SCREEN_OFF"
]);

receiver.on("receive", (intent) => {
    const action = intent.getAction();
    if (action === "android.intent.action.SCREEN_ON") {
        console.log("屏幕开启");
    } else if (action === "android.intent.action.SCREEN_OFF") {
        console.log("屏幕关闭");
    }
});
```

#### 参数

| 名称     | 类型                                                         | 描述                                                         |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `filter` | `string` | `string[]` | `android.content.IntentFilter` | 广播过滤器。可以是单个 action 字符串、action 字符串数组，或 IntentFilter 对象。例如 `"android.intent.action.SCREEN_ON"` 或 `["android.intent.action.SCREEN_ON", "android.intent.action.SCREEN_OFF"]` |

#### 返回值

[`BroadcastReceiver`](/v9/generated/interfaces/app.BroadcastReceiver.md)

返回一个 BroadcastReceiver 对象，可以通过 `on("receive", listener)` 监听接收到的广播。使用完毕后应调用 `unregisterBroadcastReceiver()` 注销接收器以释放资源。

***

### sendBroadcast

▸ **sendBroadcast**(`target`): `Promise`<`void`>

根据选项构造一个Intent，并发送该广播。

**`参见`**

[makeIntent](/v9/generated/modules/app.md#makeintent)

#### 参数

| 名称     | 类型                                                         | 描述                                                         |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `target` | [`IntentOptionsWithRoot`](/v9/generated/interfaces/app.IntentOptionsWithRoot.md) | 目标广播的名称或者根据Intent选项构造的广播 Intent。若target为字符串，则： \* `inspect_layout_hierarchy` 布局层次分析 \* `inspect_layout_bounds` 布局范围分析 但是这些广播在打包后应用中不可用。 |

#### 返回值

`Promise`<`void`>

Promise，如果是使用root权限，则会等待执行shell命令后返回；如果不是使用root权限，则会直接返回。

***

### sendEmail

▸ **sendEmail**(`options`): `void`

启用发送邮件的应用。如果没有安装邮箱应用，则抛出`ActivityNotException`。

#### 参数

| 名称      | 类型                                                         | 描述         |
| :-------- | :----------------------------------------------------------- | :----------- |
| `options` | [`EmailOptions`](/v9/generated/interfaces/app.EmailOptions.md) | 邮件发送选项 |

#### 返回值

`void`

***

### startActivity

▸ **startActivity**(`target`): `Promise`<`void`>

根据选项构造一个Intent，并启动该Activity。

**`参见`**

[makeIntent](/v9/generated/modules/app.md#makeintent)

**`示例`**

```javascript
"nodejs";
const { startActivity } = require("app");
startActivity({
    action: "SEND",
    type: "text/plain",
    data: "file:///sdcard/1.txt"
});
```

#### 参数

| 名称     | 类型                                                         | 描述                                                         |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `target` | `"console"` | `"settings"` | [`IntentOptionsWithRoot`](/v9/generated/interfaces/app.IntentOptionsWithRoot.md) | 目标activity的名称或者根据Intent选项构造的Activity Intent。若target为字符串，则： \* console: 启动日志Activity \* settings: 启动设置Activity |

#### 返回值

`Promise`<`void`>

Promise，如果是使用root权限，则会等待执行shell命令后返回；如果不是使用root权限，则会直接返回。**不管如何，都不会等待Activity启动才返回。**

***

### startService

▸ **startService**(`target`): `Promise`<`void`>

根据选项构造一个Intent，并启动该服务。

**`参见`**

[makeIntent](/v9/generated/modules/app.md#makeintent)

#### 参数

| 名称     | 类型                                                         | 描述                     |
| :------- | :----------------------------------------------------------- | :----------------------- |
| `target` | [`IntentOptionsWithRoot`](/v9/generated/interfaces/app.IntentOptionsWithRoot.md) | 构造Service Intent的选项 |

#### 返回值

`Promise`<`void`>

Promise，如果是使用root权限，则会等待执行shell命令后返回；如果不是使用root权限，则会直接返回。**不管如何，都不会等待Service启动才返回。**

***

### uninstall

▸ **uninstall**(`packageName`): `void`

卸载应用。执行后会会弹出卸载应用的提示框。如果该包名的应用未安装，由应用卸载程序处理，可能弹出"未找到应用"的提示。

#### 参数

| 名称          | 类型     | 描述 |
| :------------ | :------- | :--- |
| `packageName` | `string` | 包名 |

#### 返回值

`void`

***

### unregisterBroadcastReceiver

▸ **unregisterBroadcastReceiver**(`receiver`): `void`

注销之前注册的广播接收器。注销后，该接收器将不再接收任何广播。建议在不使用接收器时及时注销以释放资源。

**`示例`**

```javascript
"nodejs";
const { registerBroadcastReceiver, unregisterBroadcastReceiver } = require("app");

const receiver = registerBroadcastReceiver("android.intent.action.SCREEN_ON");

receiver.on("receive", (intent) => {
    console.log("收到广播");
});

// 10 秒后注销接收器
setTimeout(() => {
    unregisterBroadcastReceiver(receiver);
    console.log("广播接收器已注销");
}, 10000);
```

#### 参数

| 名称       | 类型                                                         | 描述                     |
| :--------- | :----------------------------------------------------------- | :----------------------- |
| `receiver` | [`BroadcastReceiver`](/v9/generated/interfaces/app.BroadcastReceiver.md) | 要注销的 BroadcastReceiver 对象，由 `registerBroadcastReceiver()` 返回 |

#### 返回值

`void`

***

### viewFile

▸ **viewFile**(`file`): `void`

用其他应用查看文件。文件不存在的情况由查看文件的应用处理。 如果找不出可以查看该文件的应用，则抛出`ActivityNotException`。

```text
"nodejs";
const app = require("app");
app.viewFile("/sdcard/1.txt");
```

#### 参数

| 名称   | 类型     | 描述     |
| :----- | :------- | :------- |
| `file` | `string` | 文件路径 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/axios.md'
---
# axios - http请求
Axios 是一个基于 promise 网络请求库，作用于node.js和浏览器中。它提供了http请求的方便封装。

Auto.js Pro内置了该模块的1.1.3版本（在Pro 9.2及以前是0.21.1版本），你无需安装即可使用axios。当然你也可以自行安装axios的其他版本，不用担心和内置版本会有冲突。

提示

[Axios官方中文文档](https://axios-http.com/zh/docs/example)

```javascript
"nodejs";
const axios = require('axios');

async function main() {
    // 向给定ID的用户发起请求
    try {
        const res = await axios.get('https://www.baidu.com');
        console.log(res);
    } catch (e) {
        console.error(e);
    }
}

main();
```

请查阅[axios官方中文文档](https://axios-http.com/zh/docs/example)获得更多的API介绍和实例。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/clip_manager.md'
---
# clip_manager - 剪贴板
剪贴板模块，用于获取、设置剪贴板内容。**在Android 10以上，由于系统限制，在后台无法访问、监听剪贴板。**

**`参见`**

[Limited access to clipboard data](https://developer.android.google.cn/about/versions/10/privacy/changes#clipboard-data)

## 目录

### 接口

* [ClipboardManager](/v9/generated/interfaces/clip_manager.ClipboardManager.md)

### 变量

* [clipboardManager](#clipboardmanager)

### 函数

* [clearClip](#clearclip)
* [getClip](#getclip)
* [hasClip](#hasclip)
* [setClip](#setclip)

## 变量

### clipboardManager

• `Const` **clipboardManager**: [`ClipboardManager`](/v9/generated/interfaces/clip_manager.ClipboardManager.md)

剪贴板管理器。用于获取、设置、监听剪贴板内容。

**`参见`**

[ClipboardManager](/v9/generated/interfaces/clip_manager.ClipboardManager.md)

**`示例`**

```javascript
const { clipboardManager, getClip } = require('clip_manager');
clipboardManager.on("clip_changed", () => {
  console.log("clipboard changed:", getClip());
});
$autojs.keepRunning();
```

## 函数

### clearClip

▸ **clearClip**(): `void`

清除剪贴板内容。

**`示例`**

```javascript
"nodejs";
const { clearClip } = require('clip_manager');
clearClip();
```

#### 返回值

`void`

***

### getClip

▸ **getClip**(): `string` | `null`

获取剪贴板内容。

**`示例`**

```javascript
"nodejs";
const { getClip } = require('clip_manager');
console.log(getClip());
```

#### 返回值

`string` | `null`

文本内容。

***

### hasClip

▸ **hasClip**(): `boolean`

判断剪贴板是否有内容。

**`示例`**

```javascript
"nodejs";
const { hasClip } = require('clip_manager');
console.log(hasClip());
```

#### 返回值

`boolean`

如果有内容，返回true，否则返回false。

***

### setClip

▸ **setClip**(`text`): `void`

设置剪贴板内容。

**`示例`**

```javascript
"nodejs";
const { setClip } = require('clip_manager');
setClip('Hello World!');
```

#### 参数

| 名称   | 类型     | 描述     |
| :----- | :------- | :------- |
| `text` | `string` | 文本内容 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/color.md'
---
# color - 颜色
color模块包含了颜色相关的类，最常用的是Color类，表示ARGB颜色。

**`参见`**

[Color](/v9/generated/classes/color.Color.md)

## 目录

### 类

* [Color](/v9/generated/classes/color.Color.md)
* [HSLColor](/v9/generated/classes/color.HSLColor.md)
* [HSVColor](/v9/generated/classes/color.HSVColor.md)

### 接口

* [CompareColorOptions](/v9/generated/interfaces/color.CompareColorOptions.md)

### 函数

* [toColorInt](/v9/generated/modules/color.md#tocolorint)

## 函数

### toColorInt

▸ **toColorInt**(`number`): `number`

转换整数number为颜色整数。该函数实际上是将大于int32最大值的数字转换为负数，例如将0xFFFFFFFF转换为-1。

#### 参数

| 名称     | 类型     | 描述 |
| :------- | :------- | :--- |
| `number` | `number` | 整数 |

#### 返回值

`number` 颜色整数

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/datastore.md'
---
# datastore - 本地储存
datastore即本地存储，采用key-value形式存储，类似于第一代API中的`storages`模块，并增加了异步读取、数据加密、自定义序列化的功能。

datastore支持`number`、`boolean`、`string`、`Array`、`Object`、`null`、`undefined`等可转换为json的数据类型。

datastore保存的数据除非应用被卸载或者被主动删除，否则会一直保留。

不同应用的数据是隔离的，也即在Auto.js Pro本体和打包的应用中的数据并不互通；同一应用的不同脚本的数据是共享的，在datastore不加密的情况下，任何脚本只要知道datastore名称便可以获取到相应的数据。

若要保存稍微敏感的数据，可以在创建datastore时指定`encryptionKey`对本地存储进行加密。但是需要注意，其他人可能通过你的代码获取密钥并解密数据，保存在客户端的数据相对是不安全的。参见[encryptionKey](/v9/generated/interfaces/datastore.DatastoreOptions.md#encryptionkey)。

另外，datastore保存的数据和第一代API的`storages`并不互通，即使名称相同，它们之间的数据也不共享。

**`示例`**

```javascript
const { createDatastore } = require('datastore');
// 创建本地存储，其名称为example.test
const datastore = createDatastore('example.test');

async function main() {
    // 在本地存储中写入值
    await datastore.set('hello', 'world');
    // 从存储中获取值
    console.log('get hello:', await datastore.get('hello'));
    // 移除本地存储的值，并返回被移除的值
    console.log('remove hello:', await datastore.remove('hello'));
    // 检查是否包含某个key
    console.log('contains hello:', await datastore.contains('hello'));

    // 保存和读取复杂对象（对象必须是可转换为JSON的数据）
    await datastore.set('versions', { autojspro: process.versions.autojspro, nodejs: process.version })
    const versions = await datastore.get('versions');
    console.log('versions:', versions);

    // 清空本地存储
    await datastore.clear();
}

main().catch(console.error);
```

## 目录

### 接口

* [Datastore](/v9/generated/interfaces/datastore.Datastore.md)
* [DatastoreEditor](/v9/generated/interfaces/datastore.DatastoreEditor.md)
* [DatastoreOptions](/v9/generated/interfaces/datastore.DatastoreOptions.md)
* [Serializer](/v9/generated/interfaces/datastore.Serializer.md)

### 函数

* [createDatastore](/v9/generated/modules/datastore.md#createdatastore)

## 函数

### createDatastore

▸ **createDatastore**(`name`, `options?`): [`Datastore`](/v9/generated/interfaces/datastore.Datastore.md)

创建一个本地存储。不同名称的本地存储的数据是隔开的，而相同名称的本地存储的数据是共享的。

若本地存储已加密，并且创建时未指定或指定了错误的密钥，则创建时也不会发生错误，在获取数据时可能获取到错误的数据或者抛出反序列化异常。

**`示例`**

```javascript
// 创建加密的本地存储，密钥为长度16, 32或64的字符串
const encrptedDatastore = createDatastore('example.encrypted', { encryptionKey: 'bCGwOgwzsCqXQFaW' });
async function main() {
    // 使用加密的本地存储保存数据
    await encrptedDatastore.set('timestamp', Date.now());
    // 从加密的本地存储中读取数据
    console.log('timestamp:', await encrptedDatastore.get('timestamp'));
}

main().catch(console.error);
```

#### 参数

| 名称       | 类型                                                         | 描述                     |
| :--------- | :----------------------------------------------------------- | :----------------------- |
| `name`     | `string`                                                     | 为创建的本地存储数据命名 |
| `options?` | [`DatastoreOptions`](/v9/generated/interfaces/datastore.DatastoreOptions.md) | 创建的本地存储的选项     |

#### 返回值

[`Datastore`](/v9/generated/interfaces/datastore.Datastore.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/device.md'
description: >-
  Auto.js Pro device 模块 API 文档 -
  提供设备信息获取和操作功能，包括设备宽高、内存使用率、设备ID、电池信息、屏幕亮度、音量控制、振动等设备相关操作。
---
# device - 设备
device模块提供了与设备有关的信息与操作，例如获取设备宽高，内存使用率，设备ID，调整设备亮度、音量等。

此模块的部分函数，需要"修改系统设置"的权限。如果没有该权限，会抛出异常。

此模块的主要功能文档在[Device](/v9/generated/classes/device.Device.md)和[OS](/v9/generated/classes/device.OS.md)这两个类中。

## 目录

### 枚举

* [BrightnessMode](/v9/generated/enums/device.BrightnessMode.md)

### 类

* [Device](/v9/generated/classes/device.Device.md)
* [OS](/v9/generated/classes/device.OS.md)

### 接口

* [AndroidVersion](/v9/generated/interfaces/device.AndroidVersion.md)
* [DisplayMetrics](/v9/generated/interfaces/device.DisplayMetrics.md)
* [MemoryInfo](/v9/generated/interfaces/device.MemoryInfo.md)
* [Product](/v9/generated/interfaces/device.Product.md)
* [StreamVolumeRange](/v9/generated/interfaces/device.StreamVolumeRange.md)

### 类型别名

* [PluggedType](/v9/generated/modules/device.md#pluggedtype)
* [StreamType](/v9/generated/modules/device.md#streamtype)

### 变量

* [device](/v9/generated/modules/device.md#device)

## 类型别名

### PluggedType

Ƭ **PluggedType**: `"usb"` | `"wireless"` | `"ac"`

***

### StreamType

Ƭ **StreamType**: `"music"` | `"alarm"` | `"notification"` | `"voice_call"` | `"system"` | `"ring"` | `"dtmf"` | `"accessibility"`

音量类型，包括：

* `music`: 音乐(媒体)音量
* `alarm`: 闹钟音量
* `notification`: 通知音量
* `ring`: 铃声音量
* `voice_call`: 通话音量
* `system`: 系统音量
* `dtmf`: DTMF音量
* `accessibility`: 辅助功能音量

## 变量

### device

• `Const` **device**: [`Device`](/v9/generated/classes/device.Device.md) = `Device.instance`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/dialogs.md'
description: >-
  Auto.js Pro dialogs 模块 API 文档 -
  提供对话框显示功能，支持确认框、输入框、单选框、多选框等。支持应用内弹窗和悬浮窗形式，可自定义对话框样式。
---
# dialogs - 对话框
dialogs模块用于显示弹框，一般用于提示用户关键信息、输入信息，完成简易的交互。

本模块提供了多种配置模式，能够以应用内弹窗或悬浮窗形式显示确认框、输入框、单选框、多选框等，也可以自定义弹出框显示的View。

可使用`const dialogs = require('dialogs');`导入dialogs模块。然后通过比如`dialogs.showInputDialog("输入框标题", "输入框默认文本");`的方式调用模块中的方法。

也可以直接导入要使用的函数，比如`const { showInputDialog } = require('dialogs'); showInputDialog("输入框标题", "输入框默认文本");`。

## 目录

### 接口

* [DialogExt](/v9/generated/interfaces/dialogs.DialogExt.md)
* [DialogProperties](/v9/generated/interfaces/dialogs.DialogProperties.md)

### 类型别名

* [Dialog](/v9/generated/modules/dialogs.md#dialog)
* [DialogType](/v9/generated/modules/dialogs.md#dialogtype)

### 变量

* [defaultDialogType](/v9/generated/modules/dialogs.md#defaultdialogtype)

### 函数

* [buildDialog](/v9/generated/modules/dialogs.md#builddialog)
* [setDefaultDialogType](/v9/generated/modules/dialogs.md#setdefaultdialogtype)
* [showAlertDialog](/v9/generated/modules/dialogs.md#showalertdialog)
* [showConfirmDialog](/v9/generated/modules/dialogs.md#showconfirmdialog)
* [showDialog](/v9/generated/modules/dialogs.md#showdialog)
* [showInputDialog](/v9/generated/modules/dialogs.md#showinputdialog)
* [showMultiChoiceDialog](/v9/generated/modules/dialogs.md#showmultichoicedialog)
* [showSelectDialog](/v9/generated/modules/dialogs.md#showselectdialog)
* [showSingleChoiceDialog](/v9/generated/modules/dialogs.md#showsinglechoicedialog)

## 类型别名

### Dialog

Ƭ **Dialog**: `android.app.Dialog` & [`DialogExt`](/v9/generated/interfaces/dialogs.DialogExt.md)

对话框类型，基于Android原生[Dialog类](https://developer.android.google.cn/reference/android/app/Dialog.html)拓展了一些方法和属性，参见[DialogExt](/v9/generated/interfaces/dialogs.DialogExt.md)。

***

### DialogType

Ƭ **DialogType**: `"overlay"` | `"app"`

弹出对话框的类型。

* `overlay`: 可显示在其他应用上方，需要悬浮窗权限。
* `app`: 应用内对话框，仅可在应用内的当前界面（Activity）显示，不需要额外权限。

## 变量

### defaultDialogType

• **defaultDialogType**: [`DialogType`](/v9/generated/modules/dialogs.md#dialogtype) = `'app'`

默认对话框类型，默认为`app`。可通过[setDefaultDialogType](/v9/generated/modules/dialogs.md#setdefaultdialogtype)函数修改。

**`参见`**

* [DialogProperties](/v9/generated/interfaces/dialogs.DialogProperties.md)
* [buildDialog](/v9/generated/modules/dialogs.md#builddialog)

## 函数

### buildDialog

▸ **buildDialog**(`properties`): `Promise`<[`Dialog`](/v9/generated/modules/dialogs.md#dialog)>

创建一个对话框。可自定义对话框的标题、内容、进度条、输入框、按钮等。

#### 参数

| 名称         | 类型                                                         | 描述                                                         |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `properties` | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<[`Dialog`](/v9/generated/modules/dialogs.md#dialog)>

Dialog对象的Promise

***

### setDefaultDialogType

▸ **setDefaultDialogType**(`type`): `void`

**`参见`**

[defaultDialogType](/v9/generated/modules/dialogs.md#defaultdialogtype)

#### 参数

| 名称   | 类型                                                         |
| :----- | :----------------------------------------------------------- |
| `type` | [`DialogType`](/v9/generated/modules/dialogs.md#dialogtype) |

#### 返回值

`void`

***

### showAlertDialog

▸ **showAlertDialog**(`title`, `properties?`): `Promise`<`void`>

显示一个提示对话框。提示对话框包括标题、内容和一个确认按钮。

**`示例`**

```javascript
"nodejs";
const { showAlertDialog } = require('dialogs');
async function alert() {
  await showAlertDialog("This is an alert dialog.");
  await showAlertDialog("Summary", { content: "Some description" });
}
alert();
```

#### 参数

| 名称          | 类型                                                         | 描述                                                         |
| :------------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `title`       | `string`                                                     | 对话框的标题。                                               |
| `properties?` | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<`void`>

可通过await等待弹出框消失。

***

### showConfirmDialog

▸ **showConfirmDialog**(`title`, `properties?`): `Promise`<`boolean`>

显示一个确认对话框，包括一个确认按钮和一个取消按钮。

**`示例`**

```javascript
"nodejs";
const dialogs = require('dialogs');
async function confirm() {
  const sure = await dialogs.showConfirmDialog("Are you sure?");
  console.log(sure); // true or false
  console.log(await dialogs.showConfirmDialog("Are you sure?", { positive: "Yes", negative: "No" }));
}
confirm();
```

#### 参数

| 名称          | 类型                                                         | 描述                                                         |
| :------------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `title`       | `string`                                                     | 确认对话框的标题。                                           |
| `properties?` | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的额外配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<`boolean`>

可通过await获取弹出框选择结果。

***

### showDialog

▸ **showDialog**(`properties`): `Promise`<[`Dialog`](/v9/generated/modules/dialogs.md#dialog)>

创建并显示一个对话框。类似于[buildDialog](/v9/generated/modules/dialogs.md#builddialog)构建对话框，但是构建后直接显示而无需调用`show`。

#### 参数

| 名称         | 类型                                                         | 描述                                                         |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `properties` | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<[`Dialog`](/v9/generated/modules/dialogs.md#dialog)>

对话框对象的Promise

***

### showInputDialog

▸ **showInputDialog**(`title`, `prefill?`, `properties?`): `Promise`<`string` | `null`>

显示一个输入对话框。

**`示例`**

```javascript
"nodejs";
const dialogs = require('dialogs');
async function inputDialog() {
  const name = await dialogs.showInputDialog("Input your name", "Tony");
  if (name != "") {
      console.log(`hello, ${mName}`);
  }
}
inputDialog();
```

#### 参数

| 名称          | 类型                                                         | 描述                                                         |
| :------------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `title`       | `string`                                                     | 输入对话框的标题。                                           |
| `prefill?`    | `string`                                                     | 输入对话框的默认文本。                                       |
| `properties?` | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<`string` | `null`>

可通过await获取弹出输入框的输入结果。若用户取消了输入，则返回null的Promise。

***

### showMultiChoiceDialog

▸ **showMultiChoiceDialog**(`title`, `items`, `initialSelectedIndices?`, `properties?`): `Promise`<`number`\[] | `null`>

显示一个多选对话框。多选对话框包括标题和一个多选列表，用户选择列表项并确定后会返回点击的结果。

#### 参数

| 名称                      | 类型                                                         | 描述                                                         |
| :------------------------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `title`                   | `string`                                                     | 多选对话框的标题。                                           |
| `items`                   | `string`\[]                                                   | 多选框的选项。                                               |
| `initialSelectedIndices?` | `number`\[]                                                   | 默认选中的选项，比如`[0, 2]`表示选中第一项和第三项。         |
| `properties?`             | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<`number`\[] | `null`>

选中选项的索引的数组Promise，若用户取消了选择，则返回空数组。索引从0开始。

***

### showSelectDialog

▸ **showSelectDialog**(`title`, `items`, `properties?`): `Promise`<`number`>

显示一个选择对话框。选择对话框包括标题和一个选择列表，用户点击列表项后会返回点击的结果。

**`示例`**

```javascript
"nodejs";
const { showSelectDialog } = require('dialogs');
async function select() {
  const i = await showSelectDialog("Select an item", ["item1", "item2", "item3"]);
  console.log(`selected item: ${i}`);
}
select();
```

#### 参数

| 名称          | 类型                                                         | 描述                                                         |
| :------------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `title`       | `string`                                                     | 选择对话框的标题。                                           |
| `items`       | `string`\[]                                                   | 选择框的选项。                                               |
| `properties?` | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<`number`>

选择选项的索引的Promise，若用户取消了选择，则返回-1。索引从0开始。

***

### showSingleChoiceDialog

▸ **showSingleChoiceDialog**(`title`, `items`, `initialSelectedIndex?`, `properties?`): `Promise`<`number`>

显示一个单选对话框。单选对话框包括标题和一个单选列表，用户点击列表项并确定后会返回点击的结果。

**`示例`**

```javascript
"nodejs";
const { showSingleChoiceDialog } = require('dialogs');
async function singleChoice() {
  const i = await showSingleChoiceDialog("Choose an item", ["item1", "item2", "item3"]);
  console.log(`selected item: ${i}`);
}
singleChoice();
```

#### 参数

| 名称                    | 类型                                                         | 描述                                                         |
| :---------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `title`                 | `string`                                                     | 单选对话框的标题。                                           |
| `items`                 | `string`\[]                                                   | 单选框的选项。                                               |
| `initialSelectedIndex?` | `number`                                                     | 默认选中的`items`数组索引序。                                |
| `properties?`           | [`DialogProperties`](/v9/generated/interfaces/dialogs.DialogProperties.html) | 对话框的配置属性。参考 [DialogProperties](https://pro.autojs.org/docs/zh/v9/generated/interfaces/dialogs.DialogProperties.md) |

#### 返回值

`Promise`<`number`>

选择选项的索引的Promise，若用户取消了选择，则返回-1。索引从0开始。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/engines.md'
description: >-
  Auto.js Pro engines 模块 API 文档 -
  提供脚本引擎管理功能，包括获取自身引擎、运行参数、启动新引擎、控制其他引擎、引擎间通信等。支持多引擎并发执行。
---
# engines - 脚本引擎
engines模块提供了获取自身引擎、运行参数、运行配置的方法，以及获取其他引擎、启动新引擎、控制其他引擎、和其他引擎通信的功能。

## 目录

### 接口

* [EngineEventTarget](/v9/generated/interfaces/engines.EngineEventTarget.md)
* [ExecutionConfig](/v9/generated/interfaces/engines.ExecutionConfig.md)
* [ReadOnlyExecutionConfig](/v9/generated/interfaces/engines.ReadOnlyExecutionConfig.md)
* [ScriptEngine](/v9/generated/interfaces/engines.ScriptEngine.md)
* [ScriptExecution](/v9/generated/interfaces/engines.ScriptExecution.md)
* [SelfScriptEngine](/v9/generated/interfaces/engines.SelfScriptEngine.md)
* [StopAllOptions](/v9/generated/interfaces/engines.StopAllOptions.md)

### 函数

* [broadcast](/v9/generated/modules/engines.md#broadcast)
* [execScriptFile](/v9/generated/modules/engines.md#execscriptfile)
* [getRunningEngines](/v9/generated/modules/engines.md#getrunningengines)
* [myEngine](/v9/generated/modules/engines.md#myengine)
* [stopAll](/v9/generated/modules/engines.md#stopall)

## 函数

### broadcast

▸ **broadcast**(`event`, ...`args`): `void`

发送引擎间广播，相当于向所有引擎发送同一事件。

#### 参数

| 名称      | 类型     | 描述                                           |
| :-------- | :------- | :--------------------------------------------- |
| `event`   | `string` | 事件名称                                       |
| `...args` | `any`\[]  | 事件参数，必须是可序列化数据（可以转换为JSON） |

#### 返回值

`void`

***

### execScriptFile

▸ **execScriptFile**(`file`, `config?`): [`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

启动新引擎执行脚本或项目。执行的脚本上下文和环境将和当前执行无关，也无法共享变量。可以通过事件或广播在脚本间通信。

#### 参数

| 名称      | 类型                                                         | 描述           |
| :-------- | :----------------------------------------------------------- | :------------- |
| `file`    | `string`                                                     | 脚本或项目路径 |
| `config?` | [`ExecutionConfig`](/v9/generated/interfaces/engines.ExecutionConfig.md) | 运行配置       |

#### 返回值

[`ScriptExecution`](/v9/generated/interfaces/engines.ScriptExecution.md)

脚本执行对象，可以用来获取引擎状态、通信、控制引擎等

***

### getRunningEngines

▸ **getRunningEngines**(): [`ScriptEngine`](/v9/generated/interfaces/engines.ScriptEngine.md)\[]

获取当前正在运行的所有引擎。

#### 返回值

[`ScriptEngine`](/v9/generated/interfaces/engines.ScriptEngine.md)\[]

当前运行的引擎数组

***

### myEngine

▸ **myEngine**(): [`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

获取当前运行的自身引擎的对象。

#### 返回值

[`SelfScriptEngine`](/v9/generated/interfaces/engines.SelfScriptEngine.md)

***

### stopAll

▸ **stopAll**(`options?`): `void`

停止所有引擎运行。

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `options?` | [`StopAllOptions`](/v9/generated/interfaces/engines.StopAllOptions.md) |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/floating_window.md'
---
# floating_window - 悬浮窗
floating\_window模块提供显示悬浮窗，检查是否有悬浮窗权限等功能。

由于悬浮窗模块涉及UI交互，显示悬浮窗需要在UI线程中运行，因此需要在文件开始指定：

* `"ui-thread nodejs";`：仅悬浮窗，无UI页面Activity的情况
* `"ui nodejs";`：既有悬浮窗，又有UI页面Activity
* `"ui-thread";`：仅悬浮窗，无UI页面Activity，并且文件名本身用.node.js结尾
* `"ui";`：既有悬浮窗，又有UI页面Activity，并且文件名本身用.node.js结尾

**`示例`**

```javascript
"ui-thread nodejs";

const { createWindow } = require("floating_window");
const window = createWindow();
window.setViewFromXml(`
  <vertical bg="#ffffff">
      <text text="Node.js: ${process.version}" textColor="#aa0000" textSize="16" width="*"/>                
  </vertical>
`);
window.show();
$autojs.keepRunning();
```

## 目录

### 接口

* [CreateWindowOptions](/v9/generated/interfaces/floating_window.CreateWindowOptions.md)
* [DragGesture](/v9/generated/interfaces/floating_window.DragGesture.md)
* [DragGestureOptions](/v9/generated/interfaces/floating_window.DragGestureOptions.md)
* [FloatingWindow](/v9/generated/interfaces/floating_window.FloatingWindow.md)

### 类型别名

* [KeepToEdgeType](/v9/generated/modules/floating_window.md#keeptoedgetype)

### 变量

* [FLAG\_DIM\_BEHIND](/v9/generated/modules/floating_window.md#flag_dim_behind)
* [FLAG\_FULLSCREEN](/v9/generated/modules/floating_window.md#flag_fullscreen)
* [FLAG\_KEEP\_SCREEN\_ON](/v9/generated/modules/floating_window.md#flag_keep_screen_on)
* [FLAG\_LAYOUT\_IN\_SCREEN](/v9/generated/modules/floating_window.md#flag_layout_in_screen)
* [FLAG\_LAYOUT\_NO\_LIMITS](/v9/generated/modules/floating_window.md#flag_layout_no_limits)
* [FLAG\_NOT\_FOCUSABLE](/v9/generated/modules/floating_window.md#flag_not_focusable)
* [FLAG\_NOT\_TOUCHABLE](/v9/generated/modules/floating_window.md#flag_not_touchable)
* [FLAG\_SECURE](/v9/generated/modules/floating_window.md#flag_secure)
* [FLAG\_WATCH\_OUTSIDE\_TOUCH](/v9/generated/modules/floating_window.md#flag_watch_outside_touch)

### 函数

* [canDrawOverlays](/v9/generated/modules/floating_window.md#candrawoverlays)
* [createWindow](/v9/generated/modules/floating_window.md#createwindow)
* [manageDrawOverlays](/v9/generated/modules/floating_window.md#managedrawoverlays)

## 类型别名

### KeepToEdgeType

Ƭ **KeepToEdgeType**: `"bounce"` | `boolean`

是否自动贴边。如果为true，在拖拽结束时，悬浮窗会自动贴边；如果为bounce，则会跳跃多次后贴边，类似Auto.js Pro自带悬浮窗的弹性效果。

## 变量

### FLAG\_DIM\_BEHIND

• `Const` **FLAG\_DIM\_BEHIND**: `2`

Window flag: everything behind this window will be dimmed. Use [#dimAmount](/v9/generated/modules/floating_window.md) to control the amount of dim.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_DIM\_BEHIND

***

### FLAG\_FULLSCREEN

• `Const` **FLAG\_FULLSCREEN**: `1024`

Window flag: hide all screen decorations (such as the status bar) while this window is displayed. This allows the window to use the entire display space for itself -- the status bar will be hidden when an app window with this flag set is on the top layer. A fullscreen window will ignore a value of [#SOFT\_INPUT\_ADJUST\_RESIZE](/v9/generated/modules/floating_window.md) for the window's [#softInputMode](/v9/generated/modules/floating_window.md) field; the window will stay fullscreen and will not resize.

This flag can be controlled in your theme through the android.R.attr#windowFullscreen attribute; this attribute is automatically set for you in the standard fullscreen themes such as android.R.style#Theme\_NoTitleBar\_Fullscreen, android.R.style#Theme\_Black\_NoTitleBar\_Fullscreen, android.R.style#Theme\_Light\_NoTitleBar\_Fullscreen, android.R.style#Theme\_Holo\_NoActionBar\_Fullscreen, android.R.style#Theme\_Holo\_Light\_NoActionBar\_Fullscreen, android.R.style#Theme\_DeviceDefault\_NoActionBar\_Fullscreen, and android.R.style#Theme\_DeviceDefault\_Light\_NoActionBar\_Fullscreen.

**`Deprecated`**

Use WindowInsetsController#hide(int) with Type#statusBars() instead.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_FULLSCREEN

***

### FLAG\_KEEP\_SCREEN\_ON

• `Const` **FLAG\_KEEP\_SCREEN\_ON**: `128`

设置该标志让窗口显示时保持屏幕常亮。

Window flag: as long as this window is visible to the user, keep the device's screen turned on and bright.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_KEEP\_SCREEN\_ON

***

### FLAG\_LAYOUT\_IN\_SCREEN

• `Const` **FLAG\_LAYOUT\_IN\_SCREEN**: `256`

设置该标志让窗口保持在屏幕内显示。

Window flag for attached windows: Place the window within the entire screen, ignoring any constraints from the parent window.

Note: on displays that have a DisplayCutout, the window may be placed such that it avoids the DisplayCutout area if necessary according to the [#layoutInDisplayCutoutMode](/v9/generated/modules/floating_window.md).

***

### FLAG\_LAYOUT\_NO\_LIMITS

• `Const` **FLAG\_LAYOUT\_NO\_LIMITS**: `512`

设置该标志让窗口可超出屏幕范围。

Window flag: allow window to extend outside of the screen.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_LAYOUT\_NO\_LIMITS

***

### FLAG\_NOT\_FOCUSABLE

• `Const` **FLAG\_NOT\_FOCUSABLE**: `8`

设置该标志将让该窗口无法获得焦点。

Window flag: this window won't ever get key input focus, so the user can not send key or other button events to it. Those will instead go to whatever focusable window is behind it. This flag will also enable [#FLAG\_NOT\_TOUCH\_MODAL](/v9/generated/modules/floating_window.md) whether or not that is explicitly set.

Setting this flag also implies that the window will not need to interact with a soft input method, so it will be Z-ordered and positioned independently of any active input method (typically this means it gets Z-ordered on top of the input method, so it can use the full screen for its content and cover the input method if needed. You can use [#FLAG\_ALT\_FOCUSABLE\_IM](/v9/generated/modules/floating_window.md) to modify this behavior.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_NOT\_FOCUSABLE

***

### FLAG\_NOT\_TOUCHABLE

• `Const` **FLAG\_NOT\_TOUCHABLE**: `16`

设置该标志将让该窗口无法获得触摸事件，但在Android 12及以上因系统安全限制无效。

Window flag: this window can never receive touch events.

The intention of this flag is to leave the touch to be handled by some window below this window (in Z order).

Starting from Android Build.VERSION\_CODES#S, for security reasons, touch events that pass through windows containing this flag (ie. are within the bounds of the window) will only be delivered to the touch-consuming window if one (or more) of the items below are true:

* **Same UID**: This window belongs to the same UID that owns the touch-consuming window.
* **Trusted windows**: This window is trusted. Trusted windows include (but are not limited to) accessibility windows ([#TYPE\_ACCESSIBILITY\_OVERLAY](/v9/generated/modules/floating_window.md)), the IME ([#TYPE\_INPUT\_METHOD](/v9/generated/modules/floating_window.md)) and assistant windows (TYPE\_VOICE\_INTERACTION). Windows of type [#TYPE\_APPLICATION\_OVERLAY](/v9/generated/modules/floating_window.md) are **not** trusted, see below.
* **Invisible windows**: This window is View#GONE or View#INVISIBLE.
* **Fully transparent windows**: This window has LayoutParams#alpha equal to 0.
* **One SAW window with enough transparency**: This window is of type [#TYPE\_APPLICATION\_OVERLAY](/v9/generated/modules/floating_window.md), has LayoutParams#alpha below or equal to the [maximum obscuring opacity](/v9/generated/modules/floating_window.md#MaximumOpacity) (see below) and it's the **only** window of type [#TYPE\_APPLICATION\_OVERLAY](/v9/generated/modules/floating_window.md) from this UID in the touch path.
* **Multiple SAW windows with enough transparency**: The multiple overlapping [#TYPE\_APPLICATION\_OVERLAY](/v9/generated/modules/floating_window.md) windows in the touch path from this UID have a **combined obscuring opacity** below or equal to the [maximum obscuring opacity](/v9/generated/modules/floating_window.md#MaximumOpacity). See section [Combined obscuring opacity](/v9/generated/modules/floating_window.md#ObscuringOpacity) below on how to compute this value. If none of these cases hold, the touch will not be delivered and a message will be logged to logcat.

### Maximum obscuring opacity

This value is **0.8**. Apps that want to gather this value from the system rather than hard-coding it might want to use android.hardware.input.InputManager#getMaximumObscuringOpacityForTouch().

### Combined obscuring opacity

The **combined obscuring opacity** of a set of windows is obtained by combining the opacity values of all windows in the set using the associative and commutative operation defined as:

```
opacity({A,B}) = 1 - (1 - opacity(A))*(1 - opacity(B))
```

where {@code opacity(X)} is the LayoutParams#alpha of window X. So, for a set of windows {@code {W1, .., Wn}}, the combined obscuring opacity will be:

```
opacity({W1, .., Wn}) = 1 - (1 - opacity(W1)) * ... * (1 - opacity(Wn))
```

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_NOT\_TOUCHABLE

***

### FLAG\_SECURE

• `Const` **FLAG\_SECURE**: `8192`

设置该标志让窗口内容无法被截图、录屏。

Window flag: treat the content of the window as secure, preventing it from appearing in screenshots or from being viewed on non-secure displays.

See android.view.Display#FLAG\_SECURE for more details about secure surfaces and secure displays.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_SECURE

***

### FLAG\_WATCH\_OUTSIDE\_TOUCH

• `Const` **FLAG\_WATCH\_OUTSIDE\_TOUCH**: `262144`

设置该标志后，窗口将可在有窗口外部的触摸事件时收到ACTION\_OUTSIDE事件。

Window flag: if you have set [#FLAG\_NOT\_TOUCH\_MODAL](/v9/generated/modules/floating_window.md), you can set this flag to receive a single special MotionEvent with the action MotionEvent#ACTION\_OUTSIDE MotionEvent.ACTION\_OUTSIDE for touches that occur outside of your window. Note that you will not receive the full down/move/up gesture, only the location of the first down as an ACTION\_OUTSIDE.

**`参见`**

* [addFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#addflags)
* [removeFlags](/v9/generated/interfaces/floating_window.FloatingWindow.md#removeflags)
* https://developer.android.google.cn/reference/android/view/WindowManager.LayoutParams#FLAG\_WATCH\_OUTSIDE\_TOUCH

## 函数

### canDrawOverlays

▸ **canDrawOverlays**(): `boolean`

判断是否有悬浮窗权限。

#### 返回值

`boolean`

如果本应用有悬浮窗权限，则返回 `true`，否则返回 `false`

***

### createWindow

▸ **createWindow**(`options?`): [`FloatingWindow`](/v9/generated/interfaces/floating_window.FloatingWindow.md)

创建一个新悬浮窗，可指定悬浮窗的初始大小、位置等参数。

#### 参数

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `options?` | [`CreateWindowOptions`](/v9/generated/interfaces/floating_window.CreateWindowOptions.md) | 创建悬浮窗选项，参见[CreateWindowOptions](/v9/generated/interfaces/floating_window.CreateWindowOptions.md) |

#### 返回值

[`FloatingWindow`](/v9/generated/interfaces/floating_window.FloatingWindow.md)

***

### manageDrawOverlays

▸ **manageDrawOverlays**(): `void`

跳转到管理悬浮窗权限的页面。

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/globals._console_.md'
---
# Namespace: "console"
[globals](/v9/generated/modules/globals.md)."console"

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/globals.md'
---
# globals - 全局函数与变量
## 目录

### Namespaces

* ["console"](/v9/generated/modules/globals._console_.md)
* [NodeJS](/v9/generated/modules/globals.NodeJS.md)

### 接口

* [AutoJs](/v9/generated/interfaces/globals.AutoJs.md)
* [Console](/v9/generated/interfaces/globals.Console.md)
* [DefineClassOptions](/v9/generated/interfaces/globals.DefineClassOptions.md)
* [Java](/v9/generated/interfaces/globals.Java.md)

### 类型别名

* [JavaClass](/v9/generated/modules/globals.md#javaclass)
* [JavaObject](/v9/generated/modules/globals.md#javaobject)
* [ThreadMode](/v9/generated/modules/globals.md#threadmode)

### 变量

* [$autojs](/v9/generated/modules/globals.md#$autojs)
* [$java](/v9/generated/modules/globals.md#$java)

## 类型别名

### JavaClass

Ƭ **JavaClass**: `any`

***

### JavaObject

Ƭ **JavaObject**: `any`

***

### ThreadMode

Ƭ **ThreadMode**: `"ui"` | `"current"` | `"compute"` | `"io"`

线程模式，用于设置Java函数或对象所运行的线程。

* ui: UI线程
* io: IO线程，通常用于文件读写、网络请求等
* compute: 计算线程，通常用于计算密集型任务
* current: 当前线程

**`参见`**

[setThreadMode](/v9/generated/interfaces/globals.Java.md#setthreadmode)

## 变量

### $autojs

• `Const` **$autojs**: [`AutoJs`](/v9/generated/interfaces/globals.AutoJs.md)

全局变量$autojs，用于提供autojs环境的特殊API。比如是否是Auto.js打包后环境。

***

### $java

• `Const` **$java**: [`Java`](/v9/generated/interfaces/globals.Java.md)

全局变量，想当于`$autojs.java`。用于提供Java交互的API。这些API比较原始，建议使用封装后的java模块和rhino模块。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/globals.NodeJS.md'
---
# Namespace: NodeJS
## 目录

### 接口

* [ProcessVersions](/v9/generated/interfaces/globals.NodeJS.ProcessVersions.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/image.md'
description: >-
  Auto.js Pro image 模块 API 文档 - 提供图片读写、灰度化、剪切、缩放、旋转、模板匹配、特征检测、颜色查找等图像处理功能。支持
  OpenCV 集成，完整的图片处理解决方案。
---
# image - 图片处理
image 模块主要提供图片读写、灰度化、剪切、缩放、模板匹配等图像处理函数，其主要 API 在本页展示的函数以及 `Image` 类。

类似 Pro 8 中截图函数已迁移到 `media_projection` 模块。另外，要直接使用 opencv 相关函数和功能，参见 `@autojs/opencv` 模块。

## 目录

### 类

* [Image](/v9/generated/classes/image.Image.md)
* [ImageFeatures](/v9/generated/classes/image.ImageFeatures.md)
* [ImageFeaturesImpl](/v9/generated/classes/image.ImageFeaturesImpl.md)

### 枚举

* [FeatureDetectMethod](/v9/generated/enums/image.FeatureDetectMethod.md)
* [FeatureMatcher](/v9/generated/enums/image.FeatureMatcher.md)

### 接口

* [DetectAndComputeFeaturesOptions](/v9/generated/interfaces/image.DetectAndComputeFeaturesOptions.md)
* [FindColorOptions](/v9/generated/interfaces/image.FindColorOptions.md)
* [FindImageOptions](/v9/generated/interfaces/image.FindImageOptions.md)
* [MatchTemplateOptions](/v9/generated/interfaces/image.MatchTemplateOptions.md)
* [ColorPath](/v9/generated/interfaces/image.ColorPath.md)
* [OffsetColor](/v9/generated/interfaces/image.OffsetColor.md)
* [FeatureMatchingOptions](/v9/generated/interfaces/image.FeatureMatchingOptions.md)
* [ObjectFrame](/v9/generated/interfaces/image.ObjectFrame.md)
* [FeatureMatchingResult](/v9/generated/interfaces/image.FeatureMatchingResult.md)
* [Match](/v9/generated/interfaces/image.Match.md)

### 类型别名

* [ImageFormat](/v9/generated/modules/image.md#imageformat)
* [Region](/v9/generated/modules/image.md#region)

### 常量

* [MAX\_LEVEL\_AUTO](/v9/generated/modules/image.md#max_level_auto)

### 函数

* [decodeImage](/v9/generated/modules/image.md#decodeimage)
* [decodeImageFromBuffer](/v9/generated/modules/image.md#decodeimagefrombuffer)
* [decodeImageFromBufferSync](/v9/generated/modules/image.md#decodeimagefrombuffersync)
* [decodeImageSync](/v9/generated/modules/image.md#decodeimagesync)
* [detectsColor](/v9/generated/modules/image.md#detectscolor)
* [detectsMultiColors](/v9/generated/modules/image.md#detectsmulticolors)
* [encodeImage](/v9/generated/modules/image.md#encodeimage)
* [encodeImageSync](/v9/generated/modules/image.md#encodeimagesync)
* [encodeImageToBuffer](/v9/generated/modules/image.md#encodeimagetobuffer)
* [encodeImageToBufferSync](/v9/generated/modules/image.md#encodeimagetobuffersync)
* [findColor](/v9/generated/modules/image.md#findcolor)
* [findColorSync](/v9/generated/modules/image.md#findcolorsync)
* [findImage](/v9/generated/modules/image.md#findimage)
* [findImageInRegion](/v9/generated/modules/image.md#findimageinregion)
* [findImageInRegionSync](/v9/generated/modules/image.md#findimageinregionsync)
* [findImageSync](/v9/generated/modules/image.md#findimagesync)
* [findMultiColors](/v9/generated/modules/image.md#findmulticolors)
* [findMultiColorsSync](/v9/generated/modules/image.md#findmulticolorssync)
* [loadImage](/v9/generated/modules/image.md#loadimage)
* [matchFeatures](/v9/generated/modules/image.md#matchfeatures)
* [matchTemplate](/v9/generated/modules/image.md#matchtemplate)
* [matchTemplateSync](/v9/generated/modules/image.md#matchtemplatesync)
* [readImage](/v9/generated/modules/image.md#readimage)
* [readImageSync](/v9/generated/modules/image.md#readimagesync)
* [writeImage](/v9/generated/modules/image.md#writeimage)
* [writeImageSync](/v9/generated/modules/image.md#writeimagesync)

## 类型别名

### ImageFormat

Ƭ **ImageFormat**: `"jpg"` | `"jpeg"` | `"png"` | `"webp"`

图片格式类型。

***

### Region

Ƭ **Region**: `cv.Rect` | `Array`<`number`>

区域类型，可以是 opencv 的 Rect 对象或数组 `[x, y, width, height]`。

## 常量

### MAX\_LEVEL\_AUTO

• `Const` **MAX\_LEVEL\_AUTO**: `-1`

自动图像金字塔级别，用于模板匹配等操作。

## 函数

### decodeImage

▸ **decodeImage**(`str`, `encoding?`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

将字符串解码为图片对象，并异步返回该图片对象。若无法解码，则抛出异常。

#### 参数

| 名称       | 类型             | 默认值      | 描述                                              |
| :--------- | :--------------- | :---------- | :------------------------------------------------ |
| `str`      | `string`         | `undefined` | 字符串，根据 encoding 参数决定格式，默认为 base64 |
| `encoding` | `BufferEncoding` | `"base64"`  | 编码格式，默认为 base64                           |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回 Image 对象。

***

### decodeImageFromBuffer

▸ **decodeImageFromBuffer**(`buffer`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

从 Buffer 中解码图片，并异步返回解码后的图片对象。若无法解码，则抛出异常。

#### 参数

| 名称     | 类型     | 描述                  |
| :------- | :------- | :-------------------- |
| `buffer` | `Buffer` | 包含图片数据的 Buffer |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回 Image 对象。

***

### decodeImageFromBufferSync

▸ **decodeImageFromBufferSync**(`buffer`): [`Image`](/v9/generated/classes/image.Image.md)

从 Buffer 中解码图片，并同步返回解码后的图片对象。若无法解码，则抛出异常。

#### 参数

| 名称     | 类型     | 描述                  |
| :------- | :------- | :-------------------- |
| `buffer` | `Buffer` | 包含图片数据的 Buffer |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回 Image 对象。

***

### decodeImageSync

▸ **decodeImageSync**(`str`, `encoding?`): [`Image`](/v9/generated/classes/image.Image.md)

将字符串解码为图片对象，并同步返回该图片对象。若无法解码，则抛出异常。

#### 参数

| 名称       | 类型             | 默认值      | 描述                                              |
| :--------- | :--------------- | :---------- | :------------------------------------------------ |
| `str`      | `string`         | `undefined` | 字符串，根据 encoding 参数决定格式，默认为 base64 |
| `encoding` | `BufferEncoding` | `"base64"`  | 编码格式，默认为 base64                           |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回 Image 对象。

***

### detectsColor

▸ **detectsColor**(`src`, `color`, `x`, `y`, `options?`): `boolean`

检测图片在指定位置的颜色是否匹配。

#### 参数

| 名称      | 类型                                                                           | 描述         |
| :-------- | :----------------------------------------------------------------------------- | :----------- |
| `src`     | [`Image`](/v9/generated/classes/image.Image.md)                                | 源图片       |
| `color`   | [`Color`](/v9/generated/classes/color.Color.md)                                | 要检测的颜色 |
| `x`       | `number`                                                                       | X 坐标       |
| `y`       | `number`                                                                       | Y 坐标       |
| `options` | [`CompareColorOptions`](/v9/generated/interfaces/color.CompareColorOptions.md) | 颜色比较选项 |

#### 返回值

`boolean`

如果颜色匹配则返回 `true`，否则返回 `false`。

***

### detectsMultiColors

▸ **detectsMultiColors**(`src`, `colors`, `x`, `y`, `options?`): `boolean`

检测图片在指定位置的多色是否匹配。

#### 参数

| 名称      | 类型                                                                           | 描述             |
| :-------- | :----------------------------------------------------------------------------- | :--------------- |
| `src`     | [`Image`](/v9/generated/classes/image.Image.md)                                | 源图片           |
| `colors`  | [`ColorPath`](/v9/generated/interfaces/image.ColorPath.md)                     | 要检测的多色路径 |
| `x`       | `number`                                                                       | X 坐标           |
| `y`       | `number`                                                                       | Y 坐标           |
| `options` | [`CompareColorOptions`](/v9/generated/interfaces/color.CompareColorOptions.md) | 颜色比较选项     |

#### 返回值

`boolean`

如果多色匹配则返回 `true`，否则返回 `false`。

***

### encodeImage

▸ **encodeImage**(`img`, `encoding?`, `format?`, `quality?`): `Promise`<`string`>

将图片编码为字符串，并异步返回编码后的字符串。

#### 参数

| 名称       | 类型                                                        | 默认值      | 描述                                                       |
| :--------- | :---------------------------------------------------------- | :---------- | :--------------------------------------------------------- |
| `img`      | [`Image`](/v9/generated/classes/image.Image.md)             | `undefined` | 要编码的图片                                               |
| `encoding` | `BufferEncoding`                                            | `"base64"`  | 编码格式，默认为 base64                                    |
| `format`   | [`ImageFormat`](/v9/generated/modules/image.md#imageformat) | `"png"`     | 图片压缩格式，默认为 png。可选的值有：png、jpg、jpeg、webp |
| `quality`  | `number`                                                    | `100`       | 图片质量，范围 0-100。默认值为 100                         |

#### 返回值

`Promise`<`string`>

返回一个 Promise，resolve 时返回编码后的字符串。

***

### encodeImageSync

▸ **encodeImageSync**(`img`, `encoding?`, `format?`, `quality?`): `string`

将图片编码为字符串，并同步返回编码后的字符串。

#### 参数

| 名称       | 类型                                                        | 默认值      | 描述                                                       |
| :--------- | :---------------------------------------------------------- | :---------- | :--------------------------------------------------------- |
| `img`      | [`Image`](/v9/generated/classes/image.Image.md)             | `undefined` | 要编码的图片                                               |
| `encoding` | `BufferEncoding`                                            | `"base64"`  | 编码格式，默认为 base64                                    |
| `format`   | [`ImageFormat`](/v9/generated/modules/image.md#imageformat) | `"png"`     | 图片压缩格式，默认为 png。可选的值有：png、jpg、jpeg、webp |
| `quality`  | `number`                                                    | `100`       | 图片质量，范围 0-100。默认值为 100                         |

#### 返回值

`string`

返回编码后的字符串。

***

### encodeImageToBuffer

▸ **encodeImageToBuffer**(`img`, `format?`, `quality?`): `Promise`<`Buffer`>

将图片编码为二进制数据，并异步返回编码后的 Buffer 对象。

#### 参数

| 名称      | 类型                                                        | 默认值      | 描述                                                       |
| :-------- | :---------------------------------------------------------- | :---------- | :--------------------------------------------------------- |
| `img`     | [`Image`](/v9/generated/classes/image.Image.md)             | `undefined` | 要编码的图片                                               |
| `format`  | [`ImageFormat`](/v9/generated/modules/image.md#imageformat) | `"png"`     | 图片压缩格式，默认为 png。可选的值有：png、jpg、jpeg、webp |
| `quality` | `number`                                                    | `100`       | 图片质量，范围 0-100。默认值为 100                         |

#### 返回值

`Promise`<`Buffer`>

返回一个 Promise，resolve 时返回编码后的 Buffer 对象。

***

### encodeImageToBufferSync

▸ **encodeImageToBufferSync**(`img`, `format?`, `quality?`): `Buffer`

将图片编码为二进制数据，并同步返回编码后的 Buffer 对象。

#### 参数

| 名称      | 类型                                                        | 默认值      | 描述                                                       |
| :-------- | :---------------------------------------------------------- | :---------- | :--------------------------------------------------------- |
| `img`     | [`Image`](/v9/generated/classes/image.Image.md)             | `undefined` | 要编码的图片                                               |
| `format`  | [`ImageFormat`](/v9/generated/modules/image.md#imageformat) | `"png"`     | 图片压缩格式，默认为 png。可选的值有：png、jpg、jpeg、webp |
| `quality` | `number`                                                    | `100`       | 图片质量，范围 0-100。默认值为 100                         |

#### 返回值

`Buffer`

返回编码后的 Buffer 对象。

***

### findColor

▸ **findColor**(`src`, `color`, `options`): `Promise`<`cv.Point2` | `null`>

在图片中查找指定颜色的位置，异步返回。

#### 参数

| 名称      | 类型                                                                     | 描述                           |
| :-------- | :----------------------------------------------------------------------- | :----------------------------- |
| `src`     | [`Image`](/v9/generated/classes/image.Image.md)                          | 源图片                         |
| `color`   | [`Color`](/v9/generated/classes/color.Color.md)                          | 要查找的颜色                   |
| `options` | [`FindColorOptions`](/v9/generated/interfaces/image.FindColorOptions.md) | 找色选项，包括阈值、搜索区域等 |

#### 返回值

`Promise`<`cv.Point2` | `null`>

返回一个 Promise，resolve 时返回找到的位置，如果未找到则返回 `null`。

***

### findColorSync

▸ **findColorSync**(`src`, `color`, `options`): `cv.Point2` | `null`

在图片中查找指定颜色的位置，同步返回。

#### 参数

| 名称      | 类型                                                                     | 描述                           |
| :-------- | :----------------------------------------------------------------------- | :----------------------------- |
| `src`     | [`Image`](/v9/generated/classes/image.Image.md)                          | 源图片                         |
| `color`   | [`Color`](/v9/generated/classes/color.Color.md)                          | 要查找的颜色                   |
| `options` | [`FindColorOptions`](/v9/generated/interfaces/image.FindColorOptions.md) | 找色选项，包括阈值、搜索区域等 |

#### 返回值

`cv.Point2` | `null`

返回找到的位置，如果未找到则返回 `null`。

***

### findImage

▸ **findImage**(`src`, `template`, `options?`): `Promise`<`cv.Point2` | `null`>

在大图中搜索小图，并返回匹配结果。通过找图选项可以指定匹配精度、搜索区域和图像金字塔级别。

**`示例`**

```javascript
"nodejs";

const { requestScreenCapture } = require("media_projection");
const { findImage, readImage } = require("image");

async function main() {
  const capturer = await requestScreenCapture();
  const template = await readImage("./template.png");
  const img = await capturer.nextImage();
  console.log(await findImage(img, template));
}
main();
```

#### 参数

| 名称       | 类型                                                                     | 描述             |
| :--------- | :----------------------------------------------------------------------- | :--------------- |
| `src`      | [`Image`](/v9/generated/classes/image.Image.md)                          | 大图             |
| `template` | [`Image`](/v9/generated/classes/image.Image.md)                          | 小图，即模板图片 |
| `options`  | [`FindImageOptions`](/v9/generated/interfaces/image.FindImageOptions.md) | 找图选项         |

#### 返回值

`Promise`<`cv.Point2` | `null`>

返回一个 Promise，resolve 时返回模板图片在大图中的位置，或者 `null`。

***

### findImageInRegion

▸ **findImageInRegion**(`src`, `template`, `x`, `y`, `width?`, `height?`, `threshold?`): `Promise`<`cv.Point2` | `null`>

在指定区域中查找图片，异步返回。

#### 参数

| 名称        | 类型                                            | 描述                                           |
| :---------- | :---------------------------------------------- | :--------------------------------------------- |
| `src`       | [`Image`](/v9/generated/classes/image.Image.md) | 大图                                           |
| `template`  | [`Image`](/v9/generated/classes/image.Image.md) | 小图，即模板图片                               |
| `x`         | `number`                                        | 搜索区域的 X 坐标                              |
| `y`         | `number`                                        | 搜索区域的 Y 坐标                              |
| `width`     | `number`                                        | 搜索区域的宽度                                 |
| `height`    | `number`                                        | 搜索区域的高度                                 |
| `threshold` | `number`                                        | 匹配阈值，范围 0-1，默认值根据图片大小自动计算 |

#### 返回值

`Promise`<`cv.Point2` | `null`>

返回一个 Promise，resolve 时返回找到的位置，如果未找到则返回 `null`。

***

### findImageInRegionSync

▸ **findImageInRegionSync**(`src`, `template`, `x`, `y`, `width?`, `height?`, `threshold?`): `cv.Point2` | `null`

在指定区域中查找图片，同步返回。

#### 参数

| 名称        | 类型                                            | 描述                                           |
| :---------- | :---------------------------------------------- | :--------------------------------------------- |
| `src`       | [`Image`](/v9/generated/classes/image.Image.md) | 大图                                           |
| `template`  | [`Image`](/v9/generated/classes/image.Image.md) | 小图，即模板图片                               |
| `x`         | `number`                                        | 搜索区域的 X 坐标                              |
| `y`         | `number`                                        | 搜索区域的 Y 坐标                              |
| `width`     | `number`                                        | 搜索区域的宽度                                 |
| `height`    | `number`                                        | 搜索区域的高度                                 |
| `threshold` | `number`                                        | 匹配阈值，范围 0-1，默认值根据图片大小自动计算 |

#### 返回值

`cv.Point2` | `null`

返回找到的位置，如果未找到则返回 `null`。

***

### findImageSync

▸ **findImageSync**(`src`, `template`, `options?`): `cv.Point2` | `null`

在大图中搜索小图，并返回匹配结果，同步返回。

#### 参数

| 名称       | 类型                                                                     | 描述             |
| :--------- | :----------------------------------------------------------------------- | :--------------- |
| `src`      | [`Image`](/v9/generated/classes/image.Image.md)                          | 大图             |
| `template` | [`Image`](/v9/generated/classes/image.Image.md)                          | 小图，即模板图片 |
| `options`  | [`FindImageOptions`](/v9/generated/interfaces/image.FindImageOptions.md) | 找图选项         |

#### 返回值

`cv.Point2` | `null`

返回模板图片在大图中的位置，或者 `null`。

***

### findMultiColors

▸ **findMultiColors**(`src`, `colors`, `options?`): `Promise`<`cv.Point2` | `null`>

在图片中查找多色路径的位置，异步返回。

#### 参数

| 名称      | 类型                                                                     | 描述                           |
| :-------- | :----------------------------------------------------------------------- | :----------------------------- |
| `src`     | [`Image`](/v9/generated/classes/image.Image.md)                          | 源图片                         |
| `colors`  | [`ColorPath`](/v9/generated/interfaces/image.ColorPath.md)               | 要查找的多色路径               |
| `options` | [`FindColorOptions`](/v9/generated/interfaces/image.FindColorOptions.md) | 找色选项，包括阈值、搜索区域等 |

#### 返回值

`Promise`<`cv.Point2` | `null`>

返回一个 Promise，resolve 时返回找到的位置，如果未找到则返回 `null`。

***

### findMultiColorsSync

▸ **findMultiColorsSync**(`src`, `colors`, `options?`): `cv.Point2` | `null`

在图片中查找多色路径的位置，同步返回。

#### 参数

| 名称      | 类型                                                                     | 描述                           |
| :-------- | :----------------------------------------------------------------------- | :----------------------------- |
| `src`     | [`Image`](/v9/generated/classes/image.Image.md)                          | 源图片                         |
| `colors`  | [`ColorPath`](/v9/generated/interfaces/image.ColorPath.md)               | 要查找的多色路径               |
| `options` | [`FindColorOptions`](/v9/generated/interfaces/image.FindColorOptions.md) | 找色选项，包括阈值、搜索区域等 |

#### 返回值

`cv.Point2` | `null`

返回找到的位置，如果未找到则返回 `null`。

***

### loadImage

▸ **loadImage**(`url`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

加载指定 url 地址的图片，异步返回 Image 对象。若 url 无法访问或图片无法解析，则抛出异常。

#### 参数

| 名称  | 类型     | 描述                                |
| :---- | :------- | :---------------------------------- |
| `url` | `string` | 图片地址，需要以 https 或 http 开头 |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回 Image 对象。

***

### matchFeatures

▸ **matchFeatures**(`scene`, `object`, `options?`): `Promise`<[`ObjectFrame`](/v9/generated/interfaces/image.ObjectFrame.md) | `null`>

使用特征匹配算法在场景图中查找目标对象。

#### 参数

| 名称      | 类型                                                                                 | 描述           |
| :-------- | :----------------------------------------------------------------------------------- | :------------- |
| `scene`   | [`ImageFeatures`](/v9/generated/classes/image.ImageFeatures.md)                      | 场景图的特征   |
| `object`  | [`ImageFeatures`](/v9/generated/classes/image.ImageFeatures.md)                      | 目标对象的特征 |
| `options` | [`FeatureMatchingOptions`](/v9/generated/interfaces/image.FeatureMatchingOptions.md) | 特征匹配选项   |

#### 返回值

`Promise`<[`ObjectFrame`](/v9/generated/interfaces/image.ObjectFrame.md) | `null`>

返回一个 Promise，resolve 时返回对象框架，如果未找到则返回 `null`。

***

### matchTemplate

▸ **matchTemplate**(`src`, `template`, `options`): `Promise`<[`Match`](/v9/generated/interfaces/image.Match.md)\[]>

使用模板匹配算法在图片中查找模板，返回所有匹配结果。

#### 参数

| 名称       | 类型                                                                             | 描述         |
| :--------- | :------------------------------------------------------------------------------- | :----------- |
| `src`      | [`Image`](/v9/generated/classes/image.Image.md)                                  | 源图片       |
| `template` | [`Image`](/v9/generated/classes/image.Image.md)                                  | 模板图片     |
| `options`  | [`MatchTemplateOptions`](/v9/generated/interfaces/image.MatchTemplateOptions.md) | 模板匹配选项 |

#### 返回值

`Promise`<[`Match`](/v9/generated/interfaces/image.Match.md)\[]>

返回一个 Promise，resolve 时返回匹配结果数组。

***

### matchTemplateSync

▸ **matchTemplateSync**(`src`, `template`, `options`): [`Match`](/v9/generated/interfaces/image.Match.md)\[]

使用模板匹配算法在图片中查找模板，返回所有匹配结果，同步返回。

#### 参数

| 名称       | 类型                                                                             | 描述         |
| :--------- | :------------------------------------------------------------------------------- | :----------- |
| `src`      | [`Image`](/v9/generated/classes/image.Image.md)                                  | 源图片       |
| `template` | [`Image`](/v9/generated/classes/image.Image.md)                                  | 模板图片     |
| `options`  | [`MatchTemplateOptions`](/v9/generated/interfaces/image.MatchTemplateOptions.md) | 模板匹配选项 |

#### 返回值

[`Match`](/v9/generated/interfaces/image.Match.md)\[]

返回匹配结果数组。

***

### readImage

▸ **readImage**(`file`): `Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

读取指定路径的文件，异步返回 Image 对象。若文件不存在或无法解析，则抛出异常。

#### 参数

| 名称   | 类型     | 描述                   |
| :----- | :------- | :--------------------- |
| `file` | `string` | 文件路径，支持相对路径 |

#### 返回值

`Promise`<[`Image`](/v9/generated/classes/image.Image.md)>

返回一个 Promise，resolve 时返回 Image 对象。

***

### readImageSync

▸ **readImageSync**(`file`): [`Image`](/v9/generated/classes/image.Image.md)

读取指定路径的文件，同步返回 Image 对象。若文件不存在或无法解析，则抛出异常。

#### 参数

| 名称   | 类型     | 描述                   |
| :----- | :------- | :--------------------- |
| `file` | `string` | 文件路径，支持相对路径 |

#### 返回值

[`Image`](/v9/generated/classes/image.Image.md)

返回 Image 对象。

***

### writeImage

▸ **writeImage**(`img`, `file`, `quality?`): `Promise`<`void`>

将图片异步写入到指定的路径。

**`示例`**

```javascript
"nodejs";

const { loadImage, writeImage } = require("image");
async function main() {
  const img = await loadImage("https://picsum.photos/200/300");
  await writeImage(img, "./output-200x300.png");
}
main();
```

#### 参数

| 名称      | 类型                                            | 默认值      | 描述                                                                                               |
| :-------- | :---------------------------------------------- | :---------- | :------------------------------------------------------------------------------------------------- |
| `img`     | [`Image`](/v9/generated/classes/image.Image.md) | `undefined` | 要写入的图片                                                                                       |
| `file`    | `string`                                        | `undefined` | 文件路径，支持相对路径。文件路径需要以特定后缀名结束，目前支持的后缀名有：.jpg、.jpeg、.png、.webp |
| `quality` | `number`                                        | `100`       | 图片质量，范围 0-100。默认值为 100                                                                 |

#### 返回值

`Promise`<`void`>

返回一个 Promise，写入完成时 resolve。

***

### writeImageSync

▸ **writeImageSync**(`img`, `file`, `quality?`): `void`

将图片同步写入到指定的路径。

#### 参数

| 名称      | 类型                                            | 默认值      | 描述                                                                                               |
| :-------- | :---------------------------------------------- | :---------- | :------------------------------------------------------------------------------------------------- |
| `img`     | [`Image`](/v9/generated/classes/image.Image.md) | `undefined` | 要写入的图片                                                                                       |
| `file`    | `string`                                        | `undefined` | 文件路径，支持相对路径。文件路径需要以特定后缀名结束，目前支持的后缀名有：.jpg、.jpeg、.png、.webp |
| `quality` | `number`                                        | `100`       | 图片质量，范围 0-100。默认值为 100                                                                 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/lang.md'
---
# lang - 语言
lang提供语言相关的API，比如`delay`(延时)。

## 目录

### 类

* [Deferred](/v9/generated/classes/lang.Deferred.md)
* [TimeoutError](/v9/generated/classes/lang.TimeoutError.md)

### 接口

* [ReadOnlyProperty](/v9/generated/interfaces/lang.ReadOnlyProperty.md)

### 函数

* [delay](/v9/generated/modules/lang.md#delay)
* [lazy](/v9/generated/modules/lang.md#lazy)
* [lazyProp](/v9/generated/modules/lang.md#lazyprop)
* [promise](/v9/generated/modules/lang.md#promise)

## 函数

### delay

▸ **delay**(`timeout`): `Promise`<`void`>

返回一个Promise，将在timeout时间后resolve。例如`await delay(1000)`会在1秒后执行。不同于Pro 8的`sleep()`，此函数并不会真正阻塞线程/事件循环。

**`示例`**

```javascript
"nodejs";
const { delay } = require('lang');
async function main() {
  console.log(1);
  await delay(2000);
  console.log(2);
}
main();
```

#### 参数

| 名称      | 类型     | 描述                                                         |
| :-------- | :------- | :----------------------------------------------------------- |
| `timeout` | `number` | 超时时间，若小于或等于0，则此函数返回一个立即resolve的Promise。 |

#### 返回值

`Promise`<`void`>

***

### lazy

▸ **lazy**(`target`, `name`, `__namedParameters?`): `any`

TypeScript装饰器，在JavaScript中无法使用。

用于装饰类的getter属性，装饰后的属性在第一个调用时会被自动执行并保存值，以后调用时会使用之前保存的值。

**`示例`**

```typescript
import { lazy } from 'lang'

class Sum {
   private n: number;

   constructor(n: number) {
     this.n = n;
   }

   @lazy
   get sum() {
     console.log('calculating sum...');
     let result = 0;
     for (let i = 0; i < this.n; i++) {
          result += i;
     }
     return result;
   }
}

const sum = new Sum(10);
console.log(sum.sum); // calculating sum...55
console.log(sum.sum); // 55
```

#### 参数

| 名称                | 类型                 |
| :------------------ | :------------------- |
| `target`            | `any`                |
| `name`              | `string`             |
| `__namedParameters` | `PropertyDescriptor` |

#### 返回值

`any`

***

### lazyProp

▸ **lazyProp**<`T`>(`evaluator`): [`ReadOnlyProperty`](/v9/generated/interfaces/lang.ReadOnlyProperty.md)<`T`>

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称        | 类型      |
| :---------- | :-------- |
| `evaluator` | () => `T` |

#### 返回值

[`ReadOnlyProperty`](/v9/generated/interfaces/lang.ReadOnlyProperty.md)<`T`>

***

### promise

▸ **promise**<`T`>(`executor`): `Promise`<`T`>

创建一个Promise，与`new Promise`类似，唯一不同的是在此Promise状态在pending状态时（也即resolve/reject之前），autojs会保持引擎不退出。

由于nodejs并不感知Java的一些异步API的执行，此函数通常用于创建和Java API相关的Promise，在Java API返回之前保持程序运行。

**`示例`**

```javascript
"nodejs";
const { promise } = require('lang');
const { android } = require('android');

function loadAudioAsync(file) {
  const SoundPool = android.media.SoundPool;
  return promise(function (resolve) {
     const soundPool = new SoundPool(1, SoundPool.STREAM_MUSIC, 0);
     soundPool.setOnLoadCompleteListener($autojs.java.wrap(() => resolve(soundPool)));
     soundPool.load(file, 1);
  });
}
```

#### 类型参数

| 名称 |
| :--- |
| `T`  |

#### 参数

| 名称       | 类型                                                         |
| :--------- | :----------------------------------------------------------- |
| `executor` | (`resolve`: (`value`: `T` | `PromiseLike`<`T`>) => `void`, `reject`: (`reason?`: `any`) => `void`) => `void` |

#### 返回值

`Promise`<`T`>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/media_projection.md'
description: >-
  Auto.js Pro media_projection 模块 API 文档 -
  提供屏幕截图功能，支持实时屏幕捕获、截图权限管理、截图选项配置。适用于需要获取屏幕内容的自动化场景。
---
# media_projection - 屏幕截图
media\_projection 模块提供了屏幕截图功能。类似 Pro 8 中的截图函数已迁移到此模块。

请求截图权限需要启动新的 Activity，因此在 Android 10 及以上，只有应用在前台时才能申请，并且截图期间需要保持前台服务运行，否则会无法收到新截图。

## 目录

### 类

* [ScreenCapturer](/v9/generated/classes/media_projection.ScreenCapturer.md)

### 枚举

* [Orientation](/v9/generated/enums/media_projection.Orientation.md)

### 接口

* [ScreenCaptureOptions](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md)

### 函数

* [requestScreenCapture](/v9/generated/modules/media_projection.md#requestscreencapture)

## 函数

### requestScreenCapture

▸ **requestScreenCapture**(`options?`, `context?`): `Promise`<[`ScreenCapturer`](/v9/generated/classes/media_projection.ScreenCapturer.md)>

请求截图权限，并返回 `ScreenCapturer` 对象的 Promise。如果用户拒绝或遇到错误，则会抛出一个 `ScreenCaptureRequestError`。

请求截图权限需要启动新的 Activity，因此在 Android 10 及以上，只有应用在前台时才能申请，并且截图期间需要保持前台服务运行，否则会无法收到新截图。

**`示例`**

```javascript
"nodejs";
const { requestScreenCapture } = require("media_projection");

async function main() {
  const capturer = await requestScreenCapture();
  const img = await capturer.nextImage();
  console.log(img);
}
main();
```

#### 参数

| 名称      | 类型                                                                                        | 描述                                                       |
| :-------- | :------------------------------------------------------------------------------------------ | :--------------------------------------------------------- |
| `options` | [`ScreenCaptureOptions`](/v9/generated/interfaces/media_projection.ScreenCaptureOptions.md) | 截图选项，包括宽度、高度、像素密度、方向等                 |
| `context` | `android.content.Context`                                                                   | 用于启动请求截图权限的 Activity 的 Context，一般无需此参数 |

#### 返回值

`Promise`<[`ScreenCapturer`](/v9/generated/classes/media_projection.ScreenCapturer.md)>

返回一个 Promise，resolve 时返回 `ScreenCapturer` 对象。

#### 抛出

* `ScreenCaptureRequestError` - 当用户拒绝或遇到错误时抛出

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/media.md'
---
# media - 多媒体
media模块提供多媒体编程的支持。目前仅支持音乐播放和媒体文件扫描。后续会结合UI加入视频播放等功能。

## 目录

### 类

* [MediaPlayer](/v9/generated/classes/media.MediaPlayer.md)

### 函数

* [playMusic](/v9/generated/modules/media.md#playmusic)
* [scanFile](/v9/generated/modules/media.md#scanfile)

## 函数

### playMusic

▸ **playMusic**(`uri`, `volume?`, `looping?`): `Promise`<[`MediaPlayer`](/v9/generated/classes/media.MediaPlayer.md)>

播放音乐。在async函数中可使用await关键字等待播放完成。

**`示例`**

```javascript
"nodejs";
const media = require("media");
const url = 'http://music.163.com/song/media/outer/url?id=1309394512.mp3';
playByUrl(url);
async function playByUrl(uri) {
  await media.playMusic(uri, 1.0, false);
}
```

#### 参数

| 名称       | 类型      | 描述                                                     |
| :--------- | :-------- | :------------------------------------------------------- |
| `uri`      | `string`  | 音乐文件路径，或网址。                                   |
| `volume?`  | `number`  | 播放音量，为0~1的浮点数，默认为1。                       |
| `looping?` | `boolean` | 是否循环播放，如果looping为true则循环播放，默认为false。 |

#### 返回值

`Promise`<[`MediaPlayer`](/v9/generated/classes/media.MediaPlayer.md)>

***

### scanFile

▸ **scanFile**(`file`): `void`

扫描文件。用于将音乐文件加入媒体库，也可将图片加入系统相册。

**`参见`**

https://developer.android.google.cn/reference/android/media/MediaScannerConnection#scanFile(java.lang.String,%20java.lang.String)

#### 参数

| 名称   | 类型     | 描述                 |
| :----- | :------- | :------------------- |
| `file` | `string` | 需要扫描的文件路径。 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/notification.md'
---
# notification - 通知
Notification即通知，是指在通知栏显示的消息。以一种醒目的方式及时提醒用户一些重要的信息，用户可以点击通知打开应用或直接从通知中执行操作。

此模块提供了显示通知、在获得用户授权的情况下监听其他应用的通知等功能。

要导入此模块，请使用语句`const notification = require('notification');`

## 目录

### 接口

* [BuildNotificationOptions](/v9/generated/interfaces/notification.BuildNotificationOptions.md)
* [NotificationAction](/v9/generated/interfaces/notification.NotificationAction.md)

### 函数

* [cancel](/v9/generated/modules/notification.md#cancel)
* [notify](/v9/generated/modules/notification.md#notify)

## 函数

### cancel

▸ **cancel**(`id`): `void`

根据通知id取消通知。此函数只能取消本应用发出的通知，也即通过[notify](/v9/generated/modules/notification.md#notify)函数显示的通知。要获取和取消其他应用的通知，请通过requestListeningNotifications。

#### 参数

| 名称 | 类型     | 描述                                                         |
| :--- | :------- | :----------------------------------------------------------- |
| `id` | `number` | notify通知时传入的id，参见[notify](/v9/generated/modules/notification.md#notify) |

#### 返回值

`void`

***

### notify

▸ **notify**(`id`, `n`): `void`

根据通知选项创建通知，并显示通知。参数`id`是通知的唯一标识，若之前已经有相同id的通知，再次调用`notify`则会更新该通知。`id`也可用于取消通知。

**`示例`**

```javascript
"nodejs";
const notification = require('notification');

const notificationId = 10001;
notification.notify(notificationId, {
    contentTitle: "点击触发一条新通知",
    contentText: "这是一条无法被用户清理的通知",
    ticker: "收到一条新通知",
    onContentClick: () => {
        showCounterNotification(0);
    },
    ongoing: true,
    autoCancel: true,
});
```

#### 参数

| 名称 | 类型                                                         | 描述                                                         |
| :--- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `id` | `number`                                                     | 通知的唯一id，为了避免和Auto.js本身的通知冲突，建议从10000开始 |
| `n`  | [`BuildNotificationOptions`](/v9/generated/interfaces/notification.BuildNotificationOptions.html) | 通知选项，包括标题、内容等，参见[BuildNotificationOptions](https://pro.autojs.org/docs/zh/v9/generated/interfaces/notification.BuildNotificationOptions.md) |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ocr.md'
description: >-
  Auto.js Pro OCR 模块 API 文档 - 提供强大的文字识别功能，支持图片中的文字检测和识别。支持自定义模型、CPU
  模式配置、多线程处理，适用于各种 OCR 识别场景。
---
# ocr - 文字识别
ocr 模块提供了文字识别（OCR）功能。使用此模块需要先在 Auto.js Pro 的插件商店中下载官方 OCR 插件。

OCR 对象创建后，在不使用时需要调用 `release()` 方法释放资源，以释放内存和计算资源。

## 目录

### 类

* [OCRResult](/v9/generated/classes/ocr.OCRResult.md)

### 接口

* [OCR](/v9/generated/interfaces/ocr.OCR.md)
* [CreateOCROptions](/v9/generated/interfaces/ocr.CreateOCROptions.md)
* [OCRDetectionOptions](/v9/generated/interfaces/ocr.OCRDetectionOptions.md)

### 类型别名

* [CPUPowerMode](/v9/generated/modules/ocr.md#cpupowermode)

### 函数

* [createOCR](/v9/generated/modules/ocr.md#createocr)

## 类型别名

### CPUPowerMode

Ƭ **CPUPowerMode**: `"LITE_POWER_HIGH"` | `"LITE_POWER_LOW"` | `"LITE_POWER_FULL"` | `"LITE_POWER_NO_BIND"` | `"LITE_POWER_RAND_HIGH"` | `"LITE_POWER_RAND_LOW"`

CPU 模式。用于控制 OCR 识别时的 CPU 使用策略。

* `LITE_POWER_HIGH` - 绑定大核运行模式。如果 ARM CPU 支持 big.LITTLE，则优先使用并绑定 Big cluster，如果设置的线程数大于大核数量，则会将线程数自动缩放到大核数量。如果系统不存在大核或者在一些手机的低电量情况下会出现绑核失败，如果失败则进入不绑核模式。
* `LITE_POWER_LOW` - 绑定小核运行模式。如果 ARM CPU 支持 big.LITTLE，则优先使用并绑定 Little cluster，如果设置的线程数大于小核数量，则会将线程数自动缩放到小核数量。如果找不到小核，则自动进入不绑核模式。
* `LITE_POWER_FULL` - 大小核混用模式。线程数可以大于大核数量，当线程数大于核心数量时，则会自动将线程数缩放到核心数量。
* `LITE_POWER_NO_BIND` - 不绑核运行模式（推荐）。系统根据负载自动调度任务到空闲的 CPU 核心上。
* `LITE_POWER_RAND_HIGH` - 轮流绑定大核模式。如果 Big cluster 有多个核心，则每预测 10 次后切换绑定到下一个核心。
* `LITE_POWER_RAND_LOW` - 轮流绑定小核模式。如果 Little cluster 有多个核心，则每预测 10 次后切换绑定到下一个核心。

## 函数

### createOCR

▸ **createOCR**(`options?`): `Promise`<[`OCR`](/v9/generated/interfaces/ocr.OCR.md)>

根据给定选项，创建 OCR 对象，可用于文字识别。一般不必自定义参数，使用 `createOCR` 即可创建有效的 OCR 对象。

**`示例`**

```javascript
"nodejs";
const { createOCR } = require("ocr");
const { requestScreenCapture } = require("media_projection");
const { showToast } = require("toast");
const { delay } = require("lang");

async function main() {
  // 创建OCR对象，需要先在Auto.js Pro的插件商店中下载官方OCR插件。
  const ocr = await createOCR({
    models: "default", // 指定精度相对高但速度较慢的模型
  });
  const capturer = await requestScreenCapture();
  for (let i = 0; i < 5; i++) {
    const capture = await capturer.nextImage();

    // 检测截图文字并计算检测时间，首次检测的耗时比较长
    // 检测时间取决于图片大小、内容、文字数量
    // 可通过调整createOCR的线程、CPU模式等参数调整检测效率
    const start = Date.now();
    const result = await ocr.detect(capture);
    const end = Date.now();
    console.log(result);

    showToast(`第${i + 1}次检测: ${end - start}ms`);
    await delay(3000);
  }
  ocr.release();
}

main().catch(console.error);
```

#### 参数

| 名称      | 类型                                                                   | 描述                |
| :-------- | :--------------------------------------------------------------------- | :------------------ |
| `options` | [`CreateOCROptions`](/v9/generated/interfaces/ocr.CreateOCROptions.md) | 创建 OCR 对象的选项 |

#### 返回值

`Promise`<[`OCR`](/v9/generated/interfaces/ocr.OCR.md)>

返回一个 Promise，resolve 时返回 OCR 对象。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/opencv.md'
---
# @autojs/opencv - OpenCV
Auto.js Pro 9将[opencv4nodejs](https://www.npmjs.com/package/opencv4nodejs)迁移到了内置模块[@autojs/opencv](https://www.npmjs.com/package/@autojs/opencv?activeTab=readme)。你可以像使用opencv4nodejs模块一样使用它而无需用`npm i`安装。

本模块比较重要的类有Mat, Rect, Point等。

有关opencv4nodejs的更多文档参见：

1. [OpenCV 4.5.1文档](https://docs.opencv.org/4.5.1/index.html)，[OpenCV Mat](https://docs.opencv.org/4.5.1/d3/d63/classcv_1_1Mat.html)
2. [opencv4nodejs Quick Start](https://www.npmjs.com/package/@autojs/opencv?activeTab=readme#quick-start)。
3. [opencv4nodejs 文档](https://justadudewhohacks.github.io/opencv4nodejs/docs/Mat)

由于OpenCV本身的内容比较庞大，不太可能将OpenCV的文档翻译并迁移到这里，因此OpenCV部分需要自行阅读和理解上述英文文档。

**`示例`**

```javascript
"nodejs";

const cv = require("@autojs/opencv");
const rows = 100; // height
const cols = 100; // width
const emptyMat = new cv.Mat(rows, cols, cv.CV_8UC3);
// fill the Mat with default value
const whiteMat = new cv.Mat(rows, cols, cv.CV_8UC1, 255);
const blueMat = new cv.Mat(rows, cols, cv.CV_8UC3, [255, 0, 0]);
```

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/plugins.md'
---
# plugins - 插件
## 目录

### 函数

* [load](/v9/generated/modules/plugins.md#load)
* [unload](/v9/generated/modules/plugins.md#unload)
* [unloadAll](/v9/generated/modules/plugins.md#unloadall)

## 函数

### load

▸ **load**(`packageName`): `Promise`<`any`>

加载一个插件，并返回插件模块中module.exports导出的对象。

如果插件未安装或不存在，则抛出PluginLoadException异常。

**`示例`**

```javascript
"nodejs";
async function main() {
    const plugins = require("plugins");
    const ffmpeg = await plugins.load("org.autojs.plugin.ffmpeg");
    console.log(ffmpeg.inProcess.exec('-i /path/to/mp4.mp4 /path/to/mp3.mp3'));
}
main().catch(console.error);
```

#### 参数

| 名称          | 类型     | 描述     |
| :------------ | :------- | :------- |
| `packageName` | `string` | 插件包名 |

#### 返回值

`Promise`<`any`>

插件导出对象

***

### unload

▸ **unload**(`packageName`): `Promise`<`boolean`>

卸载插件。卸载后继续使用之前的插件导出对象将导致未定义行为。

#### 参数

| 名称          | 类型     | 描述     |
| :------------ | :------- | :------- |
| `packageName` | `string` | 插件包名 |

#### 返回值

`Promise`<`boolean`>

是否成功卸载插件

***

### unloadAll

▸ **unloadAll**(): `Promise`<`void`>

卸载所有插件。卸载后继续使用之前的插件导出对象将导致未定义行为。

#### 返回值

`Promise`<`void`>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/power_manager.md'
---
# power_manager - 电池管理
此模块可让您控制本应用的电源策略，通过忽略电池优化来让本应用在后台时更不容易系统杀死。使用此API有可能影响设备的电池寿命。

## 目录

### 接口

* [WakeLock](/v9/generated/interfaces/power_manager.WakeLock.md)
* [WakeUpOptions](/v9/generated/interfaces/power_manager.WakeUpOptions.md)

### 函数

* [isIgnoringBatteryOptimizations](/v9/generated/modules/power_manager.md#isignoringbatteryoptimizations)
* [isScreenOn](/v9/generated/modules/power_manager.md#isscreenon)
* [newWakeLock](/v9/generated/modules/power_manager.md#newwakelock)
* [requestIgnoreBatteryOptimizations](/v9/generated/modules/power_manager.md#requestignorebatteryoptimizations)
* [wakeUp](/v9/generated/modules/power_manager.md#wakeup)

## 函数

### isIgnoringBatteryOptimizations

▸ **isIgnoringBatteryOptimizations**(`pkg?`): `any`

返回当前是否对应用pkg启用了【忽略电池优化】。

**`示例`**

```javascript
"nodejs";
const { isIgnoringBatteryOptimizations } = require('power_manager');
console.log('isIgnoringBatteryOptimizations:', isIgnoringBatteryOptimizations());
```

#### 参数

| 名称  | 类型     | 默认值        | 描述                       |
| :---- | :------- | :------------ | :------------------------- |
| `pkg` | `string` | `packageName` | 应用包名，默认为本应用包名 |

#### 返回值

`any`

是否已忽略电池优化

***

### isScreenOn

▸ **isScreenOn**(): `boolean`

如果设备处于交互状态，则返回 true。

当此方法返回 true 时，设备处于唤醒状态并准备好与用户交互（尽管这并不能保证用户此时正在积极地与设备交互）。主屏幕通常在此状态下打开。某些功能（例如接近传感器）可能会暂时关闭屏幕，同时仍使设备处于交互状态。

当此方法返回 false 时，设备正在打瞌睡或睡着，并且必须在它准备好再次与用户交互之前被唤醒。在这种状态下，主屏幕通常是关闭的。某些功能，例如“环境模式”可能会导致主屏幕保持开启（尽管处于低功耗状态）以在设备打盹时显示系统提供的内容。

**`示例`**

```javascript
"nodejs";
const { isScreenOn } = require('power_manager');
console.log(isScreenOn());
```

#### 返回值

`boolean`

***

### newWakeLock

▸ **newWakeLock**(`levelAndFlags`, `tag`): [`WakeLock`](/v9/generated/interfaces/power_manager.WakeLock.md)

创建具有指定级别和标志的新唤醒锁。

levelAndFlags 参数指定使用逻辑或"|"运算符组合的唤醒锁定级别和可选标志。

唤醒锁定级别为：PARTIAL\_WAKE\_LOCK、FULL\_WAKE\_LOCK、SCREEN\_DIM\_WAKE\_LOCK 和 SCREEN\_BRIGHT\_WAKE\_LOCK。必须将确切的一个唤醒锁定级别指定为 levelAndFlags 参数的一部分。

唤醒锁定标志是：ACQUIRE\_CAUSES\_WAKEUP 和 ON\_AFTER\_RELEASE。多个标志可以组合为 levelAndFlags 参数的一部分。

在对象上调用 acquire() 以获取唤醒锁，并在完成后调用 release()。

尽管无需特殊权限即可创建唤醒锁，但需要 android.Manifest.permission.WAKE\_LOCK 权限才能实际获取或释放返回的唤醒锁。

如果使用它来保持屏幕开启，您应该强烈考虑使用 android.view.WindowManager.LayoutParams.FLAG\_KEEP\_SCREEN\_ON 代替。当用户在应用程序之间移动时，该窗口标志将由平台正确管理，并且不需要特殊权限。此外，使用标志将在多显示器场景中仅保持适当的屏幕打开，而使用唤醒锁将保持每个屏幕都打开。

**`参见`**

\[PowerManager.newWakeLock]\(https://developer.android.google.cn/reference/android/os/PowerManager#newWakeLock(int, java.lang.String))。

#### 参数

| 名称            | 类型     | 描述                                                     |
| :-------------- | :------- | :------------------------------------------------------- |
| `levelAndFlags` | `number` | 唤醒锁级别和标志值的组合，定义了所请求的 WakeLock 行为。 |
| `tag`           | `string` | 用于调试目的的类名（或其他标记）。                       |

#### 返回值

[`WakeLock`](/v9/generated/interfaces/power_manager.WakeLock.md)

***

### requestIgnoreBatteryOptimizations

▸ **requestIgnoreBatteryOptimizations**(`forceRequest?`, `pkg?`): `void`

请求用户忽略对应用pkg的电池优化。系统将会弹出一个弹窗提示用户确认，这个过程是异步的，确认结果不会返回。

**`示例`**

```javascript
"nodejs";
const { isIgnoringBatteryOptimizations, requestIgnoreBatteryOptimizations } = require('power_manager');
if (!isIgnoringBatteryOptimizations()) {
   console.log('requestIgnoreBatteryOptimizations');
   requestIgnoreBatteryOptimizations();
}
```

#### 参数

| 名称           | 类型      | 默认值        | 描述                                                         |
| :------------- | :-------- | :------------ | :----------------------------------------------------------- |
| `forceRequest` | `boolean` | `false`       | 如果为false，并且当前已经开启了忽略电池优化，则不执行请求；如果为true，则一律请求忽略电池优化。默认为false。 |
| `pkg`          | `string`  | `packageName` | 需要忽略电池优化的包名。默认为本应用包名。                   |

#### 返回值

`void `

***

### wakeUp

▸ **wakeUp**(`options?`): `void`

获取一个唤醒锁，该唤醒锁将唤醒屏幕并保持一定时间, timeout时间（默认为5秒）后唤醒锁将自动释放。

**`参见`**

\[PowerManager.newWakeLock]\(https://developer.android.google.cn/reference/android/os/PowerManager#newWakeLock(int, java.lang.String))。

**`示例`**

```javascript
"nodejs";
const { isScreenOn, wakeUp } = require('power_manager');
if (!isScreenOn()) {
    wakeUp();  
}
```

#### 参数

| 名称       | 类型                                                         | 描述       |
| :--------- | :----------------------------------------------------------- | :--------- |
| `options?` | [`WakeUpOptions`](/v9/generated/interfaces/power_manager.WakeUpOptions.md) | 唤醒锁选项 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/rhino.md'
---
# rhino - 犀牛Java交互
rhino模块提供了兼容rhino引擎的Java交互API，比如导入Java包、类。但该模块不提供JavaAdapter，请使用`$java.defineClass`来实现类似功能。

## 目录

### 变量

* [Packages](/v9/generated/modules/rhino.md#packages)

### 函数

* [install](/v9/generated/modules/rhino.md#install)

## 变量

### Packages

• `Const` **Packages**: `JavaPackages` = `rhino.packages`

用于访问Java包或类。比如`Packages.java`或`Packages.kotlin`。

**`示例`**

```javascript
"nodejs";
const { Packages } = require("rhino");

const OkHttpClient = Packages.okhttp3.OkHttpClient;
const client = new OkHttpClient.Builder().build();

console.log(client);
```

## 函数

### install

▸ **install**(`scope?`): `void`

在作用域中安装兼容于[Rhino引擎](https://pro.autojs.org/docs/#/zh-cn/scriptingJava)中Java交互相关的变量和函数，当前支持：

* `Packages`变量，用于访问Java包或类
* `java`, `javax`, `org`, `com`, `edu`, `net`, `android`等包，用于访问常见的Java包和类
* `JavaAdapter`类，用于在JavaScript中实现Java类或接口的动态继承。**当前版本尚不不支持，使用时会抛出异常**

不支持`importClass`和`importPackage`函数，请直接用赋值语句代替。

**`示例`**

```javascript
"nodejs";
require("rhino").install();

const View = android.view.View;
const StringBuilder = java.lang.StringBuilder;

console.log(View.class.getName());
console.log(new StringBuilder().append("Hello").toString());
```

#### 参数

| 名称    | 类型  | 默认值   | 描述                           |
| :------ | :---- | :------- | :----------------------------- |
| `scope` | `any` | `global` | 作用域，默认为global全局作用域 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/root_automator.md'
description: >-
  Auto.js Pro root_automator 模块 API 文档 - 提供使用 root 权限或 adb
  权限模拟触摸的功能，支持单点触摸、多点触摸、手势操作。相比无障碍操作，支持多点触控和动态改变手势。
---
# root_automator - Root 自动化
root\_automator 模块提供了使用 root 权限或 adb 权限来模拟触摸的功能。用它可以完成触摸与多点触摸，并且这些动作的执行没有延迟。相比起基于无障碍的操作，RootAutomator 支持多点触控和动态改变手势。

::: tip
从 Pro 9.3 开始，推荐使用 `createRootAutomator2` 来代替 `createRootAutomator`，相比 RootAutomator，它有更好的设备兼容性。
:::

## 目录

### 接口

* [RootAutomator](/v9/generated/interfaces/root_automator.RootAutomator.md)
* [RootAutomator2](/v9/generated/interfaces/root_automator.RootAutomator2.md)
* [RootAutomatorOptions](/v9/generated/interfaces/root_automator.RootAutomatorOptions.md)
* [Pointer](/v9/generated/interfaces/root_automator.Pointer.md)

### 函数

* [createRootAutomator](/v9/generated/modules/root_automator.md#createrootautomator)
* [createRootAutomator2](/v9/generated/modules/root_automator.md#createrootautomator2)

## 函数

### createRootAutomator

▸ **createRootAutomator**(`options?`): `Promise`<[`RootAutomator`](/v9/generated/interfaces/root_automator.RootAutomator.md)>

根据选项创建一个新的 RootAutomator 实例。

可以指定是否使用 root 权限、adb 权限、输入设备路径等，参见 `RootAutomatorOptions`。如果不指定 root 或 adb 权限，则默认用 `getDefaultShellOptions` 获取的默认值。

对于输入设备路径 `inputDevice`，如果不指定，则会自动检测，但检测失败时会抛出异常；你也可以手动在终端运行 `getevent -t`，然后在屏幕上操作，看输入事件的设备路径是什么，比如 `/dev/input/event5`。

::: tip
从 Pro 9.3 开始，推荐使用 `createRootAutomator2` 来代替 RootAutomator，相比 RootAutomator，它有更好的设备兼容性。
:::

**`示例`**

```javascript
"nodejs";
const { createRootAutomator } = require("root_automator");
async function main() {
  const ra = await createRootAutomator({ root: true });
  await ra.tap(100, 100);
  await ra.exit();
}
main();
```

#### 参数

| 名称      | 类型                                                                                      | 描述                      |
| :-------- | :---------------------------------------------------------------------------------------- | :------------------------ |
| `options` | [`RootAutomatorOptions`](/v9/generated/interfaces/root_automator.RootAutomatorOptions.md) | 创建 RootAutomator 的选项 |

#### 返回值

`Promise`<[`RootAutomator`](/v9/generated/interfaces/root_automator.RootAutomator.md)>

返回一个 Promise，resolve 时返回 RootAutomator 对象。

***

### createRootAutomator2

▸ **createRootAutomator2**(`options?`): `Promise`<[`RootAutomator2`](/v9/generated/interfaces/root_automator.RootAutomator2.md)>

根据选项创建一个新的 RootAutomator2 实例。RootAutomator2 相比 RootAutomator 有更好的兼容性。

可以指定是否使用 root 权限、adb 权限等，参见 `ShellOptions`。如果不指定 root 或 adb 权限，则默认用 `getDefaultShellOptions` 获取的默认值。

**`示例`**

```javascript
"nodejs";

const { createRootAutomator2 } = require("root_automator");
const { delay } = require("lang");
const { device } = require("device");

const { screenWidth, screenHeight } = device;

async function main() {
  const ra = await createRootAutomator2({ root: true });

  await ra.tap(200, 200);
  await delay(1000);

  await ra.press(screenWidth / 2, screenHeight / 2, 500);
  await delay(1000);

  await ra.swipe(500, 800, 500, 1000, 300);
  await delay(1000);

  let p0 = {
    x: screenWidth / 6,
    y: screenHeight / 6,
  };
  let p1 = {
    x: screenWidth - p0.x,
    y: screenHeight - p0.y,
  };
  ra.touchDown([
    { x: p0.x, y: p0.y, id: 0 },
    { x: p1.x, y: p1.y, id: 1 },
  ]);

  const steps = 20;
  const stepX = Math.round((p1.x - p0.x) / steps) / 2;
  const stepY = Math.round((p1.y - p0.y) / steps) / 2;
  for (let i = 0; i < steps; i++) {
    ra.touchMove([
      { x: p0.x + stepX * i, y: p0.y + stepY * i, id: 0 },
      { x: p1.x - stepX * i, y: p1.y - stepY * i, id: 1 },
    ]);
  }
  await ra.touchUp();
  await ra.flush();

  await ra.exit();
}

main().catch(console.error);
```

#### 参数

| 名称      | 类型                                                             | 描述                       |
| :-------- | :--------------------------------------------------------------- | :------------------------- |
| `options` | [`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md) | 创建 RootAutomator2 的选项 |

#### 返回值

`Promise`<[`RootAutomator2`](/v9/generated/interfaces/root_automator.RootAutomator2.md)>

返回一个 Promise，resolve 时返回 RootAutomator2 对象。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/sensors.md'
---
# sensors - 传感器
sensors模块提供了获取手机上的传感器的信息的支持，这些传感器包括距离传感器、光线光感器、重力传感器、方向传感器等。需要指出的是，本模块只能获取传感器的数据，Auto.js Pro不提供模拟或伪造传感器的数据和事件的功能。

## 目录

### 枚举

* [SensorDelay](/v9/generated/enums/sensors.SensorDelay.md)

### 接口

* [SensorExt](/v9/generated/interfaces/sensors.SensorExt.md)

### 类型别名

* [Sensor](/v9/generated/modules/sensors.md#sensor)

### 函数

* [getSensor](/v9/generated/modules/sensors.md#getsensor)

## 类型别名

### Sensor

Ƭ **Sensor**: `AndroidSensor` & [`SensorExt`](/v9/generated/interfaces/sensors.SensorExt.md)

[getSensor](/v9/generated/modules/sensors.md#getsensor)返回的对象类型，在Android原生[Sensor类](https://developer.android.google.cn/reference/android/hardware/Sensor)上拓展了额外的函数，参见[SensorExt](https://pro.autojs.org/docs/zh/v9/generated/interfaces/sensors.SensorExt.md)。

## 函数

### getSensor

▸ **getSensor**(`name`): [`Sensor`](/v9/generated/modules/sensors.md#sensor) | `undefined`

通过传感器名称获取传感器对象，如果找不到该名称对应的传感器，则返回`undefined`。

常见的传感器列表有：

* `accelerometer` 加速度传感器
* `magnetic_field` 磁场传感器
* `orientation` 方向传感器
* `gyroscope` 陀螺仪传感器
* `light` 光线传感器
* `pressure` 压力传感器
* `temperature` 温度传感器
* `proximity` 接近(距离)传感器
* `gravity` 重力传感器
* `linear_acceleration` 线性加速度传感器

完整的列表参见[Sensor](https://developer.android.google.cn/reference/android/hardware/Sensor#TYPE_ALL)。

**`示例`**

```javascript
"nodejs";
const { getSensor, SensorDelay } = require("sensors");

const sensor = getSensor("light");
sensor.enableSensorEvent(SensorDelay.Normal)
      .on("change", (light) => {
          console.log(light);
      });
$autojs.keepRunning();
```

#### 参数

| 名称   | 类型     | 描述       |
| :----- | :------- | :--------- |
| `name` | `string` | 传感器名称 |

#### 返回值

[`Sensor`](/v9/generated/modules/sensors.md#sensor) | `undefined`

传感器对象，或者undefined

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/settings.md'
---
# settings - 设置
## 目录

### 接口

* [SettingItem](/v9/generated/interfaces/settings.SettingItem.md)

### 变量

* [enableAccessibilityServiceByRoot](/v9/generated/modules/settings.md#enableaccessibilityservicebyroot)
* [foregroundService](/v9/generated/modules/settings.md#foregroundservice)
* [noConsoleOnLaunch](/v9/generated/modules/settings.md#noconsoleonlaunch)
* [stableMode](/v9/generated/modules/settings.md#stablemode)
* [stopAllOnVolumeUp](/v9/generated/modules/settings.md#stopallonvolumeup)

## 变量

### enableAccessibilityServiceByRoot

• `Const` **enableAccessibilityServiceByRoot**: [`SettingItem`](/v9/generated/interfaces/settings.SettingItem.md)<`boolean`>

使用Root权限启用无障碍服务。若开启，在下次启用无障碍服务时，会尝试使用Root权限启用无障碍服务。

***

### foregroundService

• `Const` **foregroundService**: [`SettingItem`](/v9/generated/interfaces/settings.SettingItem.md)<`boolean`>

前台服务。用于保活、截图权限。

***

### noConsoleOnLaunch

• `Const` **noConsoleOnLaunch**: [`SettingItem`](/v9/generated/interfaces/settings.SettingItem.md)<`boolean`>

启动时不显示日志界面。若开启，在打包后的APP启动时不显示日志界面。

***

### stableMode

• `Const` **stableMode**: [`SettingItem`](/v9/generated/interfaces/settings.SettingItem.md)<`boolean`>

稳定模式。若开启，则通过取消设置AccessibilityServiceInfo的FLAG\_INCLUDE\_NOT\_IMPORTANT\_VIEWS，在布局分析时省略布局细节。设置后下次启用无障碍生效。

**`参见`**

[FLAG\_INCLUDE\_NOT\_IMPORTANT\_VIEWS](https://developer.android.google.cn/reference/android/accessibilityservice/AccessibilityServiceInfo#FLAG_INCLUDE_NOT_IMPORTANT_VIEWS)

***

### stopAllOnVolumeUp

• `Const` **stopAllOnVolumeUp**: [`SettingItem`](/v9/generated/interfaces/settings.SettingItem.md)<`boolean`>

音量上键停止所有脚本。若开启，在按下音量上键时，会停止所有脚本。只有在打包后的APP中此配置项才会生效。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/shell.md'
description: >-
  Auto.js Pro shell 模块 API 文档 - 提供执行 Shell 命令的功能，支持执行系统命令、输入输出重定向、命令选项配置等。支持
  node 和 npm 命令执行。
---
# shell - Shell命令
shell即Unix Shell，在类Unix系统提供与操作系统交互的一系列命令。很多程序可以用来执行shell命令，例如终端模拟器。

Auto.js Pro 9也内置了终端用于执行npm, node等命令，而本模块创建的Shell对象或者[exec](/v9/generated/modules/shell.md#exec)函数执行的shell命令，在非打包应用的情况下均支持`node`和`npm`命令，除非修改了`PATH`环境变量。

本模块主要提供了创建新的Shell对象的函数[createShell](/v9/generated/modules/shell.md#createshell)用于持续地执行多条shell命令并监听结果，以及[exec](#exec)函数一次性执行一条shell命令并获取结果。

## 目录

### 接口

* [ExecutionResult](/v9/generated/interfaces/shell.ExecutionResult.md)
* [Shell](/v9/generated/interfaces/shell.Shell.md)
* [ShellOptions](/v9/generated/interfaces/shell.ShellOptions.md)

### 类型别名

* [ExitResult](/v9/generated/modules/shell.md#exitresult)
* [PrivilegeType](/v9/generated/modules/shell.md#privilegetype)
* [StandardOutputType](/v9/generated/modules/shell.md#standardoutputtype)

### 函数

* [InputText](/v9/generated/modules/shell.md#inputtext)
* [SendKey](/v9/generated/modules/shell.md#sendkey)
* [Swipe](/v9/generated/modules/shell.md#swipe)
* [Tap](/v9/generated/modules/shell.md#tap)
* [checkAccess](/v9/generated/modules/shell.md#checkaccess)
* [createShell](/v9/generated/modules/shell.md#createshell)
* [exec](/v9/generated/modules/shell.md#exec)
* [getDefaultShellOptions](/v9/generated/modules/shell.md#getdefaultshelloptions)
* [isRootAvailable](/v9/generated/modules/shell.md#isrootavailable)
* [setDefaultShellOptions](/v9/generated/modules/shell.md#setdefaultshelloptions)

## 类型别名

### ExitResult

Ƭ **ExitResult**: `string` | `number`

***

### PrivilegeType

Ƭ **PrivilegeType**: `"root"` | `"adb"`

***

### StandardOutputType

Ƭ **StandardOutputType**: `"stderr"` | `"stdout"`

## 函数

### InputText

▸ **InputText**(`text`): `Promise`<`void`>

使用默认的shell示例执行`input text`命令，模拟输入文字。

默认的shell示例在首次使用[Tap](/v9/generated/modules/shell.md#tap), [Swipe](/v9/generated/modules/shell.md#swipe), [SendKey](/v9/generated/modules/shell.md#sendkey), [InputText](#inputtext)等操作时会使用默认Shell选项[getDefaultShellOptions](#getdefaultshelloptions)自动创建。若您想让这些操作使用adb权限或特定Shell选项，应当在执行这些函数前使用[setDefaultShellOptions](#setdefaultshelloptions)设置Shell选项。

这些操作函数以大写字母开头，表示其通常需要root或adb权限，否则只能在本应用内生效。

**`示例`**

```javascript
"nodejs";
const { InputText } = require("shell");
async function main() {
    await InputText("Hello, World");
}
main();
```

#### 参数

| 名称   | 类型     | 描述                                      |
| :----- | :------- | :---------------------------------------- |
| `text` | `string` | 要输入的文字，只支持ASCII字符，不支持中文 |

#### 返回值

`Promise`<`void`>

***

### SendKey

▸ **SendKey**(`key`): `Promise`<`void`>

使用默认的shell示例执行`input keyevent key`命令，模拟发送按键key。

默认的shell示例在首次使用[Tap](/v9/generated/modules/shell.md#tap), [Swipe](/v9/generated/modules/shell.md#swipe), [SendKey](/v9/generated/modules/shell.md#sendkey), [InputText](#inputtext)等操作时会使用默认Shell选项[getDefaultShellOptions](#getdefaultshelloptions)自动创建。若您想让这些操作使用adb权限或特定Shell选项，应当在执行这些函数前使用[setDefaultShellOptions](#setdefaultshelloptions)设置Shell选项。

这些操作函数以大写字母开头，表示其通常需要root或adb权限，否则只能在本应用内生效。

**`示例`**

```javascript
"nodejs";
const { SendKey, setDefaultShellOptions } = require("shell");

async function main() {
    setDefaultShellOptions({
       adb: true,
    });
    await SendKey("HOME");
}
main();
```

#### 参数

| 名称  | 类型                | 描述                                                         |
| :---- | :------------------ | :----------------------------------------------------------- |
| `key` | `string` | `number` | 按键名或按钮码，比如"HOME"或3表示Home按键，参见[KeyEvent](https://developer.android.google.cn/reference/android/view/KeyEvent#KEYCODE_HOME)。 |

#### 返回值

`Promise`<`void`>

***

### Swipe

▸ **Swipe**(`x1`, `y1`, `x2`, `y2`, `duration?`): `Promise`<`void`>

使用默认的shell示例执行`input swipe x1 y1 x2 y2 duration`命令，模拟从位置(x1, y1)滑动到位置(x2, y2)。

默认的shell示例在首次使用[Tap](/v9/generated/modules/shell.md#tap), [Swipe](/v9/generated/modules/shell.md#swipe), [SendKey](/v9/generated/modules/shell.md#sendkey), [InputText](#inputtext)等操作时会使用默认Shell选项[getDefaultShellOptions](#getdefaultshelloptions)自动创建。若您想让这些操作使用adb权限或特定Shell选项，应当在执行这些函数前使用[setDefaultShellOptions](#setdefaultshelloptions)设置Shell选项。

这些操作函数以大写字母开头，表示其通常需要root或adb权限，否则只能在本应用内生效。

**`示例`**

```javascript
"nodejs";
const { Swipe } = require("shell");
async function main() {
    await Swipe(800, 100, 800, 1000);
}
main();
```

#### 参数

| 名称        | 类型     | 描述               |
| :---------- | :------- | :----------------- |
| `x1`        | `number` | -                  |
| `y1`        | `number` | -                  |
| `x2`        | `number` | -                  |
| `y2`        | `number` | -                  |
| `duration?` | `number` | 滑动时间，单位毫秒 |

#### 返回值

`Promise`<`void`>

***

### Tap

▸ **Tap**(`x`, `y`): `Promise`<`void`>

使用默认的shell示例执行`input tab x y`命令，模拟点击位置(x, y)。

默认的shell示例在首次使用[Tap](/v9/generated/modules/shell.md#tap), [Swipe](/v9/generated/modules/shell.md#swipe), [SendKey](/v9/generated/modules/shell.md#sendkey), [InputText](#inputtext)等操作时会使用默认Shell选项[getDefaultShellOptions](#getdefaultshelloptions)自动创建。若您想让这些操作使用adb权限或特定Shell选项，应当在执行这些函数前使用[setDefaultShellOptions](#setdefaultshelloptions)设置Shell选项。

这些操作函数以大写字母开头，表示其通常需要root或adb权限，否则只能在本应用内生效。

**`示例`**

```javascript
"nodejs";
const { Tap } = require("shell");
async function main() {
    await Tap(100, 100);
}
main();
```

#### 参数

| 名称 | 类型     |
| :--- | :------- |
| `x`  | `number` |
| `y`  | `number` |

#### 返回值

`Promise`<`void`>

***

### checkAccess

▸ **checkAccess**(`type`): `Promise`<`boolean`>

检查是否有特定的特权，比如是否有root权限。

**`示例`**

```javascript
"nodejs";

const { checkAccess } = require("shell");
async function main() {
   const hasRoot = await checkAccess("root");
   const hasAdb = await checkAccess("adb");
   console.log(`hasRoot: ${hasRoot}, hasAdb: ${hasAdb}`);
}
main();
```

#### 参数

| 名称   | 类型                                                         | 描述                        |
| :----- | :----------------------------------------------------------- | :-------------------------- |
| `type` | [`PrivilegeType`](/v9/generated/modules/shell.md#privilegetype) | 特权类型，比如"root"或"adb" |

#### 返回值

`Promise`<`boolean`>

是否有该类型的特权的Promise

***

### createShell

▸ **createShell**(`options?`): [`Shell`](/v9/generated/interfaces/shell.Shell.md)

创建一个Shell实例。

我们通常用[exec](/v9/generated/modules/shell.md#exec)函数来一次性执行单条命令并获取结果，但如果有多条命令需要执行，用Shell对象的效率更高。这是因为无需每次执行都创建新的shell进程。

通过Shell对象我们也可监听到Shell的输出。

**`示例`**

```javascript
"nodejs";
const { createShell } = require("shell");
const shell = createShell();
shell.on("line", (line) => {
    console.log(line);
});
shell.exec("ls");

const id = $autojs.keepRunning();
shell.exit().then(() => $autojs.cancelKeepRunning(id));
```

#### 参数

| 名称       | 类型                                                         | 描述                             |
| :--------- | :----------------------------------------------------------- | :------------------------------- |
| `options?` | [`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md) | Shell选项，将覆盖默认的Shell选项 |

#### 返回值

[`Shell`](/v9/generated/interfaces/shell.Shell.md)

Shell实例

***

### exec

▸ **exec**(`cmd`, `options?`): `Promise`<[`ExecutionResult`](/v9/generated/interfaces/shell.ExecutionResult.md)>

创建一个新的shell进程，并执行命令，异步返回结果。

**`示例`**

```javascript
"nodejs";
const { exec, isRootAvailable } = require("shell");
async function main() {
    console.log(await exec("npm"));
    if (await isRootAvailable()) {
       console.log(await exec("ls /data", { root: true }));
    }
}
main();
```

#### 参数

| 名称       | 类型                                                         | 描述                             |
| :--------- | :----------------------------------------------------------- | :------------------------------- |
| `cmd`      | `string`                                                     | 要执行的命令                     |
| `options?` | [`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md) | Shell选项，将覆盖默认的Shell选项 |

#### 返回值

`Promise`<[`ExecutionResult`](/v9/generated/interfaces/shell.ExecutionResult.md)>

执行结果的Promise

***

### getDefaultShellOptions

▸ **getDefaultShellOptions**(): [`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md)

获取默认的Shell选项。

**`参见`**

[setDefaultShellOptions](/v9/generated/modules/shell.md#setdefaultshelloptions)

#### 返回值

[`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md)

***

### isRootAvailable

▸ **isRootAvailable**(): `Promise`<`boolean`>

检查设备是否已Root。需要注意的是，设备已Root不代表本应用已获得Root权限。

**`示例`**

```javascript
"nodejs";

const { isRootAvailable } = require("shell");
async function main() {
   const rootAvailable = await isRootAvailable();
   console.log(`rootAvailable: ${rootAvailable}`);
}
main();
```

#### 返回值

`Promise`<`boolean`>

***

### setDefaultShellOptions

▸ **setDefaultShellOptions**(`options`): `void`

设置默认的Shell选项。这些选项包含是否使用Root权限、adb权限、环境变量等，会在创建新的Shell或RootAutomator实例时使用。

#### 参数

| 名称      | 类型                                                         | 描述      |
| :-------- | :----------------------------------------------------------- | :-------- |
| `options` | [`ShellOptions`](/v9/generated/interfaces/shell.ShellOptions.md) | Shell选项 |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/toast.md'
---
# toast - Toast
## 目录

### 接口

* [ToastOptions](/v9/generated/interfaces/toast.ToastOptions.md)

### 函数

* [showToast](/v9/generated/modules/toast.md#showtoast)

## 函数

### showToast

▸ **showToast**(`msg`, `options?`): `void`

显示Toast气泡信息。在部分系统上，在后台无法显示Toast，或者需要开启通知权限才能显示Toast。

> 注意！连续显示多个Toast时，Toast会排队显示，即使脚本已经结束，Toast可能仍然会显示。

**`示例`**

```javascript
"nodejs";
const { showToast } = require('toast');
showToast('Hello world!');
```

#### 参数

| 名称       | 类型                                                         | 描述                                                         |
| :--------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `msg`      | `any`                                                        | Toast文本                                                    |
| `options?` | `"short"` | `"long"` | [`ToastOptions`](/v9/generated/interfaces/toast.ToastOptions.md) | Toast时长，默认为short。short为短时长，long为长时长（不同系统可能有不同的具体时长） |

#### 返回值

`void `

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/index.md'
description: >-
  Auto.js Pro v9 UI 模块入门指南 - 学习如何使用 UI 模块编写用户界面，包括 Activity、布局、控件、样式等基础知识。基于
  Android UI 系统，适合 Android 开发者。
---
# 入门介绍
ui 模块提供了编写用户界面的支持。在 v9 中，UI 模块基于 Node.js 引擎，使用 Activity 类来创建和管理界面。

::: tip
给 Android 开发者或者高阶用户的提醒，Auto.js 的 UI 系统来自于 Android，所有属性和方法都能在 Android 源码中找到。如果某些代码或属性没有出现在 Auto.js 的文档中，可以参考 Android 的文档。

* [android.view.View](https://developer.android.google.cn/reference/android/view/View?hl=cn)
* [android.widget](https://developer.android.google.cn/reference/android/widget/package-summary?hl=cn)
  :::

## 启用 Node.js 引擎

在 v9 中，使用 UI 模块的脚本必须在文件开头使用 `"nodejs";` 或 `"ui nodejs";` 来启用 Node.js 引擎。正确示范：

```javascript
"nodejs";

// 脚本的其他代码
```

或者如果同时需要 UI 和 Node.js：

```javascript
"ui nodejs";

// 脚本的其他代码
```

字符串 `"nodejs"` 的前面可以有注释、空行和空格，但是不能有其他代码。

## 基本概念

界面是由视图(View)组成的。View 分成两种，控件(Widget)和布局(Layout)。控件(Widget)用来具体显示文字、图片、网页等，比如文本控件(text)用来显示文字，按钮控件(button)则可以显示一个按钮并提供点击效果，图片控件(img)则用来显示来自网络或者文件的图片，除此之外还有输入框控件(input)、进度条控件(progressbar)、单选复选框控件(checkbox)等；布局(Layout)则是装着一个或多个控件的"容器"，用于控制在他里面的控件的位置，比如垂直布局(vertical)会把他里面的控件从上往下依次显示(即纵向排列)，水平布局(horizontal)则会把他里面的控件从左往右依次显示(即横向排列)，以及帧布局(frame)，他会把他里面的控件直接在左上角显示，如果有多个控件，后面的控件会重叠在前面的控件上。

## 使用 Activity 创建界面

在 v9 中，我们使用 Activity 类来创建界面。首先需要导入 `ui/activity` 模块，然后创建一个继承自 `Activity` 的类，并通过 `layoutXml` getter 返回 XML 布局字符串。最后使用 `setMainActivity()` 函数设置主 Activity。

### 基本示例

```javascript
"nodejs";
const { Activity, setMainActivity } = require("ui/activity");

class MainActivity extends Activity {
  get layoutXml() {
    return `
      <vertical>
        <button text="第一个按钮"/>
        <button text="第二个按钮"/>
      </vertical>
    `;
  }
}

setMainActivity(MainActivity);
```

在这个例子中：

1. 第 1 行使用 `"nodejs";` 启用 Node.js 引擎
2. 第 2 行导入 `ui/activity` 模块，解构出 `Activity` 类和 `setMainActivity` 函数
3. 第 4-11 行定义了一个 `MainActivity` 类，继承自 `Activity`
4. 第 5-10 行的 `get layoutXml()` 方法返回 XML 布局字符串，指定了界面的具体内容
5. 第 6 行的标签 `<vertical> ... </vertical>` 表示垂直布局，布局的标签通常以 `<...>` 开始，以 `</...>` 结束
6. 第 7-8 行是两个按钮控件(button)，控件的标签通常以 `<...` 开始，以 `/>` 结束，他们之间是控件的具体属性
7. 第 7 行的 `text="第一个按钮"` 部分就是按钮控件的属性，这个属性指定了这个按钮控件的文本内容(text)为"第一个按钮"
8. 第 13 行使用 `setMainActivity()` 设置主 Activity，这样应用启动时会自动创建并显示这个 Activity

这两个控件在垂直布局中，因此会纵向排列。

### 水平布局示例

如果我们把这个例子的垂直布局(vertical)改成水平布局(horizontal)：

```javascript
"nodejs";
const { Activity, setMainActivity } = require("ui/activity");

class MainActivity extends Activity {
  get layoutXml() {
    return `
      <horizontal>
        <button text="第一个按钮"/>
        <button text="第二个按钮"/>
      </horizontal>
    `;
  }
}

setMainActivity(MainActivity);
```

则这两个按钮会横向排列。

### 设置控件和布局属性

一个控件可以指定多个属性(甚至可以不指定任何属性)，用空格隔开即可；布局同样也可以指定属性，例如：

```javascript
"nodejs";
const { Activity, setMainActivity } = require("ui/activity");

class MainActivity extends Activity {
  get layoutXml() {
    return `
      <vertical bg="#ff0000">
        <button text="第一个按钮" textSize="20sp"/>
        <button text="第二个按钮"/>
      </vertical>
    `;
  }
}

setMainActivity(MainActivity);
```

第三行 `bg="#ff0000"` 指定了垂直布局的背景色(bg)为"#ff0000"，这是一个 RGB 颜色，表示红色(有关 RGB 的相关知识参见[RGB颜色对照表](http://tool.oschina.net/commons?type=3))。第四行的 `textSize="20sp"` 则指定了按钮控件的字体大小(textSize)为"20sp"，sp 是一个字体单位，暂时不用深入理会。

### 使用 setContentView 方法

除了使用 `layoutXml` getter，你也可以在 `onCreate()` 方法中使用 `setContentView()` 方法来设置布局：

```javascript
"nodejs";
const { Activity, setMainActivity, MATCH_PARENT, WRAP_CONTENT } = require("ui");

class MainActivity extends Activity {
  onCreate() {
    super.onCreate();
    
    this.setContentView({
      type: "vertical",
      bg: "#ffffff",
      children: [
        {
          type: "text",
          text: "Hello Auto.js Pro",
          textSize: "20sp",
          width: MATCH_PARENT,
          height: WRAP_CONTENT
        },
        {
          type: "button",
          text: "点击我",
          width: WRAP_CONTENT,
          height: WRAP_CONTENT
        }
      ]
    });
  }
}

setMainActivity(MainActivity);
```

## 启动其他 Activity

使用 `startActivity()` 函数可以启动其他 Activity：

```javascript
"nodejs";
const { Activity, setMainActivity, startActivity } = require("ui/activity");

class MainActivity extends Activity {
  get layoutXml() {
    return `
      <vertical>
        <button id="btnStart" text="启动第二个界面"/>
      </vertical>
    `;
  }
  
  onCreate() {
    super.onCreate();
    
    // 通过 viewId 访问视图
    const btnStart = this.contentView.findViewById("btnStart");
    btnStart.on("click", () => {
      startActivity(SecondActivity);
    });
  }
}

class SecondActivity extends Activity {
  get layoutXml() {
    return `
      <vertical>
        <text text="这是第二个界面"/>
        <button text="返回" id="btnBack"/>
      </vertical>
    `;
  }
  
  onCreate() {
    super.onCreate();
    
    const btnBack = this.contentView.findViewById("btnBack");
    btnBack.on("click", () => {
      this.finish(); // 关闭当前 Activity
    });
  }
}

setMainActivity(MainActivity);
```

## 术语说明

一个界面便由一些布局和控件组成。为了便于文档阅读，我们再说明一下以下术语：

* **子视图, 子控件**: 布局里面的控件是这个布局的子控件/子视图。实际上布局里面不仅仅只能有控件，还可以是嵌套的布局。因此用子视图(Child View)更准确一些。在上面的例子中，按钮便是垂直布局的子控件。

* **父视图，父布局**: 直接包含一个控件的布局是这个控件的父布局/父视图(Parent View)。在上面的例子中，垂直布局便是按钮的父布局。

## 与 v8 的区别

v9 的 UI 模块与 v8 的主要区别：

1. **模块导入方式**: v9 使用 `require("ui/activity")` 导入模块，而不是 v8 的全局变量
2. **界面创建方式**: v9 使用 Activity 类和 `layoutXml` getter，而不是 v8 的 `"ui";` 模式和 `ui.layout()` 函数
3. **引擎要求**: v9 需要在文件开头使用 `"nodejs";` 启用 Node.js 引擎
4. **布局设置**: v9 可以使用 `layoutXml` getter 或 `setContentView()` 方法设置布局

## 相关文档

* [Activity 类文档](/v9/generated/classes/ui_activity.Activity.html)
* [ui 模块 API 文档](/v9/generated/modules/ui.html)
* [从 v8 迁移到 v9](/v9/)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_activity.md'
---
# ui/activity
## 目录

### 类

* [Activity](/v9/generated/classes/ui_activity.Activity.md)

### 接口

* [ActivityLifecycle](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)
* [StatusBarConfig](/v9/generated/interfaces/ui_activity.StatusBarConfig.md)

### 类型别名

* [ActivityClass](/v9/generated/modules/ui_activity.md#activityclass)

### 变量

* [activityLifecycle](/v9/generated/modules/ui_activity.md#activitylifecycle)

### 函数

* [setMainActivity](/v9/generated/modules/ui_activity.md#setmainactivity)
* [startActivity](/v9/generated/modules/ui_activity.md#startactivity)

## 类型别名

### ActivityClass

Ƭ **ActivityClass**<`T`>: () => `T`

#### 类型参数

| 名称 | 类型                                                                |
| :--- | :------------------------------------------------------------------ |
| `T`  | extends [`Activity`](/v9/generated/classes/ui_activity.Activity.md) |

#### Type declaration

• **new ActivityClass**(): `T`

##### 返回值

`T`

## 变量

### activityLifecycle

• `Const` **activityLifecycle**: [`ActivityLifecycle`](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

## 函数

### setMainActivity

▸ **setMainActivity**<`T`>(`activityClass`): `void`

设置主 Activity。主 Activity 是应用的入口 Activity，当应用启动时会自动创建并显示。

**`示例`**

```javascript
"nodejs";
const { Activity, setMainActivity } = require("ui/activity");

class MainActivity extends Activity {
  get layoutXml() {
    return `
            <vertical>
                <text text="Hello World" />
            </vertical>
        `;
  }
}

setMainActivity(MainActivity);
```

#### 类型参数

| 名称 | 类型                                                                     | 描述                  |
| :--- | :----------------------------------------------------------------------- | :-------------------- |
| `T`  | extends [`Activity`](/v9/generated/classes/ui_activity.Activity.md)<`T`> | Activity 类的类型参数 |

#### 参数

| 名称            | 类型                                                                       | 描述                  |
| :-------------- | :------------------------------------------------------------------------- | :-------------------- |
| `activityClass` | [`ActivityClass`](/v9/generated/modules/ui_activity.md#activityclass)<`T`> | Activity 类的构造函数 |

#### 返回值

`void`

***

### startActivity

▸ **startActivity**<`T`>(`activityClass`, `options?`): `void`

启动一个新的 Activity。可以传递 Intent 选项来配置 Activity 的启动方式。

**`示例`**

```javascript
"nodejs";
const { Activity, startActivity } = require("ui/activity");

class SecondActivity extends Activity {
  get layoutXml() {
    return `
            <vertical>
                <text text="Second Activity" />
            </vertical>
        `;
  }
}

// 启动 Activity
startActivity(SecondActivity);

// 启动 Activity 并传递数据
startActivity(SecondActivity, {
  extras: {
    message: "Hello from MainActivity",
  },
});
```

#### 类型参数

| 名称 | 类型                                                                     | 描述                  |
| :--- | :----------------------------------------------------------------------- | :-------------------- |
| `T`  | extends [`Activity`](/v9/generated/classes/ui_activity.Activity.md)<`T`> | Activity 类的类型参数 |

#### 参数

| 名称            | 类型                                                                       | 描述                                                      |
| :-------------- | :------------------------------------------------------------------------- | :-------------------------------------------------------- |
| `activityClass` | [`ActivityClass`](/v9/generated/modules/ui_activity.md#activityclass)<`T`> | Activity 类的构造函数                                     |
| `options?`      | [`IntentOptions`](/v9/generated/interfaces/app.IntentOptions.md)           | Intent 选项，用于配置 Activity 的启动方式（如传递数据等） |

#### 返回值

`void`

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_layout.md'
---
# ui/layout

***

## 目录

### 接口

* [Resource](/v9/generated/interfaces/ui_layout.Resource.md)
* [Resources](/v9/generated/interfaces/ui_layout.Resources.md)

### 变量

* [R](/v9/generated/modules/ui_layout.md#r)

### 函数

* [defaultThemeContext](/v9/generated/modules/ui_layout.md#defaultthemecontext)
* [inflateXml](/v9/generated/modules/ui_layout.md#inflatexml)

## 变量

### R

• `Const` **R**: [`Resources`](/v9/generated/interfaces/ui_layout.Resources.md)

类似于Android中的R，用于获取资源相关的ID，比如`R.drawable.ic_launcher`，`R.style.ScriptTheme`等。

**`示例`**

```javascript
"nodejs";

const { R } = require("ui");

const context = $autojs.androidContext;
console.log(context.getDrawable(R.drawable.ic_delete))
```

**`参见`**

https://developer.android.google.cn/reference/android/R

## 函数

### defaultThemeContext

▸ **defaultThemeContext**(): `Context`

获取默认主题的Context。

#### 返回值

`Context`

***

### inflateXml

▸ **inflateXml**(`ctx`, `xml`, `parent?`, `attachToParent?`): [`JsView`](/v9/generated/modules/ui_view.md#jsview)<`View`>

解析xm内容并创建其对应的View树。若解析失败则抛出[InflateException](https://developer.android.google.cn/reference/android/view/InflateException)异常。

#### 参数

| 名称              | 类型      | 描述                                                         |
| :---------------- | :-------- | :----------------------------------------------------------- |
| `ctx`             | `Context` | Android [Context](https://developer.android.google.cn/reference/android/content/Context)对象，若要创建androidx相关的View，则必须指定Material相关主题的Context |
| `xml`             | `string`  | xml内容                                                      |
| `parent?`         | `any`     | 若attachToRoot为false，则指定parent为新创建的View的父View；若attachToRoot为false，则parent为解析xml过程中用于生成LayoutParams的View。默认为null。 |
| `attachToParent?` | `boolean` | 创建新View后是否添加到parent中，默认为false                  |

#### 返回值

[`JsView`](/v9/generated/modules/ui_view.md#jsview)<`View`>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_object.md'
---
# ui_object - 无障碍对象
## 目录

### 类

* [Rect](/v9/generated/classes/ui_object.Rect.md)
* [UiObject](/v9/generated/classes/ui_object.UiObject.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_res.md'
---
# ui/res

***

## 目录

### 接口

* [ImageLoader](/v9/generated/interfaces/ui_res.ImageLoader.md)

### 变量

* [imageLoader](/v9/generated/modules/ui_res.md#imageloader)

### 函数

* [loadAndroidResources](/v9/generated/modules/ui_res.md#loadandroidresources)

## 变量

### imageLoader

• `Const` **imageLoader**: [`ImageLoader`](/v9/generated/interfaces/ui_res.ImageLoader.md)

## 函数

### loadAndroidResources

▸ **loadAndroidResources**(): `Promise`<`void`>

加载 Android 系统资源。此函数会异步加载 Android 系统的资源（如 drawable、string、color 等），加载完成后可以通过 `R` 对象访问这些资源。

**`示例`**

```javascript
"nodejs";
const { loadAndroidResources, R } = require("ui");

async function main() {
    // 加载 Android 系统资源
    await loadAndroidResources();
    
    // 现在可以使用 R 对象访问系统资源
    const context = $autojs.androidContext;
    const drawable = context.getDrawable(R.drawable.ic_delete);
    console.log("已加载系统资源");
}
main();
```

#### 返回值

`Promise`<`void`>

返回一个 Promise，当资源加载完成时 resolve。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_selector.md'
---
# ui_selector - 无障碍选择器
## 目录

### 枚举

* [TraversalOrder](/v9/generated/enums/ui_selector.TraversalOrder.md)

### 类

* [NotFoundError](/v9/generated/classes/ui_selector.NotFoundError.md)
* [UiSelector](/v9/generated/classes/ui_selector.UiSelector.md)

### 接口

* [FindOptions](/v9/generated/interfaces/ui_selector.FindOptions.md)
* [PropertyOperator](/v9/generated/interfaces/ui_selector.PropertyOperator.md)
* [SelectorQuery](/v9/generated/interfaces/ui_selector.SelectorQuery.md)

### 类型别名

* [PropertyQuery](/v9/generated/modules/ui_selector.md#propertyquery)
* [PropertyValue](/v9/generated/modules/ui_selector.md#propertyvalue)
* [UiObjectFilter](/v9/generated/modules/ui_selector.md#uiobjectfilter)
* [UiObjectProvider](/v9/generated/modules/ui_selector.md#uiobjectprovider)

## 类型别名

### PropertyQuery

Ƭ **PropertyQuery**: [`PropertyValue`](/v9/generated/interfaces/ui_selector.PropertyOperator.md) | `RegExp`

选择器查找条件的值的类型接口

***

### PropertyValue

Ƭ **PropertyValue**: `string` | `number` | `boolean`

选择器条件的具体值的类型接口

***

### UiObjectFilter

Ƭ **UiObjectFilter**: (`obj`: [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)) => `boolean`

#### Type declaration

▸ (`obj`): `boolean`

控件过滤器

##### 参数

| 名称  | 类型                                                         | 描述 |
| :---- | :----------------------------------------------------------- | :--- |
| `obj` | [`UiObject`](/v9/generated/classes/ui_object.UiObject.md) | 控件 |

##### 返回值

`boolean`

是否通过

***

### UiObjectProvider

Ƭ **UiObjectProvider**: () => [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]>

#### Type declaration

▸ (): [`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]>

控件提供器

##### 返回值

[`UiObject`](/v9/generated/classes/ui_object.UiObject.md)\[]>

控件列表，或返回控件列表的Promise

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_util.md'
---
# ui/util

***

## 目录

### 函数

* [isUiThread](/v9/generated/modules/ui_util.md#isuithread)

## 函数

### isUiThread

▸ **isUiThread**(): `boolean`

判断当前线程是否是UI线程

#### 返回值

`boolean`

是否是UI线程

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_view.md'
---
# ui/view
## 目录

### 类

* [Widget](/v9/generated/classes/ui_view.Widget.md)

### 接口

* [Extras](/v9/generated/interfaces/ui_view.Extras.md)
* [JsViewExt](/v9/generated/interfaces/ui_view.JsViewExt.md)
* [ViewBinding](/v9/generated/interfaces/ui_view.ViewBinding.md)
* [ViewEvent](/v9/generated/interfaces/ui_view.ViewEvent.md)
* [WidgetAttributes](/v9/generated/interfaces/ui_view.WidgetAttributes.md)

### 类型别名

* [AttributeValue](/v9/generated/modules/ui_view.md#attributevalue)
* [JsView](/v9/generated/modules/ui_view.md#jsview)
* [WidgetClass](/v9/generated/modules/ui_view.md#widgetclass)

## 类型别名

### AttributeValue

Ƭ **AttributeValue**: `string` | `null` | `undefined`

***

### JsView

Ƭ **JsView**<`T`>: `T` & [`JsViewExt`](/v9/generated/interfaces/ui_view.JsViewExt.md)<`T`>

#### 类型参数

| 名称 | 类型           |
| :--- | :------------- |
| `T`  | extends `View` |

***

### WidgetClass

Ƭ **WidgetClass**: () => [`Widget`](/v9/generated/classes/ui_view.Widget.md)

#### Type declaration

• **new WidgetClass**(): [`Widget`](/v9/generated/classes/ui_view.Widget.md)

##### 返回值

[`Widget`](/v9/generated/classes/ui_view.Widget.md)

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui_web.md'
---
# ui/web

## 目录

### 接口

* [IPCEvent](/v9/generated/interfaces/ui_web.IPCEvent.md)
* [InvokeEvent](/v9/generated/interfaces/ui_web.InvokeEvent.md)
* [JavaScriptBridge](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)
* [JsWebView](/v9/generated/interfaces/ui_web.JsWebView.md)

### 类型别名

* [InvokeRequestHandler](/v9/generated/modules/ui_web.md#invokerequesthandler)

## 类型别名

### InvokeRequestHandler

Ƭ **InvokeRequestHandler**: (`event`: [`InvokeEvent`](/v9/generated/interfaces/ui_web.InvokeEvent.md), ...`args`: `any`) => `any` | `Promise`<`any`>

#### Type declaration

▸ (`event`, ...`args`): `any` | `Promise`<`any`>

##### 参数

| 名称      | 类型                                                         |
| :-------- | :----------------------------------------------------------- |
| `event`   | [`InvokeEvent`](/v9/generated/interfaces/ui_web.InvokeEvent.md) |
| `...args` | `any`                                                        |

##### 返回值

`any` | `Promise`<`any`>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/ui/ui.md'
description: >-
  Auto.js Pro UI 模块 API 文档 - 提供完整的用户界面开发功能，包括布局、视图、控件、WebView、资源加载等。支持原生 UI 和
  Web UI 开发，满足各种界面开发需求。
---
# ui - 用户界面
## 目录

### References

* [Activity](/v9/generated/modules/ui.md#activity)
* [ActivityClass](/v9/generated/modules/ui.md#activityclass)
* [ActivityLifecycle](/v9/generated/modules/ui.md#activitylifecycle)
* [AttributeValue](/v9/generated/modules/ui.md#attributevalue)
* [Extras](/v9/generated/modules/ui.md#extras)
* [IPCEvent](/v9/generated/modules/ui.md#ipcevent)
* [ImageLoader](/v9/generated/modules/ui.md#imageloader)
* [InvokeEvent](/v9/generated/modules/ui.md#invokeevent)
* [InvokeRequestHandler](/v9/generated/modules/ui.md#invokerequesthandler)
* [JavaScriptBridge](/v9/generated/modules/ui.md#javascriptbridge)
* [JsView](/v9/generated/modules/ui.md#jsview)
* [JsViewExt](/v9/generated/modules/ui.md#jsviewext)
* [JsWebView](/v9/generated/modules/ui.md#jswebview)
* [R](/v9/generated/modules/ui.md#r)
* [Resource](/v9/generated/modules/ui.md#resource)
* [Resources](/v9/generated/modules/ui.md#resources)
* [StatusBarConfig](/v9/generated/modules/ui.md#statusbarconfig)
* [ViewBinding](/v9/generated/modules/ui.md#viewbinding)
* [ViewEvent](/v9/generated/modules/ui.md#viewevent)
* [Widget](/v9/generated/modules/ui.md#widget)
* [WidgetAttributes](/v9/generated/modules/ui.md#widgetattributes)
* [WidgetClass](/v9/generated/modules/ui.md#widgetclass)
* [activityLifecycle](/v9/generated/modules/ui.md#activitylifecycle-1)
* [defaultThemeContext](/v9/generated/modules/ui.md#defaultthemecontext)
* [imageLoader](/v9/generated/modules/ui.md#imageloader-1)
* [inflateXml](/v9/generated/modules/ui.md#inflatexml)
* [isUiThread](/v9/generated/modules/ui.md#isuithread)
* [loadAndroidResources](/v9/generated/modules/ui.md#loadandroidresources)
* [setMainActivity](/v9/generated/modules/ui.md#setmainactivity)
* [startActivity](/v9/generated/modules/ui.md#startactivity)

### 接口

* [Point](/v9/generated/interfaces/ui.Point.md)
* [Size](/v9/generated/interfaces/ui.Size.md)

### 变量

* [MATCH\_PARENT](/v9/generated/modules/ui.md#match-parent)
* [WRAP\_CONTENT](/v9/generated/modules/ui.md#wrap-content)

## References

### Activity

Re-exports [Activity](/v9/generated/classes/ui_activity.Activity.md)

***

### ActivityClass

Re-exports [ActivityClass](/v9/generated/modules/ui_activity.md#activityclass)

***

### ActivityLifecycle

Re-exports [ActivityLifecycle](/v9/generated/interfaces/ui_activity.ActivityLifecycle.md)

***

### AttributeValue

Re-exports [AttributeValue](/v9/generated/modules/ui_view.md#attributevalue)

***

### Extras

Re-exports [Extras](/v9/generated/interfaces/ui_view.Extras.md)

***

### IPCEvent

Re-exports [IPCEvent](/v9/generated/interfaces/ui_web.IPCEvent.md)

***

### ImageLoader

Re-exports [ImageLoader](/v9/generated/interfaces/ui_res.ImageLoader.md)

***

### InvokeEvent

Re-exports [InvokeEvent](/v9/generated/interfaces/ui_web.InvokeEvent.md)

***

### InvokeRequestHandler

Re-exports [InvokeRequestHandler](/v9/generated/modules/ui_web.md#invokerequesthandler)

***

### JavaScriptBridge

Re-exports [JavaScriptBridge](/v9/generated/interfaces/ui_web.JavaScriptBridge.md)

***

### JsView

Re-exports [JsView](/v9/generated/modules/ui_view.md#jsview)

***

### JsViewExt

Re-exports [JsViewExt](/v9/generated/interfaces/ui_view.JsViewExt.md)

***

### JsWebView

Re-exports [JsWebView](/v9/generated/interfaces/ui_web.JsWebView.md)

***

### R

Re-exports [R](/v9/generated/modules/ui_layout.md#r)

***

### Resource

Re-exports [Resource](/v9/generated/interfaces/ui_layout.Resource.md)

***

### Resources

Re-exports [Resources](/v9/generated/interfaces/ui_layout.Resources.md)

***

### StatusBarConfig

Re-exports [StatusBarConfig](/v9/generated/interfaces/ui_activity.StatusBarConfig.md)

***

### ViewBinding

Re-exports [ViewBinding](/v9/generated/interfaces/ui_view.ViewBinding.md)

***

### ViewEvent

Re-exports [ViewEvent](/v9/generated/interfaces/ui_view.ViewEvent.md)

***

### Widget

Re-exports [Widget](/v9/generated/classes/ui_view.Widget.md)

***

### WidgetAttributes

Re-exports [WidgetAttributes](/v9/generated/interfaces/ui_view.WidgetAttributes.md)

***

### WidgetClass

Re-exports [WidgetClass](/v9/generated/modules/ui_view.md#widgetclass)

***

### activityLifecycle

Re-exports [activityLifecycle](/v9/generated/modules/ui_activity.md#activitylifecycle)

***

### defaultThemeContext

Re-exports [defaultThemeContext](/v9/generated/modules/ui_layout.md#defaultthemecontext)

***

### imageLoader

Re-exports [imageLoader](/v9/generated/modules/ui_res.md#imageloader)

***

### inflateXml

Re-exports [inflateXml](/v9/generated/modules/ui_layout.md#inflatexml)

***

### isUiThread

Re-exports [isUiThread](/v9/generated/modules/ui_util.md#isuithread)

***

### loadAndroidResources

Re-exports [loadAndroidResources](/v9/generated/modules/ui_res.md#loadandroidresources)

***

### setMainActivity

Re-exports [setMainActivity](/v9/generated/modules/ui_activity.md#setmainactivity)

***

### startActivity

Re-exports [startActivity](/v9/generated/modules/ui_activity.md#startactivity)

## 变量

### MATCH\_PARENT

• `Const` **MATCH\_PARENT**: `-1`

大小填满父布局/窗口

***

### WRAP\_CONTENT

• `Const` **WRAP\_CONTENT**: `-2`

自适应大小。

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/work_manager.md'
---
# work_manager - 定时与任务
该模块用于管理任务，用于在某些时间或某些事件、处理文件时自动运行脚本。正如Auto.js Pro内置的定时任务功能一样，打包的脚本也可以使用这些函数来创建定时任务。

添加任务时建议加上申请忽略电池优化的代码，防止被Android限制在后台运行。

```javascript
"nodejs";
const power_manager = require("power_manager");
if (!power_manager.isIgnoringBatteryOptimizations()) {
  console.log("未开启忽略电池优化");
  power_manager.requestIgnoreBatteryOptimizations();
}
```

> 由于各系统的限制，定时任务不能一定保证准时运行，请尽量将Auto.js Pro加入各种白名单和允许自启动权限。

## 目录

### 接口

* [IntentTaskConfig](/v9/generated/interfaces/work_manager.IntentTaskConfig.md)
* [IntentTaskQuery](/v9/generated/interfaces/work_manager.IntentTaskQuery.md)
* [TaskConfig](/v9/generated/interfaces/work_manager.TaskConfig.md)
* [TimedTaskConfig](/v9/generated/interfaces/work_manager.TimedTaskConfig.md)
* [TimedTaskQuery](/v9/generated/interfaces/work_manager.TimedTaskQuery.md)

### 类型别名

* [DateTime](/v9/generated/modules/work_manager.md#datetime)
* [DaysOfWeek](/v9/generated/modules/work_manager.md#daysofweek)
* [TaskType](/v9/generated/modules/work_manager.md#tasktype)

### 函数

* [addActivityIntentTask](/v9/generated/modules/work_manager.md#addactivityintenttask)
* [addBroadcastIntentTask](/v9/generated/modules/work_manager.md#addbroadcastintenttask)
* [addDailyTask](/v9/generated/modules/work_manager.md#adddailytask)
* [addIntentTask](/v9/generated/modules/work_manager.md#addintenttask)
* [addOneTimeTask](/v9/generated/modules/work_manager.md#addonetimetask)
* [addWeeklyTask](/v9/generated/modules/work_manager.md#addweeklytask)
* [getIntentTask](/v9/generated/modules/work_manager.md#getintenttask)
* [getTimedTask](/v9/generated/modules/work_manager.md#gettimedtask)
* [queryIntentTasks](/v9/generated/modules/work_manager.md#queryintenttasks)
* [queryTimedTasks](/v9/generated/modules/work_manager.md#querytimedtasks)
* [removeIntentTask](/v9/generated/modules/work_manager.md#removeintenttask)
* [removeTimedTask](/v9/generated/modules/work_manager.md#removetimedtask)

## 类型别名

### DateTime

Ƭ **DateTime**: `number` | `string` | `Date`

日期时间类型，可以是number，表示毫秒时间戳；可以是string，表示标准时间格式；可以是Date对象，表示日期对象。

***

### DaysOfWeek

Ƭ **DaysOfWeek**: `"Sunday"` | `"Monday"` | `"Tuesday"` | `"Wednesday"` | `"Thursday"` | `"Friday"` | `"Saturday"` | `"一"` | `"二"` | `"三"` | `"四"` | `"五"` | `"六"` | `"日"`

***

### TaskType

Ƭ **TaskType**: `"TimedTask"` | `"IntentTask"`

## 函数

### addActivityIntentTask

▸ **addActivityIntentTask**(`task`): `Promise`<`Task`>

添加在外部应用处理文件时运行的任意图务。比如文件管理中请求打开文件、其他应用中分享文件或文本时，若选择由Auto.js处理，则触发相应任务运行。

首要参数是action，决定了什么动作会触发任务运行。比如：

* `android.intent.action.VIEW`：外部应用打开文件时触发，比如文件管理器中打开mp3、apk等文件
* `android.intent.action.SEND`：其他应用分享文件时触发
* 更多Action参见[Intent: Action](https://developer.android.google.cn/reference/android/content/Intent#constants_1)

其次是dataType，决定了什么类型的文件会触发任务运行。比如：

* */*：所有文件
* application/vnd.android.package-archive: apk文件
* text/plain: 文本文件
* video/\*: 视频文件
* image/\*: 图片文件

以下代码执行后将添加一个可以在外部应用查看文本文件的任务：

```javascript
const { addActivityIntentTask } = require("work_manager");

addActivityIntentTask({
  path: "/sdcard/脚本/handle_text.js",
  action: 'android.intent.action.VIEW',
  dataType: "text/plain"
}).then(task => console.log(`Task ${task} added`));
```

以下代码是handle\_text.js的内容，他会执行时读取要处理的文件内容并打印：

```text
// handle_text.js
"nodejs";
const { myEngine } = require('engines');
const { getPathFromUri } = require('app');
const { readFileSync } = require('fs');
const intent = myEngine().execArgv.intent;
if (!intent) {
    process.exit();
}
const uri = intent.getUri();
const file = getPathFromUri(uri);
console.log(file);
console.log(readFileSync(file, 'utf8'));
```

#### 参数

| 名称   | 类型                                                         | 描述         |
| :----- | :----------------------------------------------------------- | :----------- |
| `task` | [`IntentTaskConfig`](/v9/generated/interfaces/work_manager.IntentTaskConfig.md) | 意图任务配置 |

#### 返回值

`Promise`<`Task`>

添加的任务的Promise

***

### addBroadcastIntentTask

▸ **addBroadcastIntentTask**(`task`): `Promise`<`Task`>

新增一个广播任务，会在特定事件(广播)时运行。

最关键的参数是广播事件的Action。系统在发生特定事件（比如电量变化）时会发出特定Action的广播。

例如创建一个在电量发生变化时运行脚本的定时任务：

```javascript
"nodejs";
const { android } = require('rhino').Packages;
const Intent = android.content.Intent;
const { addBroadcastIntentTask } = require("work_manager");
addBroadcastIntentTask({
    path: "/path/to/script.js",
    action: Intent.ACTION_BATTERY_CHANGED,
}).then(task => console.log(`Task ${task} added`));
```

可以在Android文档[Intent: Action](https://developer.android.google.cn/reference/android/content/Intent#constants_1)中找到大多数Android系统自带的Intent Action；一些系统组件也会自定义自己的Action，比如网络连接变化时触发的Action是`ConnectivityManager.CONNECTIVITY_ACTION`（使用时需要导入ConnectivityManager)。

以下列出一些常见的广播Action：

* org.autojs.autojs.action.startup : Auto.js启动时，可给Auto.js加上自启动后使任务在开机时运行
* Intent.ACTION\_BOOT\_COMPLETED : 开机时
* Intent.ACTION\_SCREEN\_OFF : 熄屏时
* Intent.ACTION\_SCREEN\_ON : 亮屏时
* Intent.ACTION\_USER\_PRESENT : 屏幕解锁时
* Intent.ACTION\_BATTERY\_CHANGED : 电量变化时
* Intent.ACTION\_POWER\_CONNECTED : 电源连接时
* Intent.ACTION\_POWER\_DISCONNECTED : 电源断开时
* ConnectivityManager.CONNECTIVITY\_ACTION : 网络连接变化时
* Intent.ACTION\_PACKAGE\_ADDED : 新应用安装时
* Intent.ACTION\_PACKAGE\_REMOVED : 应用卸载时
* Intent.ACTION\_PACKAGE\_REPLACED : 应用更新时
* Intent.ACTION\_HEADSET\_PLUG : 耳机拔插时
* Intent.ACTION\_CONFIGURATION\_CHANGED : 某些设置（屏幕方向、地区等）更改时
* Intent.ACTION\_TIME\_TICK : 每分钟一次

在广播任务运行时，通过`require('engines').myEngine().execArgv.intent`获取广播的Intent对象，通过Intent对象获取对应的参数。

以下是电量变化时触发的任务脚本，获取当前电量。

```javascript
"nodejs";
const { myEngine } = require('engines');
const { android } = require('rhino').Packages;

const intent = myEngine().execArgv.intent;
if (!intent) {
   process.exit();
}
const BatteryManager = android.os.BatteryManager;
const level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
console.log("Battery:", level);
```

#### 参数

| 名称   | 类型                                                         | 描述         |
| :----- | :----------------------------------------------------------- | :----------- |
| `task` | [`IntentTaskConfig`](/v9/generated/interfaces/work_manager.IntentTaskConfig.md) | 意图任务配置 |

#### 返回值

`Promise`<`Task`>

添加的任务的Promise

***

### addDailyTask

▸ **addDailyTask**(`task`): `Promise`<`Task`>

新增一个每日运行一次的定时任务。其中时间参数会只保留每天的时间，忽略年月日。 例如创建一个每日下午1点14分运行的定时任务。

**`示例`**

```javascript
"nodejs";
const { addDailyTask } = require("work_manager");
addDailyTask({
    path: "/path/to/script.js",
    time: new Date(0, 0, 0, 13, 14, 0),
})).then(task => console.log(task));
```

#### 参数

| 名称   | 类型                                                         | 描述                     |
| :----- | :----------------------------------------------------------- | :----------------------- |
| `task` | [`TimedTaskConfig`](/v9/generated/interfaces/work_manager.TimedTaskConfig.md) | 用于描述此定时任务的配置 |

#### 返回值

`Promise`<`Task`>

***

### addIntentTask

▸ **addIntentTask**(`task`): `Promise`<`Task`>

新增一个意图任务，分为两种类型：

* 广播意图任务：会在特定事件(广播)时运行。
* 活动意图任务：在外部应用处理文件时运行。比如文件管理中请求打开文件、其他应用中分享文件或文本时，若选择由Auto.js处理，则触发相应任务运行。

推荐使用[addBroadcastIntentTask](/v9/generated/modules/work_manager.md#addbroadcastintenttask)和[addActivityIntentTask](https://pro.autojs.org/docs/zh/v9/generated/modules/work_manager.md#addactivityintenttask)，而非直接使用本函数添加任务。

#### 参数

| 名称   | 类型                                                         |
| :----- | :----------------------------------------------------------- |
| `task` | [`IntentTaskConfig`](/v9/generated/interfaces/work_manager.IntentTaskConfig.md) |

#### 返回值

`Promise`<`Task`>

***

### addOneTimeTask

▸ **addOneTimeTask**(`task`): `Promise`<`Task`>

此函数会新增一个一次性的定时任务，任务在执行一次后将在定时任务中自动删除。

例如创建一个2021年5月21日13点14分运行的定时任务。

**`示例`**

```javascript
"nodejs";
const { addOneTimeTask } = require("work_manager");
addOneTimeTask({
    path: "/sdcard/to/script.js",
    time: new Date(2021, 5, 21, 13, 14, 0),
}).then(task => console.log(task));
```

#### 参数

| 名称   | 类型                                                         |
| :----- | :----------------------------------------------------------- |
| `task` | [`TimedTaskConfig`](/v9/generated/interfaces/work_manager.TimedTaskConfig.md) |

#### 返回值

`Promise`<`Task`>

***

### addWeeklyTask

▸ **addWeeklyTask**(`task`): `Promise`<`Task`>

新增一个按星期运行的定时任务。

例如创建一个每周一周二下午1点14分的定时任务

**`示例`**

```javascript
"nodejs";
const { addWeeklyTask } = require("work_manager");
addWeeklyTask({
    path: "/sdcard/脚本/test.js",
    // Mon Jun 21 2021 13:14:00 GMT+0800 
    time: 1624252440000,
    daysOfWeek: ['Monday', 'Tuesday'],
}).then(task => console.log(task));
```

#### 参数

| 名称   | 类型               | 描述                     |
| :----- | :----------------- | :----------------------- |
| `task` | `WeeklyTaskConfig` | 用于描述此定时任务的配置 |

#### 返回值

`Promise`<`Task`>

***

### getIntentTask

▸ **getIntentTask**(`id`): `Promise`<`Task` | `null`>

根据任务id获取意图任务。

**`参见`**

Task.id

#### 参数

| 名称 | 类型     | 描述   |
| :--- | :------- | :----- |
| `id` | `number` | 任务ID |

#### 返回值

`Promise`<`Task` | `null`>

查询的任务的Promise，如果没有找到则resolve null

***

### getTimedTask

▸ **getTimedTask**(`id`): `Promise`<`Task` | `null`>

根据任务id获取定时任务。

**`参见`**

Task.id

#### 参数

| 名称 | 类型     | 描述   |
| :--- | :------- | :----- |
| `id` | `number` | 任务ID |

#### 返回值

`Promise`<`Task` | `null`>

查询的任务的Promise，如果没有找到则resolve null

***

### queryIntentTasks

▸ **queryIntentTasks**(`query?`): `Promise`<`Task`\[]>

通过脚本路径或Intent Action等条件查询意图任务。

**`示例`**

```javascript
"nodejs";
const { queryIntentTasks, addBroadcastIntentTask } = require("work_manager");
async function main() {
    const task = await addBroadcastIntentTask({
        path: "/sdcard/to/script.js",
        action: Intent.ACTION_BATTERY_CHANGED,
    });
    // Query all intent tasks
    const tasks = await queryIntentTasks();
    console.log(tasks);
}
main();
```

#### 参数

| 名称     | 类型                                                         | 描述                                   |
| :------- | :----------------------------------------------------------- | :------------------------------------- |
| `query?` | [`IntentTaskQuery`](/v9/generated/interfaces/work_manager.IntentTaskQuery.md) | intent任务查询条件，为空则查询所有任务 |

#### 返回值

`Promise`<`Task`\[]>

***

### queryTimedTasks

▸ **queryTimedTasks**(`query?`): `Promise`<`Task`\[]>

通过脚本路径等条件查询定时任务。

**`示例`**

```javascript
"nodejs";
const work_manager = require('work-manager');

const file = "/path/to/script.js";
async function main() {
const task = await work_manager.addWeeklyTask({
    path: file,
    time: 1624252440000,
    daysOfWeek: ['Sunday'],
});
const tasks = await work_manager.queryTimedTasks({
    path: file
});
tasks.forEach(t => {
    console.log("delete:", t);
    console.log(await work_manager.removeTimedTask(t.id));
});
}
```

#### 参数

| 名称 | 类型 | 描述 |
| :------ | :------ | :------ |
| `query?` | [`TimedTaskQuery`](../interfaces/work_manager.TimedTaskQuery.md) | 定时任务查询条件，为空则查询所有任务 |

#### 返回值

`Promise`<`Task`\[]>

***

### removeIntentTask

▸ **removeIntentTask**(`id`): `Promise`<`boolean`>

通过任务id删除一个意图任务。

**`参见`**

Task.id

#### 参数

| 名称 | 类型 | 描述 |
| :------ | :------ | :------ |
| `id` | `number` | 任务id |

#### 返回值

`Promise`<`boolean`>

Promise，表示是否删除成功，若对应的任务不存在，则resolve false，否则resolve true

***

### removeTimedTask

▸ **removeTimedTask**(`id`): `Promise`<`boolean`>

通过任务id删除一个定时任务。

**`参见`**

Task.id

#### 参数

| 名称 | 类型 | 描述 |
| :------ | :------ | :------ |
| `id` | `number` | 任务id |

#### 返回值

`Promise`<`boolean`>

Promise，表示是否删除成功，若对应的任务不存在，则resolve false，否则resolve true

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/generated/modules/zip.md'
---
# zip - 压缩与解压
Zip模块用于处理文件的压缩和解压，并支持加密压缩。

**`参见`**

[zip4j](https://javadoc.io/doc/net.lingala.zip4j/zip4j/1.3.2/index.html)

## 目录

### 接口

* [UnzipOptions](/v9/generated/interfaces/zip.UnzipOptions.md)
* [ZipFile](/v9/generated/interfaces/zip.ZipFile.md)
* [ZipOptions](/v9/generated/interfaces/zip.ZipOptions.md)

### 类型别名

* [ZipFileAttribute](/v9/generated/modules/zip.md#zipfileattribute)

### 函数

* [open](/v9/generated/modules/zip.md#open)
* [unzip](/v9/generated/modules/zip.md#unzip)
* [zipDir](/v9/generated/modules/zip.md#zipdir)
* [zipFile](/v9/generated/modules/zip.md#zipfile)
* [zipFiles](/v9/generated/modules/zip.md#zipfiles)

## 类型别名

### ZipFileAttribute

Ƭ **ZipFileAttribute**: `"all"` | `"archive"` | `"dateTime"` | `"hidden"` | `"system"` | `"readOnly"`

* alls 所有属性
* archive 压缩包属性
* dateTime 时间
* hidden 是否隐藏
* readOnly 是否只读
* system 是否为系统文件

**`参见`**

[ignoreAttributes](/v9/generated/interfaces/zip.UnzipOptions.md#ignoreattributes)

## 函数

### open

▸ **open**(`file`): [`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)

打开一个zip文件，返回[ZipFile](/v9/generated/interfaces/zip.ZipFile.md)对象，可对该对象进行进一步的zip操作。

#### 参数

| 名称   | 类型     | 描述           |
| :----- | :------- | :------------- |
| `file` | `string` | 压缩包文件路径 |

#### 返回值

[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)

***

### unzip

▸ **unzip**(`zipFile`, `dest`, `options?`): `Promise`<`void`>

解压zip文件。如果文件夹`dest`不存在则创建该文件夹并将内容解压到里面；如果`dest`已经存在，则在`dest`下面创建一个和`zipFile`文件同名的文件夹，并将内容解压到里面。

**`示例`**

```javascript
"nodejs";
const { unzip, zipDir } = require('zip');

async function main() {
    // create a zip file with password
    const zipFilePath = './dest.zip';
    await zipDir('./dir', zipFilePath, { password: 'Auto.js Pro' });
    // unzip the zip file
    await unzip(zipFilePath, './dest', { password: 'Auto.js Pro' });
}
main();
```

#### 参数

| 名称       | 类型                                                         | 描述                   |
| :--------- | :----------------------------------------------------------- | :--------------------- |
| `zipFile`  | `string`                                                     | 需解压的压缩包文件路径 |
| `dest`     | `string`                                                     | 解压后的文件夹目录     |
| `options?` | [`UnzipOptions`](/v9/generated/interfaces/zip.UnzipOptions.md) | 解压选项，可选         |

#### 返回值

`Promise`<`void`>

***

### zipDir

▸ **zipDir**(`dir`, `dest`, `options?`): `Promise`<[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)>

压缩文件夹下所有文件/文件夹，生成到目标路径`dest`。

**`示例`**

```javascript
const { zipDir } = require('zip');
zipDir('./dir', './dest.zip')
 .then(zipFile => console.log(zipFile));
```

#### 参数

| 名称       | 类型                                                         | 描述                                                     |
| :--------- | :----------------------------------------------------------- | :------------------------------------------------------- |
| `dir`      | `string`                                                     | 需要压缩的文件夹路径，如果文件夹下有子文件夹均会一并压缩 |
| `dest`     | `string`                                                     | 压缩后的压缩包存放路径                                   |
| `options?` | [`ZipOptions`](/v9/generated/interfaces/zip.ZipOptions.md) | 可选参数                                                 |

#### 返回值

`Promise`<[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)>

***

### zipFile

▸ **zipFile**(`file`, `dest`, `options?`): `Promise`<[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)>

压缩单文件`file`到路径`dest`。

**`示例`**

```javascript
const { zipFile } = require('zip');
zipFile('./file.txt', './dest.zip')
 .then(zipFile => console.log(zipFile));
```

#### 参数

| 名称       | 类型                                                         | 描述                   |
| :--------- | :----------------------------------------------------------- | :--------------------- |
| `file`     | `string`                                                     | 需要压缩的单文件路径。 |
| `dest`     | `string`                                                     | 压缩后的压缩包存放路径 |
| `options?` | [`ZipOptions`](/v9/generated/interfaces/zip.ZipOptions.md) | 选项                   |

#### 返回值

`Promise`<[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)>

***

### zipFiles

▸ **zipFiles**(`fileList`, `dest`, `options?`): `Promise`<[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)>

压缩多个文件`fileList`到路径`dest`。`fileList`中不能包含文件夹。

**`示例`**

```javascript
const { zipFiles } = require('zip');
zipFiles(['./file1.txt', './file2.txt'], './dest.zip')
 .then(zipFile => console.log(zipFile));
```

#### 参数

| 名称       | 类型                                                         | 描述                       |
| :--------- | :----------------------------------------------------------- | :------------------------- |
| `fileList` | `string`\[]                                                   | 需压缩的多个文件路径的数组 |
| `dest`     | `string`                                                     | 压缩目标路径               |
| `options?` | [`ZipOptions`](/v9/generated/interfaces/zip.ZipOptions.md) | 选项                       |

#### 返回值

`Promise`<[`ZipFile`](/v9/generated/interfaces/zip.ZipFile.md)>

---

---
url: 'https://www.wuyunai.com/docs/docs/v9/migrate.md'
---
# 如何从第一代API迁移过来
如果你对第一代API已比较熟悉，本文将引导你如何从第一代API迁移到第二代API。如果你想了解两代API的优缺点。参考[第二代api和第一代的区别](/#第二代api和第一代api的区别)。

## 启用第二代API与Node.js引擎

为了向前兼容，Pro 9中的代码仍然默认为旧的Rhino引擎/第一代API运行。要使用第二代API需要特别标识，参考[用Node.js引擎运行代码](/#用node-js引擎运行代码)。

## 从全局变量函数改为导入模块

在第二代API中，所有模块都需要导入才能使用。在第一代API中的全局变量，比如app, images模块，在第二代API中都需要导入后使用，比如：

```javascript
// 第一代API
app.viewFile(...)

// 第二代API
const app = require('app');
app.viewFile(...)

// 也可以这样只导入需要的函数
const { viewFile } = require('app');
viewFile(...)
```

第一代API中的全局变量、函数大多数也不能直接使用，比如`sleep`, `log`, `toast`：

```javascript
// 第一代API
sleep(1000)
log(context.getPackageName())
toast('')

// 第二代API
const { delay } = require('lang');
const { showToast } = require('toast')

async function main() {
    await delay(1000);
    const context = $autojs.androidContext;
    console.log(context.getPackageName());
    showToast('Hello');
}
main();
```

## 模块与函数对照表

在第二代API中，一部分模块的名称和第一代相似，比如app, color；一部分模块的功能则迁移到其他模块；一部分模块则由Node.js自带模块代替，比如files模块由Node.js的fs和path模块代替；一部分模块则由第三方npm模块代替，这些模块往往更加完善，比如WebSocket由ws模块代替。

以下是各个第一代API模块在第二代API中的对照或代替。需要注意即使模块名字一样，API设计也可能有所不同。比如在第一代API中获取屏幕宽度是`device.width`，在第二代API中则是`device.screenWdith`。

* app模块

在第二代API中使用[app](/v9/generated/modules/app.md)模块。

* base64模块

在第二代API中使用Buffer代替，比如字符串转换base64：`Buffer.from('autojs', 'utf8').toString('base64')`，base64转换为字符串：`Buffer.from('YXV0b2pz', 'base64').toString('utf8')`。

* colors模块

在第二代API中使用[color](/v9/generated/modules/color.md)模块。

* canvas

UI界面中的canvas与旧版canvas类似。暂不支持无Ui界面下使用Canvas。

* console模块

对于`console.log`等函数直接使用即可，无需迁移。设置日志路径等额外参数参考[Console](/v9/generated/interfaces/globals.Console.html)。

另外，`print`，`log`等函数需要使用`console.log`代替，不能简写。比如`log('hello')`需要替换为`console.log('hello')`。

* crypto模块

在第二代API中使用Node.js模块[crypto](http://nodejs.cn/api-v12/crypto.html)。

* debug模块

在第二代API中暂无代替。

* device模块

在第二代API中使用[device](/v9/generated/modules/device.md)模块。

* dialogs模块

在第二代API中使用[dialogs](/v9/generated/modules/dialogs.md)模块。

* engines模块

在第二代API中使用[engines](/v9/generated/modules/engines.md)模块。

* events模块

第一代API中events模块的事件在第二代API对应如下：

1. `exit`: 用`process.on('exit', () => {})`代替

* floaty模块

在第二代API中使用[floating\_window](/v9/generated/modules/floating_window.md)模块。

* files模块

在第二代API中使用Node.js模块[fs](http://nodejs.cn/api-v12/fs.html)和[path](http://nodejs.cn/api-v12/path.html)。

* globals全局函数与变量

  * `sleep` 使用[lang](/v9/generated/modules/lang.md#delay)模块中的`delay`函数代替，比如`await delay(1000)`
  * `toast`, `toastLog` 在[toast模块](/v9/generated/modules/toast.md#showtoast)中，比如`showToast('hello', {log: true})`, `showToast('hello', {log: true})`
  * `exit` 使用Node.js函数`process.exit()`代替
  * `random` 使用`Math.random`代替，比如:

  ```javascript
  "nodejs";
  function random(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  console.log(random(10, 30));
  ```

  * `requiresApi` 使用[device模块](/v9/generated/classes/device.OS.html#requiresandroidversion)的`requiresAndroidVersion`代替
  * `requiresAutojsVersion` 使用`process.versions.autojspro`获取Auto.js版本后判断
  * `runtime.requesetPermissions` 在ui.Activity中使用`this.requesetPermissions`代替
  * `runtime.loadJar`, `runtime.loadDex` 使用`$java.loadJar`/`$java.loadDex`代替，参加[$java](/v9/generated/interfaces/globals.Java.html#loaddex)
  * `context` 使用`$autojs.androidContext`代替

* http模块

推荐使用内置的[axios模块](/axios.html)代替，功能比http模块强大得多。

* media

在第二代API中使用[media](/v9/generated/modules/media.md)模块。

* plugins

在第二代API中使用[plugins](/v9/generated/modules/plugins.md)模块。

* power\_manager

在第二代API中使用[power\_manager](/v9/generated/modules/power_manager.md)模块。

* sensors

在第二代API中使用[sensors](/v9/generated/modules/sensors.md)模块。

* shell

在第二代API中使用[shell](/v9/generated/modules/shell.md)模块。

* storages

在第二代API中使用[datastore](/v9/generated/modules/datastore.md)模块。

* settings

在第二代API中使用[settings](/v9/generated/modules/settings.md)模块。

* threads

参考[多线程与异步](/migrate-from-api-v1.html#多线程与异步)。

* timers

在第二代API中使用[timers](http://nodejs.cn/api-v12/timers.html)模块。实际上`setTimeout`, `setInterval`等全局函数在第二代API中也可直接使用。

* work\_manager

在第二代API中使用[work\_manager](/v9/generated/modules/work_manager.md)模块。

* ui

在第二代API中使用[ui](/v9/generated/modules/ui.md)模块。UI模块由于有较大的API差别。参考[UI界面代码迁移](/README.md#UI界面代码迁移)。

* util

在第二代API中使用Node.js模块[util](http://nodejs.cn/api-v12/util.html)

* WebSocket

使用npm模块[ws](https://www.npmjs.com/package/ws)代替。ws模块比第一代API模块中的WebSocket功能更完整、更强大。

* zip

在第二代API中使用[zip](/v9/generated/modules/zip.md)模块。

## 异步与Promise

理解异步与Promise是使用第二代API最关键的一步，也是第二代API比第一代门槛高的原因之一。这里我们将简单介绍它们，你可以结合其他网络资料、教学视频等更深入地理解。

(未完待续)

## UI界面代码迁移

## 多线程与异步
